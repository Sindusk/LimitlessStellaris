##########################################################################
# Limitless Stellaris - Resolutions
##########################################################################

# Vanilla Variables
#@resolution_weight_hated = 3
#@resolution_weight_disliked = 4
#@resolution_weight_unpopular = 5
#@resolution_weight_normal = 6
#@resolution_weight_popular = 6.5
#@resolution_weight_loved = 7
#@resolution_weight_fever = 10 # MECR
#
#@resolution_cost_t1 = 100
#@resolution_cost_t2 = 150
#@resolution_cost_t3 = 200
#@resolution_cost_t4 = 250
#@resolution_cost_t5 = 300
#@resolution_cost_denounce = 25
#
#@resolution_flag_timer = 360
#
# MECR Variables
#@resolution_cost_t1_half = 50
#@resolution_cost_t2_half = 75
#@resolution_cost_t3_half = 100
#@resolution_cost_t4_half = 125
#@resolution_cost_t5_half = 150
#@resolution_cost_denounce_half = 12.5

##################################################
## Emperor Resolutions
##################################################

## Emperor - Abolish Council
# Merge between EED, MECR, NGS, Ariphaos
resolution_emperor_abolish_council = {
	icon = "GFX_resolution_abolish_imperial_council"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}
	target = no

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_emperor_abolish_council_tooltip
		hidden_effect = {
			set_council_size = 0
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		NOT = { has_global_flag = imperial_unification_start } # MECR
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_disliked # NGS hated -> disliked

		modifier = {
			factor = 0
			is_part_of_galactic_council = yes
			is_galactic_emperor = no
			desc = gal_com_on_galatic_council
		}

		modifier = {
			factor = 0.5
			is_subject = yes
			overlord = {
				opinion_level = { who = prev level >= neutral }
				is_part_of_galactic_council = yes
				is_galactic_emperor = no
			}
			desc = gal_com_support_overlord_on_galatic_council
		}
		
		modifier = { # EED
			factor = 0.5
			is_egalitarian = yes
			desc = ethic_egalitarian # closest thing to democracy the imperium has
		}
		modifier = { # EED
			factor = 0
			has_ethic = ethic_fanatic_egalitarian
			desc = ethic_egalitarian
		}
		modifier = { # EED
			factor = 0
			is_democratic_crusaders = yes
			desc = personality_democratic_crusaders
		}
		modifier = { # EED
			factor = 1.5
			is_authoritarian  = yes
			desc = ethic_authoritarian
		}
		modifier = { # EED
			factor = 1.5
			is_civic_authoritarian = yes
			desc = ethic_authoritarian
		}
		modifier = { # EED
			factor = 0.5
			OR = {
				is_civic_diplomatic_corps = yes
				is_civic_machine_servitor = yes
			}
			desc = gal_com_opposing_civics
		}
		modifier = { # EED
			factor = 0.8
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = { # EED
			factor = 0.8
			has_ethic = ethic_fanatic_xenophile
			desc = ethic_xenophile
		}
		modifier = { # EED
			factor = 0.8
			is_open_gestalt = yes
			desc = gal_com_open_gestalt
		}
		modifier = { # NGS
			factor = 2
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
	}
}

## Emperor - By Appointment
# Merge between EED, MECR, NGS
resolution_emperor_by_appointment = {
	icon = "GFX_resolution_imperial_council_appointment"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_emperor_by_appointment_tooltip
		hidden_effect = {
			every_playable_country = {
				limit = {
					is_galactic_community_member = yes
					is_part_of_galactic_council = yes
					is_galactic_emperor = no
				}
				add_permanent_councillor = yes
			}
			set_emperor_can_change_council_members = yes
			if = {
				limit = { is_active_resolution = "resolution_emperor_trial_of_advancement" }
				cancel_resolution = "resolution_emperor_trial_of_advancement"
			}
			else_if = {
				limit = { is_active_resolution = "resolution_emperor_by_election" }
				cancel_resolution = "resolution_emperor_by_election"
			}
		}
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
	}

	active = {
		has_galactic_emperor = yes
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_by_appointment" }
		}
	}

	ai_weight = {
		base = @resolution_weight_unpopular # NGS hated -> unpopular
		modifier = { # NGS
			factor = 1.5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}
		modifier = { # EED
			weight = 2
			has_ethic = ethic_fanatic_authoritarian
			desc = ethic_authoritarian
		}
		modifier = { # EED
			weight = 0
			is_egalitarian = yes
			desc = ethic_egalitarian
		}
		modifier = { # EED
			weight = 3
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
	}
}

## Emperor - By Election
# Merge between EED, MECR, NGS, Ariphaos
resolution_emperor_by_election = {
	icon = "GFX_resolution_imperial_council_diplomatic_weight"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_emperor_by_election_tooltip
		hidden_effect = {
			# Restore Council Elections
			every_playable_country = {
				limit = {
					is_galactic_community_member = yes
					is_part_of_galactic_council = yes
					is_galactic_emperor = no
					is_permanent_councillor = yes
				}
				remove_permanent_councillor = yes
			}
			if = {
				limit = { is_active_resolution = "resolution_emperor_trial_of_advancement" }
				cancel_resolution = "resolution_emperor_trial_of_advancement"
			}
			else_if = {
				limit = { is_active_resolution = "resolution_emperor_by_appointment" }
				cancel_resolution = "resolution_emperor_by_appointment"
			}
		}
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		NOT = { has_global_flag = imperial_unification_start } # MECR
	}

	active = {
		has_galactic_emperor = yes
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_by_election" }
		}
	}

	ai_weight = {
		base = @resolution_weight_unpopular # NGS disliked -> unpopular

		modifier = {
			factor = 10
			num_council_positions = 1
			galactic_community_rank = 1
			is_part_of_galactic_council = no
			desc = gal_com_empire_council_candidate
		}

		modifier = {
			factor = 10
			num_council_positions = 2
			galactic_community_rank = 2
			is_part_of_galactic_council = no
			desc = gal_com_empire_council_candidate
		}

		modifier = {
			factor = 10
			num_council_positions = 3
			galactic_community_rank = 3
			is_part_of_galactic_council = no
			desc = gal_com_empire_council_candidate
		}

		modifier = {
			factor = 10
			num_council_positions = 4
			galactic_community_rank = 4
			is_part_of_galactic_council = no
			desc = gal_com_empire_council_candidate
		}

		modifier = {
			factor = 10
			num_council_positions = 5
			galactic_community_rank = 5
			is_part_of_galactic_council = no
			desc = gal_com_empire_council_candidate
		}

		modifier = {
			factor = 0
			galactic_community_rank <= 2
			is_part_of_galactic_council = no
			desc = gal_com_top_two_rank
		}
		
		modifier = { # EED
			factor = 0
			num_council_positions = 1
			galactic_community_rank > 1
			is_egalitarian = no
			is_civic_diplomatic_corps = no
			desc = gal_com_top_two_rank
		}
		modifier = { # EED
			factor = 0
			num_council_positions = 2
			galactic_community_rank > 2
			is_egalitarian = no
			is_civic_diplomatic_corps = no
			desc = gal_com_top_two_rank
		}
		modifier = { # EED
			factor = 0.5
			num_council_positions = 3
			galactic_community_rank > 3
			is_egalitarian = no
			is_civic_diplomatic_corps = no
			desc = gal_com_empire_or_overlord_unlikely_council_candidate
		}
		modifier = { # EED
			factor = 0.5
			num_council_positions = 4
			galactic_community_rank > 4
			is_egalitarian = no
			is_civic_diplomatic_corps = no
			desc = gal_com_empire_or_overlord_unlikely_council_candidate
		}
		modifier = { # EED
			factor = 0.5
			num_council_positions = 5
			galactic_community_rank > 5
			is_egalitarian = no
			is_civic_diplomatic_corps = no
			desc = gal_com_empire_or_overlord_unlikely_council_candidate
		}
		
		modifier = { # EED
			weight = 5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}
		modifier = { # EED
			weight = 5
			has_ethic = ethic_fanatic_egalitarian
			desc = ethic_egalitarian
		}
		modifier = { # EED
			weight = 0.5
			is_authoritarian  = yes
			desc = ethic_authoritarian
		}
		modifier = { # EED
			weight = 0.5
			has_ethic = ethic_fanatic_authoritarian
			desc = ethic_authoritarian
		}
		modifier = { # EED
			weight = 5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
	}
}

## Emperor - Council Size 1
# Merge between EED, NGS, Ariphaos
resolution_emperor_council_size_1 = {
	icon = "GFX_resolution_imperial_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		set_council_size = 1
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		num_council_positions = 2
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_disliked # NGS hated -> disliked

		modifier = {
			factor = 3
			OR = {
				galactic_community_rank = 1
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank = 1
					}
				}
			}
			desc = gal_com_wants_to_reduce_council_size
		}

		modifier = {
			factor = 0
			galactic_community_rank = 2
			desc = gal_com_second_rank
		}

		modifier = {
			factor = 0.5 # NGS 0.8 -> 0.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}
		
		modifier = { # EED
			factor = 0
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}

		modifier = {
			factor = 2 # NGS 1.2 -> 2
			is_authoritarian = yes
			desc = ethic_authoritarian
		}
		
		modifier = { # EED
			factor = 1.5
			has_ethic = ethic_fanatic_authoritarian
			desc = ethic_authoritarian
		}
	}
}

## Emperor - Council Size 2
# Merge between EED, NGS, Ariphaos
resolution_emperor_council_size_2 = {
	icon = "GFX_resolution_imperial_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		set_council_size = 2
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		OR = {
			num_council_positions = 1
			num_council_positions = 3
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_unpopular # NGS disliked -> unpopular

		modifier = { # raising the number of slots is more popular than lowering it
			factor = 1.25
			num_council_positions = 1
			desc = gal_com_increase_council_size_positive
		}

		modifier = {
			factor = 0

			num_council_positions = 3
			OR = {
				galactic_community_rank = 3
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank = 3
					}
				}
			}
			desc = gal_com_they_or_overlord_would_be_removed_from_council
		}

		modifier = {
			factor = 0
			
			num_council_positions = 1
			OR = {
				galactic_community_rank = 1
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank = 1
					}
				}
			}
			desc = gal_com_alone_on_council_or_overlord
		}


		modifier = {
			factor = 3
			
			num_council_positions = 3
			OR = {
				galactic_community_rank <= 2
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank <= 2
					}
				}
			}
			desc = gal_com_wants_to_reduce_council_size
		}

		modifier = {
			factor = 3
			num_council_positions = 1
			OR = {
				galactic_community_rank = 2
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank = 2
					}
				}
			}
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}

		modifier = {
			factor = 0.5 # NGS 0.8 -> 0.5
			num_council_positions = 3
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.5 # NGS 0.8 -> 0.5
			num_council_positions = 1
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 2 # NGS 1.2 -> 2
			num_council_positions = 3
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 2 # NGS 1.2 -> 2
			num_council_positions = 1
			is_egalitarian = yes
			desc = ethic_egalitarian
		}
	}
}

## Emperor - Council Size 3
# Merge between EED, NGS, Ariphaos
resolution_emperor_council_size_3 = {
	icon = "GFX_resolution_imperial_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		set_council_size = 3
		set_global_flag = galactic_council_formed

		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		OR = {
			num_council_positions = 2
			num_council_positions = 4
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_normal # NGS unpopular -> normal

		modifier = { # raising the number of slots is more popular than lowering it
			factor = 1.25
			num_council_positions = 2
			desc = gal_com_increase_council_size_positive
		}

		modifier = {
			factor = 0

			num_council_positions = 4
			OR = {
				galactic_community_rank = 4
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank = 4
					}
				}
			}
			desc = gal_com_they_or_overlord_would_be_removed_from_council
		}

		modifier = {
			factor = 0

			num_council_positions = 2
			OR = {
				galactic_community_rank <= 2
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank <= 2
					}
				}
			}
			desc = gal_com_dont_let_others_in_on_the_council
		}

		modifier = {
			factor = 3

			num_council_positions = 4
			OR = {
				galactic_community_rank <= 3
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank <= 3
					}
				}
			}
			desc = gal_com_wants_to_reduce_council_size
		}

		modifier = {
			factor = 3
			AND = {
				num_council_positions = 2
				OR = {
					galactic_community_rank = 3
					AND = {
						is_subject = yes
						overlord = {
							opinion_level = { who = prev level >= neutral }
							galactic_community_rank = 3
						}
					}
				}
			}
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}
		
		modifier = { # EED
			factor = 10
			num_council_positions = 4
			galactic_community_rank <= 3
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}
		
		modifier = { # EED
			factor = 10
			num_council_positions = 2
			galactic_community_rank = 3
			desc = gal_com_wants_to_reduce_council_size
		}

		modifier = {
			factor = 0.5 # NGS 0.8 -> 0.5
			num_council_positions = 2
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 0.5 # NGS 0.8 -> 0.5
			num_council_positions = 4
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 2 # NGS 1.2 -> 2
			num_council_positions = 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 2 # NGS 1.2 -> 2
			num_council_positions = 4
			is_authoritarian = yes
			desc = ethic_authoritarian
		}
		
		modifier = { # EED
			factor = 0.5
			num_council_positions = 4
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		
		modifier = { # EED
			factor = 1.5
			num_council_positions = 2
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
	}
}

## Emperor - Council Size 4
# Merge between EED, NGS, Ariphaos
resolution_emperor_council_size_4 = {
	icon = "GFX_resolution_imperial_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		set_council_size = 4
		set_global_flag = galactic_council_formed

		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		OR = {
			num_council_positions = 3
			num_council_positions = 5
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_normal

		modifier = { # raising the number of slots is more popular than lowering it
			factor = 1.25
			num_council_positions = 3
			desc = gal_com_increase_council_size_positive
		}

		modifier = {
			factor = 0
			
			num_council_positions = 5
			OR = {
				galactic_community_rank = 5
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank = 5
					}
				}
			}
			desc = gal_com_they_or_overlord_would_be_removed_from_council
		}

		modifier = {
			factor = 0

			num_council_positions = 3
			OR = {
				galactic_community_rank <= 3
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank <= 3
					}
				}
			}
			desc = gal_com_dont_let_others_in_on_the_council
		}

		modifier = {
			factor = 3
			
			num_council_positions = 5
			OR = {
				galactic_community_rank <= 4
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank <= 4
					}
				}
			}
			desc = gal_com_wants_to_reduce_council_size
		}

		modifier = {
			factor = 3
			
			num_council_positions = 3
			OR = {
				galactic_community_rank = 4
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank = 4
					}
				}
			}
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}
		
		modifier = { # EED
			factor = 10
			num_council_positions = 5
			galactic_community_rank <= 4
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}
		
		modifier = { # EED
			factor = 10
			num_council_positions = 3
			galactic_community_rank = 4
			desc = gal_com_wants_to_reduce_council_size
		}

		modifier = { # EED
			factor = 0.5
			OR = {
				AND = {
					num_council_positions = 5
					is_egalitarian = yes
				}
				AND = {
					num_council_positions = 3
					is_authoritarian = yes
				}
			}
			desc = gal_com_opposing_ethics
		}


		modifier = {
			factor = 0.5 # NGS 0.8 -> 0.5
			num_council_positions = 5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.5 # NGS 0.8 -> 0.5
			num_council_positions = 3
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 2 # NGS 1.2 -> 2
			num_council_positions = 5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 2 # NGS 1.2 -> 2
			num_council_positions = 3
			is_egalitarian = yes
			desc = ethic_egalitarian
		}
		
		modifier = { # EED
			factor = 0.5
			num_council_positions = 5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		
		modifier = { # EED
			factor = 1.5
			num_council_positions = 3
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
	}
}

## Emperor - Council Size 5
# Merge between EED, NGS, Ariphaos
resolution_emperor_council_size_5 = {
	icon = "GFX_resolution_imperial_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		set_council_size = 5
		set_global_flag = galactic_council_formed

		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		num_council_positions = 4
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_popular

		modifier = {
			factor = 3
			num_council_positions = 4
			OR = {
				galactic_community_rank = 5
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank = 5
					}
				}
			}
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}
		
		modifier = { # EED
			factor = 10
			num_council_positions = 4
			galactic_community_rank = 5
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}

		modifier = {
			factor = 0.8
			is_part_of_galactic_council = yes
			is_egalitarian = no # EED
			desc = gal_com_negative_sentiment # EED
		}

		modifier = {
			factor = 0.5 # NGS 0.8 -> 0.5
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 2 # NGS 1.2 -> 2
			is_egalitarian = yes
			desc = ethic_egalitarian
		}
		
		modifier = { # EED
			factor = 1.5
			has_ethic = ethic_fanatic_egalitarian
			desc = ethic_egalitarian
		}
		
		modifier = { # EED
			factor = 1.5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
	}
}

## Emperor - Disband Galactic Trade Organization
# Merge between EED, MECR, NGS, Ariphaos
resolution_emperor_disband_gto = {
	icon = "GFX_resolution_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no
	fire_and_forget = yes # MECR

	modifier = {
	}

	effect = {
		cancel_resolution = "resolution_emperor_gto"
		galactic_emperor = { # EED
			set_timed_country_flag = { flag = galcom_resolution_passed_anti_prosperity days = 7200 }
		}
		hidden_effect = { cancel_resolution = "resolution_custodian_gto" } # MECR
		hidden_effect = { pass_resolution_no_cooldown = resolution_category_imperial_institutions_reset_cooldown } # MECR
		pass_resolution_modifier = yes # MECR
	}

	fail_effects = {
		fail_resolution_modifier = yes # MECR
	}

	potential = {
		has_nemesis = yes
		OR = { # MECR
			is_galactic_emperor = yes
			and = { # MECR
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator # MECR
		}
		is_active_resolution = "resolution_emperor_gto"
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 0.6
			is_megacorp = yes # Merged
			desc = auth_corporate
		}

		modifier = {
			factor = 0.6
			OR = {
				has_ai_personality = peaceful_traders
				has_ai_personality = ruthless_capitalists
			}
			desc = gal_com_trader_ai_personality
		}

		modifier = {
			factor = 1.3
			is_xenophobe = yes
			desc = ethic_xenophobe
		}

		modifier = {
			factor = 1.8
			is_xenophobic_isolationists = yes # EED
			desc = gal_com_isolationist_civic # EED
		}

		modifier = {
			factor = 2
			is_gestalt = yes
			desc = ethic_gestalt_consciousness
		}

		modifier = {
			factor = 0
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = { # MECR
			factor = 0.4
			is_galactic_emperor = no
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = { # EED
			factor = 0.25
			is_civic_free_traders = yes
			desc = gal_com_trade_civic
		}
		modifier = { # EED
			factor = 0.5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = { # EED
			factor = 2
			is_anti_corp = yes
			desc = gal_com_anti_corp_civic
		}
	}
}

## Emperor - Disband Interstellar Navigation Agency
# Merge between EED, MECR, NGS
resolution_emperor_disband_ina = {
	icon = "GFX_resolution_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no
	fire_and_forget = yes # MECR

	modifier = {
	}

	effect = {
		cancel_resolution = "resolution_emperor_ina"
		hidden_effect = { cancel_resolution = "resolution_custodian_ina" } # MECR
		hidden_effect = { pass_resolution_no_cooldown = resolution_category_imperial_institutions_reset_cooldown } # MECR
		pass_resolution_modifier = yes # MECR
	}

	fail_effects = {
		fail_resolution_modifier = yes # MECR
	}

	potential = {
		has_nemesis = yes
		OR = { # MECR
			is_galactic_emperor = yes
			and = { # MECR
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator # MECR
		}
		is_active_resolution = "resolution_emperor_ina"
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 1.2
			is_xenophobe = yes
			desc = ethic_xenophobe
		}

		modifier = {
			factor = 2
			is_xenophobic_isolationists = yes # EED
			desc = gal_com_isolationist_civic # EED
		}

		modifier = {
			factor = 0.8
			is_xenophile = yes
			desc = ethic_xenophile
		}

		modifier = {
			factor = 0.4
			is_erudite_explorers = yes # EED
			desc = personality_erudite_explorers
		}

		modifier = {
			factor = 0
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = { # MECR
			factor = 0.4
			is_galactic_emperor = no
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = { # EED
			factor = 0.5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = { # EED
			factor = 0.75
			OR = { is_militarist = yes is_civic_militarist = yes }
			desc = ethic_militarist
		}
		modifier = { # EED
			factor = 1.25
			has_monthly_income = { resource = energy  value < 20 }
			desc = gal_com_energy_income
		}
		modifier = { # EED
			factor = 1.5
			has_deficit = energy
			desc = gal_com_energy_income
		}
	}
}

## Emperor - Expand Imperial Armada
# Merge between EED, MECR, NGS
resolution_emperor_expand_ia = {
	icon = "GFX_resolution_expand_armada"

	resources = {
		category = resolutions
		cost = {
			trigger = { NOT = { is_active_resolution = "resolution_emperor_imperial_ministry_of_defence" } } # MECR
			influence = @resolution_cost_t1 # MECR t3 -> t1
		}
		cost = { # MECR
			trigger = { is_active_resolution = "resolution_emperor_imperial_ministry_of_defence" }
			influence = @resolution_cost_t1_half
		}
	}
	target = no

	allow = {
		imperial_authority >= 100 # MECR
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_expand_ia" }
		}
	}

	modifier = {
		resolution_emperor_ia_2 = 1 # MECR
		resolution_custodian_gdf_2 = 1
		country_community_gdf_naval_capacity = 1000 # EED 400 -> 1,000
	}
	triggered_modifier = { # MECR
		potential = {
			NOT = {
				galactic_emperor = {
					has_federation = yes
					federation = { has_federation_law = imperial_ministry_of_defence_joint_headquarter }
				}
			}
		}
		modifier = {
			country_community_gdf_naval_capacity = 400
		}
	}
	triggered_modifier = { # MECR
		potential = {
			galactic_emperor = {
				has_federation = yes
				federation = { has_federation_law = imperial_ministry_of_defence_joint_headquarter }
			}
		}
		modifier = {
			country_community_gdf_naval_capacity = 500
		}
	}
	triggered_modifier = { # MECR
		potential = { is_galactic_emperor = yes }
		modifier = { imperial_governance_usage_naval = 100 }
	}

	effect = {
		pass_resolution_modifier = yes # MECR
	}

	fail_effects = {
		fail_resolution_modifier = yes # MECR
	}

	potential = {
		has_nemesis = yes
		OR = { # MECR
			is_galactic_emperor = yes
			and = { # MECR
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator # MECR
		}
		is_active_resolution = "resolution_emperor_imperial_armada"
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_unpopular # NGS disliked -> unpopular

		modifier = {
			factor = 0.6
			is_pacifist = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_pacifist
		}

		modifier = {
			factor = 0.6
			is_xenophobe = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_xenophobe
		}

		modifier = {
			factor = 1.2
			OR = { is_militarist = yes is_civic_militarist = yes } # EED
			desc = ethic_militarist
		}

		modifier = {
			factor = 2
			any_country = { is_crisis_faction = yes }
			desc = gal_com_someone_is_revealed_crisis
		}

		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}

		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}

		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}

		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}

		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}

		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}

		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}

		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}

		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}

		modifier = { # MECR
			factor = 20
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = {
			factor = 5 # MECR 1.4 -> 5
			is_galactic_emperor = no # MECR
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = { # MECR
			factor = 5
			is_subject = yes
			overlord = { is_galactic_emperor = yes }
			desc = gal_com_emperors_subject
		}

		modifier = {
			factor = 20
			is_galactic_emperor = yes
			desc = galactic_emperor
		}

		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}

		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
		modifier = { # EED
			factor = 2
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = { # EED
			factor = 1.5
			is_civic_machine_servitor = yes
			desc = civic_machine_servitor
		}
		modifier = { # EED
			factor = 1.25
			is_civic_police_state = yes
			desc = gal_com_police_civic
		}
	}
}

## Emperor - Galactic Mobilization
# Merge between EED, MECR
resolution_emperor_galactic_mobilization = {
	icon = "GFX_resolution_galactic_mobilization" # MECR

	resources = {
		category = resolutions
		cost = {
			trigger = { NOT = { is_active_resolution = "resolution_emperor_imperial_ministry_of_defence" } } # MECR
			influence = @resolution_cost_t3
		}
		cost = { # MECR
			trigger = { is_active_resolution = "resolution_emperor_imperial_ministry_of_defence" }
			influence = @resolution_cost_t3_half
		}
	}
	target = no

	triggered_modifier = {
		potential = {
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
		modifier = {
			resolution_custodian_galactic_mobilization = 1
		}
	}
	triggered_modifier = {
		potential = {
			is_gestalt = yes # Merged
		}
		modifier = {
			resolution_custodian_galactic_mobilization_gestalt = 1
		}
	}

	effect = {
		pass_resolution_modifier = yes # MECR
	}

	fail_effects = {
		fail_resolution_modifier = yes # MECR
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = resolution_emperor_galactic_mobilization }
		}
		custom_tooltip = { # MECR
			fail_text = "galaxy_must_be_in_danger"
			galaxy_is_peace = no
		}
		custom_tooltip = { # EED
			fail_text = "resolution_must_have_crisis"
			OR = {
				has_global_flag = ongoing_prethoryn_invasion
				has_global_flag = ai_invasion_ongoing
				has_global_flag = gray_goo_crisis_active
				has_global_flag = war_in_heaven_ongoing
				has_global_flag = marauder_crisis_ongoing
				AND = {
					has_global_flag = extradimensional_invasion_happened
					NOT = { has_global_flag = extradimensional_invasion_defeated }
				}
				any_country = { has_been_declared_crisis = yes }
			}
		}
	}

	potential = {
		has_nemesis = yes
		OR = {
			is_galactic_custodian = yes # EED
			is_galactic_emperor = yes
			and = { # MECR
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator # MECR
			AND = { # MECR
				is_galactic_custodian = yes
				has_global_flag = galactic_republic_formed	#Expanded Diplomacy and Espionage mod
			}
		}
		OR = { # EED
			has_galactic_republic = yes
			has_galactic_emperor = yes
		}
	}

	active = {
		OR = {
			has_galactic_republic = yes # EED
			has_galactic_emperor = yes
			has_global_flag = galactic_republic_formed		#Expanded Diplomacy and Espionage mod
		}
		galaxy_is_peace = no
		OR = { # EED
			has_global_flag = ongoing_prethoryn_invasion
			has_global_flag = ai_invasion_ongoing
			has_global_flag = gray_goo_crisis_active
			has_global_flag = war_in_heaven_ongoing
			has_global_flag = marauder_crisis_ongoing
			AND = {
				has_global_flag = extradimensional_invasion_happened
				NOT = { has_global_flag = extradimensional_invasion_defeated }
			}
			any_country = { has_been_declared_crisis = yes }
		}
	}

	ai_weight = {
		base = @resolution_weight_hated

		modifier = {
			factor = 1.6
			is_militarist = yes # Merged
			desc = ethic_militarist
		}
		modifier = {
			factor = 0.6
			is_pacifist = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_pacifist
		}
		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}
		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}
		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}
		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}
		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = { # EED
			factor = 0
			has_ascension_perk = ap_become_the_crisis
			desc = ap_become_the_crisis
		}
		modifier = { # EED
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = { # MECR
			factor = 0
			 has_ascension_perk = ap_become_the_crisis
			 desc = gal_com_we_have_crisis_perk
		}
		modifier = {
			factor = 4
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = { # EED
			factor = 20
			OR = {
				is_militarist = yes
				is_civic_militarist = yes
			}
			is_galactic_custodian = yes
			desc = gal_com_militarist_custodian
		}
		modifier = { # EED
			factor = 20
			OR = {
				is_militarist = yes
				is_civic_militarist = yes
			}
			is_galactic_emperor = yes
			desc = gal_com_militarist_emperor
		}
		modifier = { # MECR
			factor = 20
			is_militarist = yes
			is_galactic_emperor = yes
			desc = militarist_galactic_emperor
		}
		modifier = {
			factor = 0
			is_subject = yes
			overlord = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}
		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}
		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
		modifier = { # EED
			factor = 0.9
			is_capitalist = yes
			desc = auth_corporate # reduces trade value
		}
	}
}

## Emperor - Galactic Standard
# Merge between EED, MECR
resolution_emperor_galactic_standard = {
	icon = "GFX_resolution_emperor_galactic_standard"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
		resolution_custodian_galactic_standard = 1
	}
	triggered_modifier = { # MECR
		potential = {
			has_global_flag = flag_galactic_standard_set_timer
		}
		modifier = { resolution_custodian_galactic_standard_price = 1 }
	}

	effect = {
		set_timed_country_flag = { flag = galcom_resolution_passed_anti_isolationist days = 7200 } # EED
		set_timed_country_flag = { flag = galcom_resolution_passed_anti_supremacist days = 7200 } # EED
		hidden_effect = { # MECR
			set_timed_country_flag = { flag = faction_xenophobe_isolationist_outraged_gc days = 7200 }	#Expanded Diplomacy and Espionage mod
			set_timed_country_flag = { flag = faction_xenophobe_supremacist_outraged_gc days = 7200 }	#Expanded Diplomacy and Espionage mod
			if = {
				limit = { NOT = { has_global_flag = flag_galactic_standard_set } }
				custom_tooltip = "resolution_custodian_galactic_standard_price_effect"
				set_global_flag = flag_galactic_standard_set
				set_timed_global_flag = {
					flag = flag_galactic_standard_set_timer
					years = 25
				}
				event_target:global_event_country = {
					set_saved_date = {
						key = galactic_standard_set_timer
						days_from_present = 9000
						expires = 9000
					}
				}
			}
			else_if = {
				limit = { has_global_flag = flag_galactic_standard_set_timer }
				custom_tooltip = "resolution_custodian_galactic_standard_price_effect_active"
			}
		}
		pass_resolution_modifier = yes # MECR
	}

	fail_effects = {
		fail_resolution_modifier = yes # MECR
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_galactic_standard" }
		}
	}

	potential = {
		has_nemesis = yes
		OR = {
			is_galactic_custodian = yes # EED
			is_galactic_emperor = yes
			AND = {
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			AND = {
				is_galactic_custodian = yes
				has_global_flag = galactic_republic_formed	#Expanded Diplomacy and Espionage mod
			}
		}
		OR = { # EED
			has_galactic_republic = yes
			has_galactic_emperor = yes
		}
	}

	active = {
		OR = {
			has_galactic_emperor = yes
			has_galactic_republic = yes # EED
			has_global_flag = galactic_republic_formed		#Expanded Diplomacy and Espionage mod
		}
	}

	ai_weight = {
		base = @resolution_weight_loved

		modifier = { # EED
			factor = 5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = {
			factor = 2
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = { # EED
			factor = 1.25
			is_civic_efficient_bureaucracy = yes
			desc = gal_com_efficient_civic
		}
		modifier = {
			factor = 1.25
			OR = {
				has_ai_personality = peaceful_traders
				has_ai_personality = ruthless_capitalists # MECR
			}
			desc = gal_com_trader_ai_personality
		}
		modifier = { # EED
			factor = 1.25
			is_capitalist = yes
			desc = auth_corporate # should include ruthless capitalists
		}
		modifier = { # EED
			factor = 1.1
			is_civic_has_meritocracy = yes
			desc = gal_com_meritocracy_civic
		}
		modifier = { # EED
			factor = 1.1
			is_materialist = yes
			desc = ethic_materialist
		}
		modifier = { # EED
			factor = 0.9
			has_valid_civic = civic_byzantine_bureaucracy
			desc = civic_byzantine_bureaucracy # dislikes anything that makes bureaucracy easier
		}
		modifier = { # EED
			factor = 0.9
			is_authoritarian  = yes
			desc = ethic_authoritarian
		}
		modifier = { # EED
			factor = 0.8
			is_civic_has_elite  = yes
			desc = gal_com_elite_civic
		}
		modifier = { # EED
			factor = 0.8
			is_civic_authoritarian = yes
			desc = ethic_authoritarian
		}
		modifier = {
			factor = 0.5
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 0.5
			is_xenophobic_isolationists = yes # EED
			desc = personality_xenophobic_isolationists
		}
		modifier = { # EED
			factor = 0
			has_ethic = ethic_fanatic_xenophobe
			desc = ethic_xenophobe
		}
		modifier = { # EED
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = {
			factor = 4
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = { # MECR
			factor = 2
			is_galactic_emperor = no
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = { # EED
			factor = 0.1
			is_gestalt = yes
			desc = ethic_gestalt_consciousness
			is_civic_machine_servitor = no
		}
	}
}

## Emperor - Galactic Trade Organization
# Merge between EED, MECR, NGS, Ariphaos
resolution_emperor_gto = {
	icon = "GFX_resolution_form_gto"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
		resolution_emperor_gto = 1 # MECR
	}
	triggered_modifier = { # MECR
		potential = { is_active_resolution = resolution_emperor_imperial_bank }
		modifier = {
			resolution_emperor_gto_enhanced = 1
		}
	}
	triggered_modifier = { # MECR
		potential = { is_galactic_emperor = yes }
		modifier = { imperial_governance_usage = 75 }
	}

	effect = {
		hidden_effect = { pass_resolution_no_cooldown = resolution_category_imperial_institutions_reset_cooldown } # MECR
		pass_resolution_modifier = yes # MECR
		galactic_emperor = { # EED
			set_timed_country_flag = { flag = galcom_resolution_passed_anti_isolationist days = 7200 }
		}
	}

	fail_effects = {
		fail_resolution_modifier = yes # MECR
	}

	potential = {
		has_nemesis = yes
		OR = { # MECR
			is_galactic_emperor = yes
			and = { # MECR
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator # MECR
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = resolution_emperor_gto }
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_normal

		modifier = {
			factor = 1.5
			is_megacorp = yes # Merged
			desc = auth_corporate
		}

		modifier = {
			factor = 1.5
			OR = {
				has_ai_personality = peaceful_traders
				has_ai_personality = ruthless_capitalists
			}
			desc = gal_com_trader_ai_personality
		}

		modifier = {
			factor = 0.7
			is_xenophobe = yes
			desc = ethic_xenophobe
		}

		modifier = {
			factor = 0.5
			is_xenophobic_isolationists = yes # EED
			desc = gal_com_isolationist_civic # EED
		}

		modifier = {
			factor = 0.2
			is_gestalt = yes
			desc = ethic_gestalt_consciousness
		}

		modifier = {
			factor = 4
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = { # MECR
			factor = 2
			is_galactic_emperor = no
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = { # MECR
			factor = 2
			is_subject = yes
			overlord = { is_galactic_emperor = yes }
			desc = gal_com_emperors_subject
		}
		modifier = { # EED
			factor = 3
			is_civic_free_traders = yes
			desc = gal_com_trade_civic
		}
		modifier = { # EED
			factor = 2
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = { # EED
			factor = 0.5
			is_anti_corp = yes
			desc = gal_com_anti_corp_civic
		}
	}
}

## Emperor - Imperial Armada
# Merge between EED, MECR, NGS, Ariphaos, STU
resolution_emperor_imperial_armada = {
	icon = "GFX_resolution_imperial_armada"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
		resolution_custodian_gdf = 1 # MECR removes this, but ignored for now
		country_community_gdf_naval_capacity = 400 # EED
		resolution_emperor_ia = 1 # MECR
	}
	triggered_modifier = { # MECR
		potential = {
			galactic_emperor = {
				has_federation = yes
				federation = { has_federation_law = imperial_ministry_of_defence_joint_headquarter }
			}
		}
		modifier = {
			country_community_gdf_naval_capacity = 100
		}
	}
	triggered_modifier = { # MECR
		potential = { is_galactic_emperor = yes }
		modifier = { imperial_governance_usage_naval = 200 }
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_imperial_armada" }
		}
	}

	effect = {
		if = {
			limit = { galactic_defense_force_exists = no } #e.g. Custodian becomes Emperor
			set_galactic_defense_force = yes
		}
		hidden_effect = {
			every_playable_country = {
				limit = { is_galactic_community_member = yes }
				country_event = { id = emperor.50 }
			}
		}
		pass_resolution_modifier = yes # MECR
	}

	fail_effects = {
		fail_resolution_modifier = yes # MECR
	}

	potential = {
		has_nemesis = yes
		OR = { # MECR
			is_galactic_emperor = yes
			and = { # MECR
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator # MECR
		}
		NOT = { # MECR
			any_country = { has_country_flag = gdf_turned_into_armada }
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_normal # NGS unpopular -> normal

		modifier = {
			factor = 0.6
			is_pacifist = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_pacifist
		}

		modifier = {
			factor = 0.6
			is_xenophobe = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_xenophobe
		}

		modifier = {
			factor = 1.2
			OR = { is_militarist = yes is_civic_militarist = yes } # EED
			desc = ethic_militarist
		}

		modifier = {
			factor = 4
			any_country = { is_crisis_faction = yes }
			desc = gal_com_someone_is_revealed_crisis
		}

		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}

		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}

		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}

		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}

		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}

		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}

		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}

		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}

		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = { # MECR
			factor = 50
			is_galactic_emperor = yes
			desc = galactic_emperor
		}

		modifier = {
			factor = 10 # MECR 1.4 -> 10
			is_galactic_emperor = no # MECR
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = { # MECR
			factor = 10
			is_subject = yes
			overlord = { is_galactic_emperor = yes }
			desc = gal_com_emperors_subject
		}

		modifier = {
			factor = 20
			is_galactic_emperor = yes
			desc = galactic_emperor
		}

		modifier = {
			factor = 0
			is_subject = yes
			overlord = {
				is_fallen_empire = yes # STU
			}
			desc = gal_com_subject_of_fallen_empire
		}

		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}

		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
		modifier = { # EED
			factor = 2
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = { # EED
			factor = 1.5
			is_civic_machine_servitor = yes
			desc = civic_machine_servitor
		}
		modifier = { # EED
			factor = 1.25
			is_civic_police_state = yes
			desc = gal_com_police_civic
		}
	}
}

## Emperor - Imperial Charter
# Merge between EED, MECR, NGS, Ariphaos, STU
resolution_emperor_imperial_charter = {
	icon = "GFX_resolution_imperial_trade_company"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}

	target = yes
	harmful = no

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_imperial_charter" }
		}
	}

	valid_target = {
		is_playable = yes # STU
		is_galactic_community_member = yes
		is_megacorp = yes
		is_criminal_syndicate = no # MECR
		is_galactic_emperor = no
	}

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_emperor_imperial_charter_tooltip
		custom_tooltip = resolution_emperor_imperial_charter_tooltip_weaken_effect # MECR
		hidden_effect = {
			set_global_flag = imperial_charter_granted
			add_modifier = { modifier = imperial_charter }
			random_playable_country = {
				limit = { is_galactic_emperor = yes }
				set_variable = {
					which = "imp_concession_ports"
					value = 0
				}
			}
			every_playable_country = {
				limit = {
					is_ai = no
					NOT = { is_same_value = prev }
					is_galactic_community_member = yes
					is_galactic_emperor = no
				}
				country_event = { id = emperor.60 }
			}
		}
		hidden_effect = { pass_resolution_no_cooldown = resolution_category_imperial_members_reset_cooldown } # MECR
		from_pass_resolution_modifier = yes # MECR
	}

	fail_effects = {
		from_fail_resolution_modifier = yes # MECR
	}

	potential = {
		has_nemesis = yes
		OR = { # MECR
			is_galactic_emperor = yes
			and = { # MECR
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator # MECR
		}
		NOR = { # MECR
			any_country = { # MECR
				is_galactic_emperor = yes
				OR = { # MECR
					has_civic = civic_galactic_sovereign_megacorp # Megacorp Emperors build their own concession ports
					AND = { # Maid Emperors 
						has_global_flag = flag_rogue_maid_mod_activated
						has_ascension_perk = ap_expactriate_service
					}
				}
			}
			has_global_flag = imperial_charter_granted # MECR
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_unpopular # NGS disliked -> unpopular

		modifier = {
			factor = 3 # MECR 1.2 -> 3
			is_galactic_emperor = no # MECR
			is_part_of_galactic_council = yes
			is_megacorp = no # MECR
			desc = gal_com_on_galatic_council
		}

		modifier = {
			factor = 20
			is_galactic_emperor = yes
			has_ascension_perk = ap_expactriate_service # MECR
			desc = galactic_emperor
		}
		modifier = { # MECR
			factor = 0
			is_galactic_emperor = yes
			has_ascension_perk = ap_expactriate_service
			desc = galactic_emperors_government
		}

		modifier = {
			factor = 20
			is_same_value = from
			desc = gal_com_target_is_me
		}
		
		modifier = { # Ariphaos
			factor = 0
			is_rival = from
			desc = gal_com_target_is_rival
		}
		modifier = { # EED
			factor = 0
			is_at_war_with = from
			desc = gal_com_target_is_rival
		}
		
		modifier = { # EED
			factor = 0.5
			is_anti_corp = yes
			desc = gal_com_anti_corp_civic
		}
		modifier = { # EED
			factor = 0
			OR = {
				is_xenophobe = yes
				is_xenophobic_isolationists = yes
			}
			desc = ethic_xenophobe
		}
		
		modifier = { # EED
			factor = 1.5
			is_capitalist = yes
			desc = auth_corporate 
		}
		
		modifier = { # EED
			factor = 0.2
			OR = {
				is_hostile_to = FROM
				is_domineering_to = FROM
				is_unfriendly_to = FROM
			}
			desc = gal_com_target_is_unfriendly
		}
		
		modifier = { # EED
			factor = 0.2
			from = { is_criminal_syndicate = yes }
			is_criminal_syndicate = no
			desc = gal_com_target_is_criminal
		}
		
		modifier = { # EED
			factor = 2
			from = { is_criminal_syndicate = yes }
			is_criminal_syndicate = yes
			desc = gal_com_target_is_criminal
		}
		
		modifier = { # Ariphaos
			factor = 2
			is_in_federation_with = from
			desc = ariphaos_patch_gal_com_share_federation
		}
	}
}

## Emperor - Imperial Legions
# Merge between EED, MECR, NGS, Ariphaos, STU
resolution_emperor_imperial_legions = {
	icon = "GFX_resolution_imperial_legions"

	resources = {
		category = resolutions
		cost = {
			trigger = { NOT = { is_active_resolution = "resolution_emperor_imperial_ministry_of_defence" } } # MECR
			influence = @resolution_cost_t3
		}
		cost = { # MECR
			trigger = { is_active_resolution = "resolution_emperor_imperial_ministry_of_defence" }
			influence = @resolution_cost_t3_half
		}
	}
	target = no

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_imperial_legions" }
		}
	}

	modifier = {
	}
	triggered_modifier = { # MECR
		potential = { is_galactic_emperor = yes }
		modifier = { imperial_governance_usage_naval = 125 }
	}

	effect = {
		custom_tooltip = resolution_emperor_imperial_legions_tooltip_basic # MECR
		if = { # MECR
			limit = { galactic_emperor = { NOT = { has_ethic = ethic_gestalt_consciousness } } }
			custom_tooltip = resolution_emperor_imperial_legions_tooltip_emperor_is_regular
		}
		else_if = { # MECR
			limit = { galactic_emperor = { is_machine_empire = yes } }
			custom_tooltip = resolution_emperor_imperial_legions_tooltip_emperor_is_machine
		}
		else = { # MECR
			custom_tooltip = resolution_emperor_imperial_legions_tooltip_emperor_is_hive
		}
		if = { # MECR
			limit = {
				is_active_resolution = resolution_emperor_imperial_legions
				is_galactic_emperor = yes
			}
			custom_tooltip = resolution_emperor_imperial_legions_tooltip_count
		}
		hidden_effect = { # MECR
			galactic_emperor = { # MECR
				#招募界面的显示
				set_variable = { which = imperial_legion_soldier_count value = 0 }
				set_variable = { which = imperial_legion_soldier_count_mega_warform value = 0 }
				set_variable = { which = imperial_legion_soldier_count_warrior_drones value = 0 }
				every_owned_army = {
					limit = {
						is_defensive_army = no
						OR = {
							army_type = imperial_legion
							army_type = imperial_mega_warform
							army_type = imperial_warrior_drones
						}
					}
					switch = {
						trigger = army_type
						imperial_legion = { prev = { change_variable = { which = imperial_legion_soldier_count value = 1 } } }
						imperial_mega_warform = { prev = { change_variable = { which = imperial_legion_soldier_count_mega_warform value = 1 } } }
						imperial_warrior_drones = { prev = { change_variable = { which = imperial_legion_soldier_count_warrior_drones value = 1 } } }
					}
				}
				set_variable = { which = var_imperial_legion_cap value = value:imperial_legion_cap }
				set_variable = { which = var_imperial_mega_warform_cap value = value:imperial_mega_warform_cap }
				set_variable = { which = var_imperial_warrior_drones_cap value = value:imperial_warrior_drones_cap }

				if = { #给ai皇帝招募20支帝国军团，机械优先，普通和蜂群随机
					limit = {
						is_ai = yes
					}
					while = {
						count = 20
						if = {
							limit = {
								check_variable = {
									which = "imperial_legion_soldier_count_mega_warform"
									value < value:imperial_mega_warform_cap
								}
							}
							capital_scope = {
								create_army = {
									owner = galactic_emperor
									type = "imperial_mega_warform"
								}
							}
							change_variable = {
								which = "imperial_legion_soldier_count_mega_warform"
								value = 1
							}
						}
						else_if = {
							limit = {
								OR = {
									check_variable = {
										which = "imperial_legion_soldier_count"
										value < value:imperial_legion_cap
									}
									check_variable = {
										which = "imperial_legion_soldier_count_warrior_drones"
										value < value:imperial_warrior_drones_cap
									}
								}
							}
							random_list = {
								10 = {
									modifier = {
										factor = 0
										NOT = {
											check_variable = {
												which = "imperial_legion_soldier_count"
												value < value:imperial_legion_cap
											}
										}
									}
									capital_scope = {
										create_army = {
											owner = galactic_emperor
											type = "imperial_legion"
										}
									}
									change_variable = {
										which = "imperial_legion_soldier_count"
										value = 1
									}
								}
								10 = {
									modifier = {
										factor = 0
										NOT = {
											check_variable = {
												which = "imperial_legion_soldier_count_warrior_drones"
												value < value:imperial_warrior_drones_cap
											}
										}
									}
									capital_scope = {
										create_army = {
											owner = galactic_emperor
											type = "imperial_warrior_drones"
										}
									}
									change_variable = {
										which = "imperial_legion_soldier_count_warrior_drones"
										value = 1
									}
								}
							}
						}
					}
				}
			}
			every_playable_country = {
				limit = { is_galactic_community_member = yes }
				country_event = { id = emperor.55 }
			}
		}
		pass_resolution_modifier = yes # MECR
	}

	fail_effects = {
		fail_resolution_modifier = yes # MECR
	}

	potential = {
		has_nemesis = yes
		OR = { # MECR
			is_galactic_emperor = yes
			and = { # MECR
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator # MECR
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_normal # NGS unpopular -> normal

		modifier = {
			factor = 0.4
			OR = {
				is_pacifist = yes
				is_open_gestalt = yes # EED
				is_civic_machine_servitor = yes # EED
			}
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_pacifist
		}

		modifier = {
			factor = 0.6
			OR = { # EED
				is_xenophobe = yes
				is_xenophobic_isolationists = yes # EED
			}
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_xenophobe
		}

		modifier = {
			factor = 1.2
			OR = { is_militarist = yes is_civic_militarist = yes } # EED
			desc = ethic_militarist
		}

		modifier = {
			factor = 4
			any_country = { is_crisis_faction = yes }
			desc = gal_com_someone_is_revealed_crisis
		}

		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}

		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}

		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}

		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}

		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}

		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}

		modifier = {
			factor = 14
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}

		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}

		modifier = {
			factor = 14
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = { # MECR
			factor = 4
			is_galactic_emperor = yes
			desc = galactic_emperor
		}

		modifier = {
			factor = 2 # MECR 1.4 -> 2
			is_galactic_emperor = no # MECR
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}

		modifier = {
			factor = 20
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = { # MECR
			factor = 2
			is_subject = yes
			overlord = { is_galactic_emperor = yes }
			desc = gal_com_emperors_subject
		}

		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}

		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
		modifier = { # EED
			factor = 2
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = { # EED
			factor = 2
			is_civic_police_state = yes
			desc = gal_com_police_civic
		}
	}
}


