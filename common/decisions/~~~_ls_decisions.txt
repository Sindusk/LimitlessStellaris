## Ringworld Arcology Project [Gigastructural Engineering]
# Removed commercial and science districts blocking the project.
decision_ringworld_arcology_project = {
	owned_planets_only = yes
	icon = decision_arcology_project
	ai_weight = { weight = 0 }
	enactment_time = 5400

	resources = {
		category = decisions
		cost = { trigger = { has_planet_flag = giga_ringworld_tit }	minerals = 40000 }
		cost = { trigger = { has_planet_flag = giga_ringworld_beh }	minerals = 40000 }
		cost = { trigger = { has_planet_flag = giga_ringworld_gar }	minerals = 40000 }
		cost = {													minerals = 40000 influence = 300 }
	}

	potential = {
		NOR = {
			is_planet_class = pc_ringworld_city
			has_modifier = resort_colony
			has_modifier = penal_colony
			has_modifier = slave_colony
			ag_is_ancient_ringworld = yes
			has_global_flag = cityring_disabled
		}
		is_planet_class = pc_ringworld_habitable
		exists = owner
		owner = { has_ascension_perk = ap_arcology_project }
	}

	allow = {
		if = {
			limit = { has_planet_flag = giga_ringworld_gar }
			owner = { resource_stockpile_compare = { resource = influence value >= 300 } }
			owner = { resource_stockpile_compare = { resource = minerals value >= 160000 } }
		}
		else_if = {
			limit = { has_planet_flag = giga_ringworld_tit }
			owner = { resource_stockpile_compare = { resource = influence value >= 300 } }
			owner = { resource_stockpile_compare = { resource = minerals value >= 120000 } }
		}
		else_if = {
			limit = { has_planet_flag = giga_ringworld_tit }
			owner = { resource_stockpile_compare = { resource = influence value >= 300 } }
			owner = { resource_stockpile_compare = { resource = minerals value >= 80000 } }
		}
		else = {
			owner = { resource_stockpile_compare = { resource = influence value >= 300 } }
			owner = { resource_stockpile_compare = { resource = minerals value >= 40000 } }
		}
		custom_tooltip = {
			fail_text = "decision_ringworld_arcology_project_requirements"
			free_district_slots < 1
			num_districts = { type = district_rw_generator value < 1 }
			#num_districts = { type = district_rw_commercial value < 1 } # LS - removed condition
			#num_districts = { type = district_rw_science value < 1 } # LS - removed condition
			num_districts = { type = district_rw_farming value < 1 }
		}
	}

	effect = {
		# Make city-planet
		custom_tooltip = "decision_ringworld_arcology_project_effects"
		hidden_effect = {
			clear_deposits = yes
			change_pc = pc_ringworld_city
			set_planet_flag = giga_archology
			solar_system = { save_event_target_as = giga_system }
			save_event_target_as = giga_planet
			planet_event = { id = giga_dialog.2401 }	# Notification
			owner = {
				if = {
					limit = { prev = { has_planet_flag = giga_ringworld_gar } }
					giga_set_ringworld_graphical_culture = {
						TARGET = prev
						SOURCE = this
						SIZE = gargantuan
						TYPE = ecu_habitable
					}
				}
				else_if = {
					limit = { prev = { has_planet_flag = giga_ringworld_beh } }
					giga_set_ringworld_graphical_culture = {
						TARGET = prev
						SOURCE = this
						SIZE = behemoth
						TYPE = ecu_habitable
					}
				}
				else_if = {
					limit = { prev = { has_planet_flag = giga_ringworld_tit } }
					giga_set_ringworld_graphical_culture = {
						TARGET = prev
						SOURCE = this
						SIZE = titanic
						TYPE = ecu_habitable
					}
				}
				else = {
					giga_set_ringworld_graphical_culture = {
						TARGET = prev
						SOURCE = this
						SIZE = vanilla
						TYPE = ecu_habitable
						VANILLA_TYPE = habitable
					}
				}
			}
			if = {		limit = { exists = owner owner = { is_regular_empire = yes } }	while = { count = 3 remove_district = district_rw_city } }
			else_if = {	limit = { exists = owner owner = { is_hive_empire = yes } }		while = { count = 3 remove_district = district_rw_hive } }
			else_if = {	limit = { exists = owner owner = { is_machine_empire = yes } }	while = { count = 3 remove_district = district_rw_nexus } }
		}
	}
}