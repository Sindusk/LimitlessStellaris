##########################################################################
# Doge Districts
##########################################################################
### Vanilla Variables ###
# Normal Districts #
@base_cost = 300
@city_cost = 500

# Habitats #
@hab_cost = 500
@hab_maintenance = 2

##################################################
## Habitat Commercial [Vanilla] - StarTech AI, Planetary Diversity, Ethics & Civics: Bug Branch, and Enhanced Districts
##################################################
district_hab_commercial = {
    base_buildtime = 240
    is_capped_by_modifier = no
    show_on_uncolonized = {
        tde_uses_district_set_habitat = yes
        NOT = {
            uses_district_set = pdplanethab
        }
        exists = from
        from = {
            is_gestalt = no
        }
    }
    potential = {
        tde_uses_district_set_habitat = yes
        NOT = {
            uses_district_set = pdplanethab
        }
        exists = owner
        owner = {
            is_gestalt = no
        }
    }
    allow = {
        str_habitat_trade_allow = yes
    }
    conversion_ratio = 0.5
    convert_to = {
        district_hab_energy
    }
    resources = {
        category = planet_districts_hab_trade
        cost = {
            minerals = @hab_cost
        }
        upkeep = {
            energy = @hab_maintenance
        }
    }
    planet_modifier = {
        planet_housing_add = 3
        job_clerk_add = 3
        trade_value_mult = 0.05
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_clerk_add = -3
            job_manager_add = 3
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_active_tradition = tr_prosperity_interstellar_franchising
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_clerk_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_active_tradition = tr_prosperity_interstellar_franchising
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_manager_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_active_tradition = tr_mercantile_commercial_enterprise
            }
        }
        modifier = {
            job_merchant_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            colony_type = col_habitat_trade
            owner = {
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_clerk_add = -1
        }
    }
    triggered_planet_modifier = {
        potential = {
            colony_type = col_habitat_trade
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_manager_add = -1
        }
    }
    triggered_planet_modifier = {
        potential = {
            colony_type = col_habitat_trade
        }
        modifier = {
            job_merchant_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                OR = {
                    has_valid_civic = civic_merchant_guilds
                    has_valid_civic = civic_corporate_dominion
                    is_megacorp = yes
                }
            }
        }
        modifier = {
            job_clerk_add = -1
            job_merchant_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            has_planet_flag = commercial_habitat
        }
        modifier = {
            trade_value_mult = 0.05
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_clerk_add = 2
            job_bugged_trader_add = 1
        }
    }
    triggered_desc = {
        text = job_clerk_effect_desc
        trigger = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = no
            }
        }
    }
    triggered_desc = {
        text = job_bugged_trader_effect_desc
    }
    triggered_desc = {
        text = job_manager_effect_desc
        trigger = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
    }
    triggered_desc = {
        text = job_merchant_effect_desc
        trigger = {
            OR = {
                colony_type = col_habitat_trade
                AND = {
                    exists = owner
                    owner = {
                        OR = {
                            has_active_tradition = tr_mercantile_commercial_enterprise
                            has_valid_civic = civic_merchant_guilds
                            has_valid_civic = civic_corporate_dominion
                            is_megacorp = yes
                        }
                    }
                }
            }
        }
    }
    ai_resource_production = {
        consumer_goods = 1
        trigger = {
            always = yes
        }
    }
}

### Shattered Ring World ###

# Shattered Ring World Commercial - Merge between Bug Branch, PD, and Enhanced Districts
district_srw_commercial = {
    base_buildtime = 240
    is_capped_by_modifier = no
    min_for_deposits_on_planet = 3
    max_for_deposits_on_planet = 15
    show_on_uncolonized = {
        exists = from
        from = {
            is_regular_empire = yes
        }
        uses_district_set = shattered_ring_world
    }
    potential = {
        exists = owner
        owner = {
            is_regular_empire = yes
        }
        uses_district_set = shattered_ring_world
    }
    allow = {
        NOT = {
            has_modifier = resort_colony
        }
    }
    conversion_ratio = 1
    convert_to = {
        district_generator_uncapped
        district_rw_commercial
    }
    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        upkeep = {
            energy = 1
        }
    }
    planet_modifier = {
        planet_housing_add = 2
        job_clerk_add = 1
        job_artisan_add = 1
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_crafter_empire = yes
            }
        }
        modifier = {
            job_artisan_add = -1
            job_artificer_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_clerk_add = -1
            job_manager_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            colony_type = col_srw_trade
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_clerk_add = -1
            job_merchant_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            colony_type = col_srw_trade
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_manager_add = -1
            job_merchant_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_active_tradition = tr_prosperity_interstellar_franchising
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_clerk_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_active_tradition = tr_prosperity_interstellar_franchising
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_manager_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_clerk_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            colony_type = col_srw_trade
            exists = owner
            owner = {
                OR = {
                    has_valid_civic = civic_merchant_guilds
                    has_valid_civic = civic_corporate_dominion
                    is_megacorp = yes
                }
                has_active_tradition = tr_prosperity_interstellar_franchising
                has_active_tradition = tr_mercantile_commercial_enterprise
            }
        }
        modifier = {
            job_clerk_add = -1
            job_merchant_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        modifier = {
            job_artisan_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_crafter_empire = yes
            }
        }
        modifier = {
            job_artificer_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_manager_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_active_tradition = tr_mercantile_commercial_enterprise
            }
        }
        modifier = {
            job_merchant_add = 1
        }
    }
    triggered_desc = {
        text = job_clerk_effect_desc
        trigger = {
            OR = {
                NOT = {
                    exists = owner
                }
                owner = {
                    is_fallen_empire_spiritualist = no
                }
            }
            OR = {
                NOT = {
                    colony_type = col_srw_trade
                }
                AND = {
                    exists = owner
                    owner = {
                        has_active_tradition = tr_prosperity_interstellar_franchising
                        NOT = {
                            has_active_tradition = tr_mercantile_commercial_enterprise
                        }
                    }
                }
            }
        }
    }
    triggered_desc = {
        text = job_merchant_effect_desc
        trigger = {
            OR = {
                colony_type = col_srw_trade
                AND = {
                    exists = owner
                    owner = {
                        has_active_tradition = tr_mercantile_commercial_enterprise
                    }
                }
            }
        }
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        text = job_artisan_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
            }
        }
        text = job_artificer_effect_desc
    }
    ai_resource_production = {
        energy = 1
        trigger = {
            always = yes
        }
    }
    triggered_desc = {
        text = job_manager_effect_desc
        trigger = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
    }
}

##################################################
## Farming District [Vanilla] - StarTech AI, Plentiful Traditions, Simple Traditions, Planetary Diversity, Ethics & Civics: Bug Branch
##################################################
district_farming = {
    base_buildtime = 240
    min_for_deposits_on_planet = 3
    max_for_deposits_on_planet = 15
    show_on_uncolonized = {
        uses_district_set = standard
    }
    potential = {
        uses_district_set = standard
        OR = {
            NOT = {
                exists = owner
            }
            NOT = {
                owner = {
                    is_anglers_empire = yes
                }
            }
            AND = {
                owner = {
                    is_anglers_empire = yes
                }
                NOT = {
                    OR = {
                        is_planet_class = pc_ocean
                        is_planet_class = pc_aquatic
                        is_planet_class = pc_reef
                        is_planet_class = pc_desertislands
                        is_planet_class = pc_subarctic
                        is_planet_class = pc_storm
                    }
                }
                }
            }
        NOT = {
            AND = {
                exists = owner
                owner = {
                    is_ai = yes
                    NOT = {
                        has_country_flag = str_recently_human
                    }
                    country_uses_food = no
                }
            }
        }
    }
    allow = {
        NOT = {
            has_modifier = resort_colony
        }
        str_food_district_allow = yes
    }
    conversion_ratio = 1
    convert_to = {
        district_farming_uncapped
    }
    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        cost = {
            trigger = {
                AND = {
                    exists = owner
                    owner = {
                        is_anglers_empire = yes
                    }
                    planet = {
                        has_climate = wet
                    }
                }
            }
            minerals = -50
        }
        upkeep = {
            energy = 1
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    is_bugged_government_intervention = yes
                }
            }
            energy = 0.15
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_ai = yes
            }
            str_force_district_farming = yes
        }
        modifier = {
            job_starnet_spice_melange_farmer_add = 1
            job_starnet_spice_melange_antifarmer_add = -1
        }
    }
    planet_modifier = {
        planet_housing_add = 2
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_agrarian_idyll = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            planet_max_buildings_add = 0.25
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_housing_agrarian_idyll
                is_bugged_agrarian_idyll = yes
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            job_agri_drone_add = 3
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            job_agri_drone_add = 2
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
                NAND = {
                    is_anglers_empire = yes
                    PREV = {
                        planet = {
                            is_wet = yes
                        }
                    }
                }
            }
        }
        modifier = {
            job_farmer_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_fe_acolyte_farm_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_anglers_empire = yes
            }
            planet = {
                is_wet = yes
            }
        }
        modifier = {
            job_angler_add = 1
            job_pearl_diver_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_government_intervention = yes
                NOR = {
                    has_valid_civic = civic_anglers
                    has_valid_civic = civic_corporate_anglers
                }
            }
        }
        modifier = {
            job_farmer_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_government_intervention = yes
                OR = {
                    has_valid_civic = civic_anglers
                    has_valid_civic = civic_corporate_anglers
                }
            }
        }
        modifier = {
            job_angler_add = 1
        }
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        text = job_agri_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
                NAND = {
                    is_anglers_empire = yes
                    PREV = {
                        planet = {
                            is_wet = yes
                        }
                    }
                }
            }
        }
        text = job_farmer_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        text = job_fe_acolyte_farm_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_anglers_empire = yes
            }
            planet = {
                is_wet = yes
            }
        }
        text = job_aqu_angler_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_anglers_empire = yes
            }
            planet = {
                is_wet = yes
            }
        }
        text = job_pearl_diver_effect_desc
    }
    prerequisites = {
        tech_industrial_farming
    }
    destroy_trigger = {
        exists = owner
        AND = {
            owner = {
                is_ai = yes
            }
            owner = {
                country_uses_food = no
            }
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_biogenesis_finish
            }
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_agri_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_biogenesis_finish
            }
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_agri_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_biogenesis_finish
            }
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            planet_housing_add = 1
            job_farmer_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_biogenesis_finish
            }
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_fe_acolyte_farm_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_industry_compact_extraction_centers
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    ai_resource_production = {
        food = 3
        trigger = {
            always = yes
        }
    }
    ai_resource_production = {
        food = 1
        trigger = {
            nor = {
                has_designation = col_factory
                has_designation = col_foundry
            }
        }
    }
    ai_resource_production = {
        food = 2
        trigger = {
            has_designation = col_farming
        }
    }
}

##################################################
## Farming District (Uncapped) [Vanilla] - StarTech AI, Plentiful Traditions, Simple Traditions, Planetary Diversity, Ethics & Civics: Bug Branch
##################################################
district_farming_uncapped = {
    base_buildtime = 240
    icon = district_farming
    is_capped_by_modifier = no
    show_on_uncolonized = {
        OR = {
            uses_district_set = hive_world
            uses_district_set = shattered_ring_world
            has_modifier = living_planet
        }
    }
    potential = {
        OR = {
            uses_district_set = hive_world
            uses_district_set = shattered_ring_world
            AND = {
                exists = owner
                owner = {
                    is_anglers_empire = yes
                }
                planet = {
                    OR = {
                        is_planet_class = pc_ocean
                        is_planet_class = pc_aquatic
                        is_planet_class = pc_reef
                        is_planet_class = pc_desertislands
                        is_planet_class = pc_subarctic
                        is_planet_class = pc_storm
                    }
                }
            }
        }
        NOT = {
            AND = {
                owner = {
                    is_ai = yes
                }
                owner = {
                    country_uses_food = no
                }
            }
        }
    }
    allow = {
        NOT = {
            has_modifier = resort_colony
        }
        str_food_district_allow = yes
    }
    conversion_ratio = 1
    convert_to = {
        district_farming
        district_rw_farming
    }
    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        cost = {
            trigger = {
                AND = {
                    exists = owner
                    owner = {
                        is_anglers_empire = yes
                    }
                    planet = {
                        OR = {
                            is_planet_class = pc_ocean
                            is_planet_class = pc_aquatic
                            is_planet_class = pc_reef
                            is_planet_class = pc_desertislands
                            is_planet_class = pc_subarctic
                            is_planet_class = pc_storm
                        }
                    }
                }
            }
            minerals = -50
        }
        upkeep = {
            energy = 1
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    is_bugged_government_intervention = yes
                }
            }
            energy = 0.15
        }
    }
    planet_modifier = {
        planet_housing_add = 2
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_agrarian_idyll = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            planet_max_buildings_add = 0.25
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_housing_agrarian_idyll
                is_bugged_agrarian_idyll = yes
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            job_agri_drone_add = 3
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            job_agri_drone_add = 2
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
                NAND = {
                    is_anglers_empire = yes
                    PREV = {
                        planet = {
                            is_wet = yes
                        }
                    }
                }
            }
        }
        modifier = {
            job_farmer_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_fe_acolyte_farm_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_anglers_empire = yes
            }
            planet = {
                is_wet = yes
            }
        }
        modifier = {
            job_angler_add = 1
            job_pearl_diver_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_government_intervention = yes
            }
        }
        modifier = {
            job_farmer_add = 1
        }
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        text = job_agri_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
                NAND = {
                    is_anglers_empire = yes
                    PREV = {
                        planet = {
                            is_wet = yes
                        }
                    }
                }
            }
        }
        text = job_farmer_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        text = job_fe_acolyte_farm_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_anglers_empire = yes
            }
            planet = {
                is_wet = yes
            }
        }
        text = job_aqu_angler_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_anglers_empire = yes
            }
            planet = {
                is_wet = yes
            }
        }
        text = job_pearl_diver_effect_desc
    }
    destroy_trigger = {
        exists = owner
        AND = {
            owner = {
                is_ai = yes
            }
            owner = {
                country_uses_food = no
            }
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_biogenesis_finish
            }
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_agri_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_biogenesis_finish
            }
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_agri_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_biogenesis_finish
            }
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            planet_housing_add = 1
            job_farmer_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_biogenesis_finish
            }
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_fe_acolyte_farm_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_industry_compact_extraction_centers
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
}

##################################################
## Generator District [Vanilla] - StarTech AI, Plentiful Traditions, Simple Traditions, Planetary Diversity, Ethics & Civics: Bug Branch
##################################################
district_generator = {
    base_buildtime = 240
    min_for_deposits_on_planet = 3
    max_for_deposits_on_planet = 15
    show_on_uncolonized = {
        uses_district_set = standard
    }
    potential = {
        uses_district_set = standard
        NOT = {
            has_modifier = living_planet
        }
    }
    allow = {
        NOT = {
            has_modifier = resort_colony
        }
    }
    conversion_ratio = 1
    convert_to = {
        district_generator_uncapped
    }
    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        upkeep = {
            energy = 1
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    is_bugged_government_intervention = yes
                }
            }
            energy = 0.15
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_ai = yes
            }
            str_force_district_generator = yes
        }
        modifier = {
            job_starnet_spice_melange_farmer_add = 1
            job_starnet_spice_melange_antifarmer_add = -1
        }
    }
    planet_modifier = {
        planet_housing_add = 2
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_agrarian_idyll
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            job_technician_drone_add = 3
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            job_technician_drone_add = 2
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_technician_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_fe_acolyte_generator_add = 2
        }
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        text = job_technician_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        text = job_technician_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        text = job_fe_acolyte_generator_effect_desc
    }
    prerequisites = {
        tech_power_plant_1
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_government_intervention = yes
            }
        }
        modifier = {
            job_technician_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_policy_flag = economic_stance_bugged_free_market
            }
        }
        modifier = {
            job_technician_add = -1
            job_bugged_trader_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_industry_compact_extraction_centers
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_kleptocracy_finish
            }
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_technician_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_kleptocracy_finish
            }
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_technician_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_kleptocracy_finish
            }
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            planet_housing_add = 1
            job_technician_add = 1
        }
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                has_policy_flag = economic_stance_bugged_free_market
            }
        }
        text = job_bugged_trader_effect_desc
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_kleptocracy_finish
            }
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_fe_acolyte_generator_add = 1
        }
    }
    ai_resource_production = {
        energy = 3
        trigger = {
            always = yes
        }
    }
    ai_resource_production = {
        energy = 1
        trigger = {
            nor = {
                has_designation = col_factory
                has_designation = col_foundry
            }
        }
    }
    ai_resource_production = {
        energy = 2
        trigger = {
            has_designation = col_generator
        }
    }
}

##################################################
## Generator District (Uncapped) [Vanilla] - StarTech AI, Plentiful Traditions, Simple Traditions, Planetary Diversity, Ethics & Civics: Bug Branch
##################################################
district_generator_uncapped = {
    base_buildtime = 240
    icon = district_generator
    is_capped_by_modifier = no
    show_on_uncolonized = {
        OR = {
            uses_district_set = hive_world
            uses_district_set = machine_world
            AND = {
                exists = from
                from = {
                    OR = {
                        is_gestalt = yes
                        is_fallen_empire = yes
                    }
                }
                uses_district_set = shattered_ring_world
            }
            has_modifier = living_planet
        }
    }
    potential = {
        OR = {
            uses_district_set = hive_world
            uses_district_set = machine_world
            AND = {
                exists = owner
                owner = {
                    OR = {
                        is_gestalt = yes
                        is_fallen_empire = yes
                    }
                }
                uses_district_set = shattered_ring_world
            }
            has_modifier = living_planet
        }
    }
    allow = {
        NOT = {
            has_modifier = resort_colony
        }
    }
    conversion_ratio = 1
    convert_to = {
        district_generator
        district_rw_generator
        district_srw_commercial
    }
    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        upkeep = {
            energy = 1
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    is_bugged_government_intervention = yes
                }
            }
            energy = 0.15
        }
    }
    planet_modifier = {
        planet_housing_add = 2
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_agrarian_idyll = yes
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            job_technician_drone_add = 3
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            job_technician_drone_add = 2
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_technician_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_fe_acolyte_generator_add = 2
        }
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        text = job_technician_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        text = job_technician_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        text = job_fe_acolyte_generator_effect_desc
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_kleptocracy_finish
            }
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_technician_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_industry_compact_extraction_centers
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_kleptocracy_finish
            }
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_technician_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_kleptocracy_finish
            }
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            planet_housing_add = 1
            job_technician_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_kleptocracy_finish
            }
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_fe_acolyte_generator_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_government_intervention = yes
            }
        }
        modifier = {
            job_technician_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_policy_flag = economic_stance_bugged_free_market
            }
        }
        modifier = {
            job_technician_add = -1
            job_bugged_trader_add = 1
        }
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                has_policy_flag = economic_stance_bugged_free_market
            }
        }
        text = job_bugged_trader_effect_desc
    }
    ai_resource_production = {
        energy = 5
        trigger = {
            always = yes
        }
    }
}

##################################################
## Hive District [Vanilla] - StarTech AI, Expanded Gestalts, Planetary Diversity, Ethics & Civics: Bug Branch, AA's Hostile Worlds
##################################################
district_hive = {
    base_buildtime = 480
    is_capped_by_modifier = no
    exempt_from_ai_planet_specialization = yes
    show_on_uncolonized = {
        from = {
            is_hive_empire = yes
        }
        OR = {
            uses_district_set = hostile # AA's Hostile Worlds
            uses_district_set = standard
            uses_district_set = hive_world
            uses_district_set = pdbioforge
            uses_district_set = pdbiofort
            uses_district_set = pdfloraforge
            uses_district_set = pdflorafort
            uses_district_set = machine_world
            uses_district_set = shattered_ring_world
        }
    }
    potential = {
        exists = owner
        owner = {
            is_hive_empire = yes
        }
        OR = {
            uses_district_set = hostile ## AA's Hostile Worlds
            uses_district_set = standard
            uses_district_set = hive_world
            uses_district_set = pdbioforge
            uses_district_set = pdbiofort
            uses_district_set = pdfloraforge
            uses_district_set = pdflorafort
            uses_district_set = machine_world
            uses_district_set = shattered_ring_world
        }
    }
    allow = {
        NOT = {
            has_modifier = resort_colony
        }
        str_city_district_allow = yes
    }
    conversion_ratio = 1
    convert_to = {
        district_arcology_housing
        district_rw_hive
        district_nexus
        district_city
    }
    resources = {
        category = planet_districts_cities
        cost = {
            minerals = @city_cost
        }
        upkeep = {
            energy = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_ai = yes
            }
            str_force_city_district = yes
        }
        modifier = {
            job_starnet_spice_melange_farmer_add = 1
            job_starnet_spice_melange_antifarmer_add = -1
        }
    }
    planet_modifier = {
        planet_housing_add = 6
        job_maintenance_drone_add = 3
        planet_max_buildings_add = 1
    }
    triggered_planet_modifier = {
        potential = {
            OR = {
                is_planet_class = pc_hive
                is_planet_class = pc_bioforge
                is_planet_class = pc_biofort
                is_planet_class = pc_megaflorafort
                is_planet_class = pc_megafloraforge
            }
        }
        modifier = {
            planet_housing_add = 6
            job_maintenance_drone_add = 3
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_housing_1
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_housing_2
            }
        }
        modifier = {
            planet_housing_add = 1
            job_maintenance_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_active_tradition = tr_prosperity_extended_hives
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    ai_resource_production = {
        alloys = 10
        trigger = {
            str_force_city_district = yes
        }
    }
    ai_resource_production = {
        energy = 10
        trigger = {
            str_force_city_district = yes
        }
    }
}

##################################################
## Industrial District [Vanilla] - StarTech AI, Plentiful Traditions, Expanded Gestalts, Planetary Diversity, Ethics & Civics: Bug Branch, AA's Hostile Worlds
##################################################
district_industrial = {
    base_buildtime = 480
    is_capped_by_modifier = no
    prerequisites = {
        tech_basic_industry
    }
    show_on_uncolonized = {
        exists = from
        or = {
            uses_district_industrial = yes
            is_planet_class = pc_barren_habitable
        }
    }
    potential = {
        exists = owner
        or = {
            uses_district_industrial = yes
            is_planet_class = pc_barren_habitable
        }
    }
    allow = {
        NOT = {
            has_modifier = resort_colony
        }
        NOT = {
            has_modifier = slave_colony
        }
        str_industrial_district_allow = yes
    }
    conversion_ratio = 1
    convert_to = {
        district_arcology_arms_industry
        district_subterranean_network
        district_rw_industrial
        district_corp_industrial
        district_bioforge_stomach
        district_mf_alloy
    }
    resources = {
        category = planet_districts_industrial
        cost = {
            minerals = @city_cost
        }
        upkeep = {
            energy = 2
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    has_edict = industrial_maintenance
                }
            }
            energy = 2
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    has_valid_civic = civic_shared_burden
                }
            }
            energy = 0.5
        }
    }
    planet_modifier = {
        planet_housing_add = 2
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_crafter_empire = yes
            }
        }
        modifier = {
            planet_max_buildings_add = 0.34
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_ai = yes
            }
            str_force_district_industrial = yes
        }
        modifier = {
            job_starnet_spice_melange_farmer_add = 1
            job_starnet_spice_melange_antifarmer_add = -1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                or = {
                    has_valid_civic = civic_shared_burden
                }
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        modifier = {
            job_artisan_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_crafter_empire = yes
            }
        }
        modifier = {
            job_artificer_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_foundry_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_technician_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_hive_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_alloy_drone_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_fabricator_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_drone_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            has_designation = col_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        modifier = {
            job_artisan_add = -1
        }
    }
    triggered_planet_modifier = {
        potential = {
            has_designation = col_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
            }
        }
        modifier = {
            job_artificer_add = -1
        }
    }
    triggered_planet_modifier = {
        potential = {
            has_designation = col_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_foundry_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            has_designation = col_foundry
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_technician_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            has_designation = col_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        modifier = {
            job_artisan_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            has_designation = col_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
            }
        }
        modifier = {
            job_artificer_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            has_designation = col_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_foundry_add = -1
        }
    }
    triggered_planet_modifier = {
        potential = {
            has_designation = col_factory
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_catalytic_technician_add = -1
        }
    }
    triggered_planet_modifier = {
        potential = {
            OR = {
                has_designation = col_factory
                has_designation = col_mac_factory
            }
            exists = owner
            owner = {
                is_machine_empire = yes
                country_uses_consumer_goods = yes
                is_catalytic_empire = no
            }
        }
        modifier = {
            job_artisan_drone_add = 1
            job_fabricator_add = -1
        }
    }
    triggered_planet_modifier = {
        potential = {
            OR = {
                has_designation = col_factory
                has_designation = col_mac_factory
            }
            exists = owner
            owner = {
                is_machine_empire = yes
                country_uses_consumer_goods = yes
                is_catalytic_empire = yes
            }
        }
        modifier = {
            job_artisan_drone_add = 1
            job_catalytic_drone_add = -1
        }
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = no
            }
        }
        text = job_artisan_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_crafter_empire = yes
            }
        }
        text = job_artificer_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                country_uses_consumer_goods = yes
            }
        }
        text = job_artisan_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_foundry_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_regular_empire = yes
                is_catalytic_empire = yes
            }
        }
        text = job_catalytic_technician_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_fabricator_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_hive_empire = yes
                is_catalytic_empire = no
            }
        }
        text = job_alloy_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = yes
                is_catalytic_empire = yes
            }
        }
        text = job_catalytic_drone_effect_desc
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_edict = industrial_maintenance
            }
        }
        modifier = {
            job_maintenance_drone_add = 1
        }
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
                has_edict = industrial_maintenance
            }
        }
        text = job_maintenance_drone_effect_desc
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_affinity_finish
            }
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_alloy_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_affinity_finish
            }
            owner = {
                is_machine_empire = yes
            }
            owner = {
                country_uses_consumer_goods = no
            }
        }
        modifier = {
            planet_housing_add = 1
            job_fabricator_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_affinity_finish
            }
            owner = {
                is_machine_empire = yes
            }
            owner = {
                country_uses_consumer_goods = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_artisan_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_affinity_finish
            }
            owner = {
                is_regular_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_artisan_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_industry_3
            }
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_alloy_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_industry_3
            }
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_fabricator_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_industry_3
            }
            owner = {
                is_regular_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_foundry_add = 1
        }
    }
    ai_resource_production = {
        alloys = 3
        trigger = {
            planet = {
                str_is_col_factory = no
            }
        }
    }
    ai_resource_production = {
        alloys = 5
        trigger = {
            planet = {
                str_is_col_foundry = yes
            }
        }
    }
    ai_resource_production = {
        consumer_goods = 3
        trigger = {
            planet = {
                str_is_col_foundry = no
            }
            owner = {
                country_uses_consumer_goods = yes
            }
        }
    }
    ai_resource_production = {
        consumer_goods = 5
        trigger = {
            planet = {
                str_is_col_factory = yes
            }
            owner = {
                country_uses_consumer_goods = yes
            }
        }
    }
}

##################################################
## Mining District [Vanilla] - StarTech AI, Plentiful Traditions, Simple Traditions, Planetary Diversity, Ethics & Civics: Bug Branch
##################################################
district_mining = {
    base_buildtime = 240
    min_for_deposits_on_planet = 1
    max_for_deposits_on_planet = 15
    show_on_uncolonized = {
        uses_district_set = standard
        NAND = {
            exists = from
            from = {
                is_subterranean_empire = yes
            }
        }
    }
    potential = {
        uses_district_set = standard
        NAND = {
            exists = owner
            owner = {
                is_subterranean_empire = yes
            }
        }
    }
    allow = {
        NOT = {
            has_modifier = resort_colony
        }
        str_mineral_district_allow = yes
    }
    conversion_ratio = 1
    convert_to = {
        district_mining_uncapped
    }
    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        upkeep = {
            energy = 1
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    is_bugged_government_intervention = yes
                }
            }
            energy = 0.15
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    has_valid_civic = civic_mining_guilds
                }
            }
            energy = 0.2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_ai = yes
            }
            str_force_district_mining = yes
        }
        modifier = {
            job_starnet_spice_melange_farmer_add = 1
            job_starnet_spice_melange_antifarmer_add = -1
        }
    }
    planet_modifier = {
        planet_housing_add = 2
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_agrarian_idyll = yes
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            job_mining_drone_add = 3
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            job_mining_drone_add = 2
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_miner_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_fe_acolyte_mine_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_industry_3
            }
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_mining_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_industry_3
            }
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_mining_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_industry_3
            }
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            planet_housing_add = 1
            job_miner_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_industry_3
            }
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_fe_acolyte_mine_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_mining_civic = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_miner_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_government_intervention = yes
            }
        }
        modifier = {
            job_miner_add = 1
        }
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        text = job_mining_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        text = job_miner_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        text = job_fe_acolyte_mine_effect_desc
    }
    prerequisites = {
        tech_mechanized_mining
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_industry_compact_extraction_centers
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    ai_resource_production = {
        minerals = 4
        trigger = {
            always = yes
        }
    }
    ai_resource_production = {
        minerals = 1
        trigger = {
            nor = {
                has_designation = col_factory
                has_designation = col_foundry
            }
        }
    }
    ai_resource_production = {
        minerals = 2
        trigger = {
            has_designation = col_mining
        }
    }
}

##################################################
## Mining District (Uncapped) [Vanilla] - StarTech AI, Plentiful Traditions, Simple Traditions, Planetary Diversity, Ethics & Civics: Bug Branch
##################################################
district_mining_uncapped = {
    base_buildtime = 240
    icon = district_mining
    is_capped_by_modifier = no
    desc = {
        trigger = {
            NOT = {
                uses_district_set = shattered_ring_world
            }
        }
        text = district_mining_uncapped_desc
    }
    desc = {
        trigger = {
            uses_district_set = shattered_ring_world
            NOT = {
                owner = {
                    is_subterranean_empire = yes
                }
            }
        }
        text = district_srw_mining_desc
    }
    show_on_uncolonized = {
        OR = {
            uses_district_set = hive_world
            uses_district_set = machine_world
            uses_district_set = shattered_ring_world
            has_modifier = living_planet
            AND = {
                exists = from
                from = {
                    is_subterranean_empire = yes
                }
                uses_district_set = standard
            }
        }
    }
    potential = {
        OR = {
            uses_district_set = hive_world
            uses_district_set = machine_world
            uses_district_set = shattered_ring_world
            AND = {
                exists = owner
                owner = {
                    is_subterranean_empire = yes
                }
                uses_district_set = standard
            }
        }
    }
    allow = {
        NOT = {
            has_modifier = resort_colony
        }
        str_mineral_district_allow = yes
    }
    conversion_ratio = 1
    convert_to = {
        district_mining
    }
    resources = {
        category = planet_districts
        cost = {
            minerals = @base_cost
        }
        upkeep = {
            energy = 1
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    is_bugged_government_intervention = yes
                }
            }
            energy = 0.15
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    has_valid_civic = civic_mining_guilds
                }
            }
            energy = 0.2
        }
    }
    planet_modifier = {
        planet_housing_add = 2
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_agrarian_idyll = yes
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            NOT = {
                uses_district_set = shattered_ring_world
            }
            exists = owner
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            job_mining_drone_add = 3
        }
    }
    triggered_planet_modifier = {
        potential = {
            NOT = {
                uses_district_set = shattered_ring_world
            }
            exists = owner
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            job_mining_drone_add = 2
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            NOT = {
                uses_district_set = shattered_ring_world
            }
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            job_miner_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            NOT = {
                uses_district_set = shattered_ring_world
            }
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            job_fe_acolyte_mine_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            uses_district_set = shattered_ring_world
            exists = owner
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            job_scrap_miner_drone_add = 3
        }
    }
    triggered_planet_modifier = {
        potential = {
            uses_district_set = shattered_ring_world
            exists = owner
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            job_scrap_miner_drone_add = 2
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            uses_district_set = shattered_ring_world
            exists = owner
            owner = {
                is_gestalt = no
            }
        }
        modifier = {
            job_scrap_miner_add = 2
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_origin = origin_subterranean
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_origin = origin_subterranean
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_origin = origin_subterranean
            }
        }
        modifier = {
            planet_max_buildings_add = 0.34
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_mining_civic = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_miner_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_bugged_government_intervention = yes
            }
        }
        modifier = {
            job_miner_add = 1
        }
    }
    triggered_desc = {
        trigger = {
            NOT = {
                uses_district_set = shattered_ring_world
            }
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        text = job_mining_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            exists = owner
            NOT = {
                uses_district_set = shattered_ring_world
            }
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        text = job_miner_effect_desc
    }
    triggered_desc = {
        trigger = {
            uses_district_set = shattered_ring_world
            exists = owner
            owner = {
                is_gestalt = yes
            }
            NOT = {
                owner = {
                    has_origin = origin_subterranean
                }
            }
        }
        text = job_scrap_miner_drone_effect_desc
    }
    triggered_desc = {
        trigger = {
            uses_district_set = shattered_ring_world
            exists = owner
            owner = {
                is_regular_empire = yes
            }
            NOT = {
                owner = {
                    has_origin = origin_subterranean
                }
            }
        }
        text = job_scrap_miner_effect_desc
    }
    triggered_desc = {
        trigger = {
            NOT = {
                uses_district_set = shattered_ring_world
            }
            exists = owner
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        text = job_fe_acolyte_mine_effect_desc
    }
    prerequisites = {
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_industry_3
            }
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_mining_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_industry_3
            }
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_mining_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_industry_3
            }
            owner = {
                is_gestalt = no
                is_fallen_empire_spiritualist = no
            }
        }
        modifier = {
            planet_housing_add = 1
            job_miner_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_industry_compact_extraction_centers
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_tradition = tr_plentiful_industry_3
            }
            owner = {
                is_fallen_empire_spiritualist = yes
            }
        }
        modifier = {
            planet_housing_add = 1
            job_fe_acolyte_mine_add = 1
        }
    }
    ai_resource_production = {
        minerals = 5
        trigger = {
            always = yes
        }
    }
}

##################################################
## Nexus District [Vanilla] - StarTech AI, Expanded Gestalts, Planetary Diversity, Ethics & Civics: Bug Branch, AA's Hostile Worlds
##################################################
district_nexus = {
    base_buildtime = 480
    is_capped_by_modifier = no
    exempt_from_ai_planet_specialization = yes
    show_on_uncolonized = {
        from = {
            is_machine_empire = yes
        }
        OR = {
            uses_district_set = hostile # AA's Hostile Worlds
            uses_district_set = standard
            uses_district_set = hive_world
            uses_district_set = machine_world
            uses_district_set = shattered_ring_world
            uses_district_set = pdmachinefactory
            uses_district_set = pdmachinefort
        }
    }
    potential = {
        exists = owner
        owner = {
            is_machine_empire = yes
        }
        OR = {
            uses_district_set = hostile # AA's Hostile Worlds
            uses_district_set = standard
            uses_district_set = hive_world
            uses_district_set = machine_world
            uses_district_set = shattered_ring_world
            uses_district_set = pdmachinefactory
            uses_district_set = pdmachinefort
        }
    }
    allow = {
        NOT = {
            has_modifier = resort_colony
        }
        str_nexus_district_allow = yes
        OR = {
            NOT = {
                exists = owner
            }
            AND = {
                exists = owner
                OR = {
                    owner = {
                        is_ai = no
                    }
                    AND = {
                        num_districts = {
                            type = district_nexus
                            value < 3
                        }
                    }
                    AND = {
                        num_districts = {
                            type = district_nexus
                            value < 6
                        }
                        is_capital = yes
                    }
                }
            }
        }
    }
    conversion_ratio = 1
    convert_to = {
        district_arcology_housing
        district_rw_nexus
        district_city
        district_hive
    }
    resources = {
        category = planet_districts_cities
        cost = {
            minerals = @city_cost
        }
        upkeep = {
            energy = 2
        }
    }
    planet_modifier = {
        planet_housing_add = 5
        job_maintenance_drone_add = 3
        planet_max_buildings_add = 1
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_housing_1
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_technology = tech_housing_2
            }
        }
        modifier = {
            planet_housing_add = 1
            job_maintenance_drone_add = 1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_active_tradition = tr_prosperity_optimized_nexus
            }
        }
        modifier = {
            planet_housing_add = 1
        }
    }
}