##########################################################################
# Limitless Stellaris - Solar System Initializers
##########################################################################

## Vanilla Variables
@distance = 50
@base_moon_distance = 10

## Real Space Variables
@jumps = 3

## AOT Variables
@dm_hab_size_lvl1 = 5
@dm_hab_size_lvl2 = 8
@dm_hab_size_lvl3 = 11

##################################################
## Enclaves
##################################################

## Curator I
# Merge between Real Space, ACOT
guardians_curator_init_01 = {
	class = "rl_standard_stars"
	usage = misc_system_init
	
	usage_odds = {
		base = 0
		modifier = {
			OR = {
				has_leviathans = yes
				has_distar = yes
			}
			add = 100
		}
		modifier = {
			factor = 0
			is_fe_cluster = yes
		}
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
	}

	max_instances = 1
	#spawn_chance = 100
	#sigma (2) always spawns
	scaled_spawn_chance = 12	# scales by galaxy size (1000 stars = 10x base)
	
	flags = { guardians_curators_system enclave }
	
	planet = {
		class = star
		orbit_distance = 0
		size = { min = @standard_min max = @standard_max }

		init_effect = {
			if = {
				limit = {
					NOT = { exists = event_target:curator_enclave_country }
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_1
					}
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_2
					}
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_3
					}
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_4
					}
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_5
					}
					#homeworld = this
				}
				create_country = {
					name = "NAME_Curator_Order"
					adjective = "NAME_Curator_adj"
					type = enclave
					authority = "auth_oligarchic"
					civics = {
						civic = civic_ancient_preservers
					}
					origin = "origin_default"
					species = last_created_species
					flag = {
						icon = {
							category = "enclaves"
							file = "enclaves_flag_curator.dds"
						}
						background= {
							category = "backgrounds"
							file = "vertical.dds"
						}
						colors={
							"blue"
							"dark_blue"
							"null"
							"null"
						}
					}
					ethos = {
						ethic = ethic_fanatic_materialist
						ethic = ethic_pacifist
					}
					ignore_initial_colony_error = yes
				}
				last_created_country = {
					set_country_flag = curator_enclave_country
					set_graphical_culture = fallen_empire_02
					save_global_event_target_as = curator_enclave_country
					create_fleet = {
						name = "NAME_Curator_Alpha_Enclave"
						settings = {  }
						effect = {
							set_owner = prev
							create_ship = {
								name = random
								design = "NAME_Curator_Enclave_Station"
								graphical_culture = prev
							}
							set_location = {
								target = prevprev
								angle = 60
								distance = 100
							}
							save_event_target_as = CustomCapital
							prev = {
								set_custom_capital_location = event_target:CustomCapital
							}
						}
					}
					create_leader = {
						class = scientist
						species = this
						name = random
						skill = 10
					}
					set_leader = last_created_leader
					create_fleet = {
						name = "NAME_Curator_Guard_Fleet"
						settings = { 
							garrison = yes
						}
						effect = {
							set_owner = prev
							while = {
								count = 8
								create_ship = {
									name = random
									design = "NAME_CURATOR_ESCORT"
									graphical_culture = prev
								}
							}
							while = {
								count = 2
								create_ship = {
									name = random
									design = "NAME_CURATOR_BC"
									graphical_culture = prev
								}
							}
							set_location = {
								target = prevprev
								angle = 60
								distance = 120
							}
							prev = {
							}
						}
					}
					create_fleet = {
						name = "NAME_Curator_Oracle_Fleet"
						settings = { 
							garrison = yes
						}
						effect = {
							set_owner = prev
							create_ship = {
								name = random
								design = "NAME_CURATOR_ORACLE"
								graphical_culture = prev
							}
							set_location = {
								target = prevprev
								angle = 70
								distance = 80
							}
							prev = {
							}
						}
					}
				}
				solar_system = {
					save_global_event_target_as = curator_enclave_system
				}
				else = {
					event_target:curator_enclave_country = {
						create_fleet = {
							name = "NAME_Curator_Alpha_Enclave"
							settings = {  }
							effect = {
								set_owner = prev
								create_ship = {
									name = random
									design = "NAME_Curator_Enclave_Station"
									graphical_culture = prev
								}
								set_location = {
									target = prevprev
									angle = 90
									distance = 100
								}
								save_event_target_as = CustomCapital
								prev = {
									set_custom_capital_location = event_target:CustomCapital
								}	
							}
						}
						create_fleet = {
							name = "NAME_Curator_Guard_Fleet"
							settings = { 
								garrison = yes
							}
							effect = {
								set_owner = prev
								while = {
									count = 8
									create_ship = {
										name = random
										design = "NAME_CURATOR_ESCORT"
										graphical_culture = prev
									}
								}
								while = {
									count = 2
									create_ship = {
										name = random
										design = "NAME_CURATOR_BC"
										graphical_culture = prev
									}
								}
								set_location = {
									target = prevprev
									angle = 100
									distance = 120
								}
								prev = {
								}
							}
						}
						create_fleet = {
							name = "NAME_Curator_Oracle_Fleet"
							settings = { 
								garrison = yes
							}
							effect = {
								set_owner = prev
								create_ship = {
									name = random
									design = "NAME_CURATOR_ORACLE"
									graphical_culture = prev
								}
								set_location = {
									target = prevprev
									angle = 80
									distance = 80
								}
								prev = {
								}
							}
						}
					}
				}
			}
		}
	}
	
	change_orbit = 60

	planet = { # Real Space
		count = 1
		orbit_distance = { min = 20 max = 30 }
		class = "rl_unhabitable_planets"
		orbit_angle = { min = 90 max = 270 }
		size = { min = 10 max = 25 }
	}
	
	planet = { # Real Space
		count = 1
		orbit_distance = { min = 30 max = 50 }
		class = "rl_unhabitable_planets"
		orbit_angle = { min = 90 max = 270 }
		size = { min = 10 max = 25 }
	}
	
	planet = { # Real Space
		count = 1
		orbit_distance = { min = 50 max = 70 }
		class = "rl_unhabitable_planets"
		orbit_angle = { min = 90 max = 270 }
		size = { min = 10 max = 25 }
	}

	planet = {
		count = 3
		orbit_distance = 25
		class = "rl_unhabitable_planets"
		orbit_angle = { min = 90 max = 270 }
		size = { min = 10 max = 25 }
	}
}

## Curator II
# Merge between Real Space, ACOT
guardians_curator_init_02 = {
	class = sc_black_hole
	usage = misc_system_init
	
	usage_odds = {
		base = 0
		modifier = {
			OR = {
				has_leviathans = yes
				has_distar = yes
			}
			add = 100
		}
		modifier = {
			factor = 0
			is_fe_cluster = yes
		}
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
	}

	max_instances = 1
	spawn_chance = 100
	#scaled_spawn_chance = 8	# scales by galaxy size (1000 stars = 10x base)
	
	flags = { guardians_curators_system enclave }
	
	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = @standard_min max = @standard_max }
		has_ring = no
		
		init_effect = {
			if = {
				limit = {
					NOT = { exists = event_target:curator_enclave_country }
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_1
					}
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_2
					}
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_3
					}
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_4
					}
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_5
					}
					#homeworld = this
				}
				create_country = {
					name = "NAME_Curator_Order"
					adjective = "NAME_Curator_adj"
					type = enclave
					authority = "auth_oligarchic"
					civics = {
						civic = civic_ancient_preservers
					}
					origin = "origin_default"
					species = last_created_species
					flag = {
						icon = {
							category = "enclaves"
							file = "enclaves_flag_curator.dds"
						}
						background= {
							category = "backgrounds"
							file = "vertical.dds"
						}
						colors={
							"blue"
							"dark_blue"
							"null"
							"null"
						}
					}
					ethos = {
						ethic = ethic_fanatic_materialist
						ethic = ethic_pacifist
					}
					ignore_initial_colony_error = yes
				}
				last_created_country = {
					set_country_flag = curator_enclave_country
					set_graphical_culture = fallen_empire_02
					save_global_event_target_as = curator_enclave_country
					create_fleet = {
						name = "NAME_Curator_Sigma_Enclave"
						settings = {  }
						effect = {
							set_owner = prev
							create_ship = {
								name = random
								design = "NAME_Curator_Enclave_Station"
								graphical_culture = prev
							}
							set_location = {
								target = prevprev
								angle = 80
								distance = 100
							}
							save_event_target_as = CustomCapital
							prev = {
								set_custom_capital_location = event_target:CustomCapital
							}
						}
					}
					create_leader = {
						class = scientist
						species = this
						name = random
						skill = 5
					}
					set_leader = last_created_leader
					create_fleet = {
						name = "NAME_Curator_Guard_Fleet"
						settings = { 
							garrison = yes
						}
						effect = {
							set_owner = prev
							while = {
								count = 8
								create_ship = {
									name = random
									design = "NAME_CURATOR_ESCORT"
									graphical_culture = prev
								}
							}
							while = {
								count = 2
								create_ship = {
									name = random
									design = "NAME_CURATOR_BC"
									graphical_culture = prev
								}
							}
							set_location = {
								target = prevprev
								angle = 100
								distance = 100
							}
							prev = {
							}
						}
					}
					create_fleet = {
						name = "NAME_Curator_Oracle_Fleet"
						settings = { 
							garrison = yes
						}
						effect = {
							set_owner = prev
							create_ship = {
								name = random
								design = "NAME_CURATOR_ORACLE"
								graphical_culture = prev
							}
							set_location = {
								target = prevprev
								angle = 80
								distance = 80
							}
							prev = {
							}
						}
					}
				}
				solar_system = {
					save_global_event_target_as = curator_enclave_system
				}
				else = {
					event_target:curator_enclave_country = {
						create_fleet = {
							name = "NAME_Curator_Sigma_Enclave"
							settings = {  }
							effect = {
								set_owner = prev
								create_ship = {
									name = random
									design = "NAME_Curator_Enclave_Station"
									graphical_culture = prev
								}
								set_location = {
									target = prevprev
									distance = 100
									angle = 80
								}
								save_event_target_as = CustomCapital
								prev = {
									set_custom_capital_location = event_target:CustomCapital
								}	
							}
						}
						create_fleet = {
							name = "NAME_Curator_Guard_Fleet"
							settings = { 
								garrison = yes
							}
							effect = {
								set_owner = prev
								while = {
									count = 8
									create_ship = {
										name = random
										design = "NAME_CURATOR_ESCORT"
										graphical_culture = prev
									}
								}
								while = {
									count = 2
									create_ship = {
										name = random
										design = "NAME_CURATOR_BC"
										graphical_culture = prev
									}
								}
								set_location = {
									target = prevprev
									angle = 80
									distance = 120
								}
								prev = {
								}
							}
						}
						create_fleet = {
							name = "NAME_Curator_Oracle_Fleet"
							settings = { 
								garrison = yes
							}
							effect = {
								set_owner = prev
								create_ship = {
									name = random
									design = "NAME_CURATOR_ORACLE"
									graphical_culture = prev
								}
								set_location = {
									target = prevprev
									angle = 75
									distance = 80
								}
								prev = {
								}
							}
						}
					}
				}
			}
		}
	}
}

## Curator III
# Merge between Real Space, ACOT
guardians_curator_init_03 = {
	class = sc_pulsar
	usage = misc_system_init
	
	usage_odds = {
		base = 0
		modifier = {
			OR = {
				has_leviathans = yes
				has_distar = yes
			}
			add = 100
		}
		modifier = {
			factor = 0
			is_fe_cluster = yes
		}
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
	}

	max_instances = 1
	#spawn_chance = 100
	scaled_spawn_chance = 16	# scales by galaxy size (1000 stars = 10x base)
	
	flags = { guardians_curators_system enclave }
	
	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = @standard_min max = @standard_max }
		has_ring = no
		
		init_effect = {
			if = {
				limit = {
					NOT = { exists = event_target:curator_enclave_country }
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_1
					}
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_2
					}
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_3
					}
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_4
					}
				}
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = {
						ideal_planet_class = pc_habitat
						trait = random_traits
					}
					effect = {
						save_global_event_target_as = acot_curator_species_5
					}
					#homeworld = this
				}
				create_country = {
					name = "NAME_Curator_Order"
					type = enclave
					authority = "auth_oligarchic"
					civics = {
						civic = civic_ancient_preservers
					}
					origin = "origin_default"
					species = last_created_species
					flag = {
						icon = {
							category = "enclaves"
							file = "enclaves_flag_curator.dds"
						}
						background= {
							category = "backgrounds"
							file = "vertical.dds"
						}
						colors={
							"blue"
							"dark_blue"
							"null"
							"null"
						}
					}
					ethos = {
						ethic = ethic_fanatic_materialist
						ethic = ethic_pacifist
					}
					ignore_initial_colony_error = yes
				}
				last_created_country = {
					set_country_flag = curator_enclave_country
					set_graphical_culture = fallen_empire_02
					save_global_event_target_as = curator_enclave_country
					create_fleet = {
						name = "NAME_Curator_Lambda_Enclave"
						settings = {  }
						effect = {
							set_owner = prev
							create_ship = {
								name = random
								design = "NAME_Curator_Enclave_Station"
								graphical_culture = prev
							}
							set_location = {
								target = prevprev
								angle = 80
								distance = 100
							}
							save_event_target_as = CustomCapital
							prev = {
								set_custom_capital_location = event_target:CustomCapital
							}
						}
					}
					create_leader = {
						class = scientist
						species = this
						name = random
						skill = 5
					}
					set_leader = last_created_leader
					create_fleet = {
						name = "NAME_Curator_Guard_Fleet"
						settings = { 
							garrison = yes
						}
						effect = {
							set_owner = prev
							while = {
								count = 8
								create_ship = {
									name = random
									design = "NAME_CURATOR_ESCORT"
									graphical_culture = prev
								}
							}
							while = {
								count = 2
								create_ship = {
									name = random
									design = "NAME_CURATOR_BC"
									graphical_culture = prev
								}
							}
							set_location = {
								target = prevprev
								angle = 80
								distance = 120
							}
							prev = {
							}
						}
					}
					create_fleet = {
						name = "NAME_Curator_Oracle_Fleet"
						settings = { 
							garrison = yes
						}
						effect = {
							set_owner = prev
							create_ship = {
								name = random
								design = "NAME_CURATOR_ORACLE"
								graphical_culture = prev
							}
							set_location = {
								target = prevprev
								angle = 90
								distance = 60
							}
							prev = {
							}
						}
					}
				}
				solar_system = {
					save_global_event_target_as = curator_enclave_system
				}
				else = {
					event_target:curator_enclave_country = {
						create_fleet = {
							name = "NAME_Curator_Lambda_Enclave"
							settings = {  }
							effect = {
								set_owner = prev
								create_ship = {
									name = random
									design = "NAME_Curator_Enclave_Station"
									graphical_culture = prev
								}
								set_location = {
									target = prevprev
									angle = 150
									distance = 120
								}
								save_event_target_as = CustomCapital
								prev = {
									set_custom_capital_location = event_target:CustomCapital
								}	
							}
						}
						create_fleet = {
							name = "NAME_Curator_Guard_Fleet"
							settings = { 
								garrison = yes
							}
							effect = {
								set_owner = prev
								while = {
									count = 8
									create_ship = {
										name = random
										design = "NAME_CURATOR_ESCORT"
										graphical_culture = prev
									}
								}
								while = {
									count = 2
									create_ship = {
										name = random
										design = "NAME_CURATOR_BC"
										graphical_culture = prev
									}
								}
								set_location = {
									target = prevprev
									angle = 160
									distance = 100
								}
								prev = {
								}
							}
						}
						create_fleet = {
							name = "NAME_Curator_Oracle_Fleet"
							settings = { 
								garrison = yes
							}
							effect = {
								set_owner = prev
								create_ship = {
									name = random
									design = "NAME_CURATOR_ORACLE"
									graphical_culture = prev
								}
								set_location = {
									target = prevprev
									angle = 150
									distance = 45
								}
								prev = {
								}
							}
						}
					}
				}
			}
		}
	}
	
	change_orbit = 60
	
	planet = {
		count = 1
		class = "pc_broken"
		size = { min = 15 max = 25 }
		orbit_angle = { min = 90 max = 270 }
		
		init_effect = { prevent_anomaly = yes }
	}
	
	planet = {
		count = 1
		orbit_distance = { min = 40 max = 50 }
		class = "pc_broken"
		orbit_angle = { min = 90 max = 270 }
		size = { min = 15 max = 25 }
		
		init_effect = { prevent_anomaly = yes }
	}

	planet = {
		orbit_distance = { min = 50 max = 60 }
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }
		size = 40
	}
}

## Hive
# Merge between Real Space, Spaceborne Civs Expanded
guardians_init_hive = {
	class = "rl_standard_stars"
	usage = misc_system_init
	asteroid_belt = {
		type = crystal_asteroid_belt
		radius = 160
	}

	flags = { guardians_hive_system guardian hostile_system }

	usage_odds = {
		base = 0
		modifier = {
			has_leviathans = yes
			add = 100
		}
		modifier = {
			factor = 0
			OR = {
				is_fe_cluster = yes
				has_star_flag = empire_cluster
			}
		}
	}

	max_instances = 1
	#scaled_spawn_chance = 8	# scales by galaxy size (1000 stars = 10x base)

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = @standard_min max = @standard_max }
		has_ring = no

		init_effect = {
			create_ambient_object = {
				type = "dormant_hive_base_object"
			}
			last_created_ambient_object = {
				set_location = {
					target = PREV
					distance = 160
					angle = 245
				}
				set_ambient_object_flag = hive_asteroid_1
			}
			create_ambient_object = {
				type = "dormant_hive_base_object"
			}
			last_created_ambient_object = {
				set_location = {
					target = PREV
					distance = 160
					angle = 280
				}
				set_ambient_object_flag = hive_asteroid_2
			}
			create_ambient_object = {
				type = "dormant_hive_base_object"
			}
			last_created_ambient_object = {
				set_location = {
					target = PREV
					distance = 160
					angle = 320
				}
				set_ambient_object_flag = hive_asteroid_3
			}
			create_ambient_object = {
				type = "dormant_hive_base_object"
			}
			last_created_ambient_object = {
				set_location = {
					target = PREV
					distance = 160
					angle = 35
				}
				set_ambient_object_flag = hive_asteroid_4
			}
			create_ambient_object = {
				type = "dormant_hive_base_object"
			}
			last_created_ambient_object = {
				set_location = {
					target = PREV
					distance = 160
					angle = 110
				}
				set_ambient_object_flag = hive_asteroid_5
			}
			create_ambient_object = {
				type = "dormant_hive_base_object"
			}
			last_created_ambient_object = {
				set_location = {
					target = PREV
					distance = 160
					angle = 180
				}
				set_ambient_object_flag = hive_asteroid_6
			}
		}
	}

	change_orbit = 160

	planet = {
		class = pc_crystal_asteroid
		orbit_distance = 0
		orbit_angle = 75
		flags = { hiver_asteroid_1 }

		init_effect = {
			prevent_anomaly = yes
			set_deposit = d_minerals_6
		}
	}
	planet = {
		class = pc_crystal_asteroid
		orbit_distance = 0
		orbit_angle = 75
		flags = { hiver_asteroid_2 }

		init_effect = {
			prevent_anomaly = yes
			set_deposit = d_rare_crystals_4
		}
	}
	planet = {
		class = pc_crystal_asteroid
		orbit_distance = 0
		orbit_angle = 75
		flags = { hiver_asteroid_3 }

		init_effect = {
			prevent_anomaly = yes
			set_deposit = d_minerals_6
		}
	}
	planet = {
		class = pc_crystal_asteroid
		orbit_distance = 0
		orbit_angle = 75
		flags = { hiver_asteroid_4 }

		init_effect = {
			prevent_anomaly = yes
			set_deposit = d_rare_crystals_4
		}
	}
	planet = {
		class = pc_crystal_asteroid
		orbit_distance = 0
		orbit_angle = 70
		flags = { hiver_asteroid_5 }

		init_effect = {
			prevent_anomaly = yes
			set_deposit = d_minerals_6
		}
	}
	
	planet = { # Real Space
		class = "pc_gas_giant"
		count = 1
		orbit_distance = { min = 50 max = 60 }
		orbit_angle = { min = 90 max = 270 }
	}
	
	planet = { # Real Space
		class = "pc_gas_giant"
		count = { min = 0 max = 1 }
		orbit_distance = { min = 60 max = 70 }
		orbit_angle = { min = 90 max = 270 }
	}
	
	planet = { # Real Space
		class = "pc_gas_giant"
		count = { min = 0 max = 1 }
		orbit_distance = { min = 70 max = 80 }
		orbit_angle = { min = 90 max = 270 }
	}
}


