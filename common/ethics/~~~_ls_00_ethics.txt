##########################################################################
# Limitless Stellaris - Ethics
##########################################################################

##################################################
## Standard Ethics
##################################################

## Fanatic Authoritarian
# Merge between OSA, Bug Branch
ethic_fanatic_authoritarian = {
	cost = 2
	category = "col"
	category_value = 0

	use_for_pops = no

	regular_variant = ethic_authoritarian

	country_modifier = {
		country_ethic_influence_produces_add = 1.5 # Bug Branch 1 -> 1.5
		country_power_projection_produces_mult = 1.5 # OSA
		planet_jobs_worker_produces_mult = 0.15 # OSA 0.1 -> 0.15
		country_leader_pool_size = -1 # Vanilla
        job_enforcer_per_pop = 0.066 # Bug Branch
		planet_enforcers_unity_produces_add = 1 # Bug Branch
		pop_factions_produces_mult = -0.1 # Bug Branch
	}

	tags = {
		MORE_ENFORCER_JOBS # Bug Branch
	}

	random_weight = {
		base = 600 # Bug Branch 150 -> 600
	}
}

## Authoritarian
# Merge between DFEM, OSA, Bug Branch
ethic_authoritarian = {
	cost = 1
	category = "col"
	category_value = 1

	fanatic_variant = ethic_fanatic_authoritarian

	leader_background_job_weight = {
		politician = 25
		noble = 24 # Bug Branch 25 -> 24
		executive = 25
		bureaucrat = 25
		manager = 25
	}

	country_modifier = {
		country_ethic_influence_produces_add = 0.75 # Bug Branch 0.5 -> 0.75
		country_power_projection_produces_mult = 0.75 # OSA
		planet_jobs_worker_produces_mult = 0.075 # OSA 0.05 -> 0.075
        job_enforcer_per_pop = 0.033 # Bug Branch
		planet_enforcers_unity_produces_add = 0.5 # Bug Branch
	}

	tags = {       
        MORE_ENFORCER_JOBS # Bug Branch
		ETHIC_ALLOWS_STRATIFIED_SOCIETY # DFEM
		ETHIC_ALLOWS_SLAVERY # DFEM
		ETHIC_NEVER_DEMOCRACY # DFEM
	}

	random_weight = {
		base = 400 # Bug Branch 100 -> 400
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_AUTHORITARIAN_POS
		trigger = {
			OR = {
				has_ethic = ethic_authoritarian
				has_ethic = ethic_fanatic_authoritarian
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_authoritarian
				has_ethic = ethic_fanatic_authoritarian
			}
			has_faction = totalitarian
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_SLAVERY_POS
		trigger = {
			any_enslaved_species = {
				is_same_species = root
				is_robotic = no
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_OVERLORD_POS
		trigger = {
			is_subject = yes
			has_loyalty > 0
			overlord = { is_authoritarian = yes }
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_XENO_SLAVES_POS
		trigger = {
			any_enslaved_species = {
				not = { is_same_species = root }
				is_robotic = no
			}
			NOT = {
				any_enslaved_species = {
					is_same_species = root
					is_robotic = no
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_CONSUMER_GOODS_NEG_pemd
		trigger = {
			is_authoritarian = no
			any_owned_species = {
				OR = {
					has_living_standard = { type = living_standard_utopian country = root }
					has_living_standard = { type = living_standard_good country = root }
					has_living_standard = { type = living_standard_shared_burden country = root }
				}
			}
		}
	}
	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_STRATIFIED_POS
		trigger = {
			any_owned_species = {
				OR = {
					has_living_standard = { type = living_standard_stratified country = root }
					has_living_standard = { type = living_standard_dystopian_society country = root }
				}
			}
		}
	}
	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_BENEFIT_FROM_INEQUALITY_POS
		trigger = {
			any_owned_species = {
				is_sapient = yes
				NOR = {
					has_citizenship_type = { type = citizenship_full country = prev.owner }
					has_citizenship_type = { type = citizenship_slavery country = prev.owner }
				}
			}
		}
	}
	pop_attraction_tag = {
		desc = POP_ATTRACTION_AUTOCRATIC_GOV_POS
		trigger = {
			has_election_type = none
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_DEMOCRATIC_GOV_NEG
		trigger = {
			has_election_type = democratic
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_DECADENT_POS
		trigger = {
			any_owned_species = {
				has_trait = "trait_decadent"
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_AUTHORITARIAN_DIPLOMACY_POS
		trigger = {
			any_relation = {
				OR = {
					is_in_federation_with = root
					has_defensive_pact = root
				}
				is_authoritarian = yes
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_HEGEMONYFED_POS
		trigger = {
			has_federation = yes
			federation = {
				has_federation_type = hegemony_federation
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_NOBLES_POS
		trigger = {
			num_assigned_jobs = {
				job = noble
				value > 0
			}
		}
	}

	# Check for any leader on the Council with Faction's Ethic.
	pop_attraction_tag = { # Bug Branch
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_authoritarian
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_HIGH_STRATUM_POS
		trigger = {
			is_gestalt = no
			any_owned_species = {
				has_citizenship_type = {
					type = citizenship_full
					country = prev
				}
				NOT = {
					has_living_standard = {
						type = living_standard_utopian
						country = prev
					}
				}
			}
		}
	}
	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_ENFORCER_POS
		trigger = {
			any_owned_planet = {
				num_assigned_jobs = {
					job = enforcer
					value > 0
				}
			}
		}
	}
	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_LOW_STRATUM_NEG
		trigger = {
			OR = {
				is_gestalt = no
				any_owned_species = { species_has_happiness_with_owner = prev }
			}
		}
	}
	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_UNEMPLOYMENT_NEG
		trigger = {
			any_owned_planet = { num_unemployed > 0 }
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_CRIME_POS
		trigger = {
			is_authoritarian = no
			any_owned_planet = {
				OR = {
					has_modifier = criminal_underworld
					has_modifier = criminal_gambling
					has_modifier = center_of_drug_trade
				}
			}
		}
	}


	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_playable = yes # STU
				has_ethic = ethic_authoritarian
				has_ethic = ethic_fanatic_authoritarian
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = {
							OR = {
								has_ethic = ethic_fanatic_authoritarian
								has_ethic = ethic_authoritarian
							}
						}
					}
				}
			}
		}
		# Effects of indoctrination mission
		modifier = {
			factor = 20
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_authoritarian }
			}
		}
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_authoritarian }
			}
		}
		modifier = {
			factor = 2
			is_playable = yes # DFEM
			NOR = {
				has_ethic = ethic_authoritarian
				has_ethic = ethic_fanatic_authoritarian
			}
			has_faction = totalitarian
		}
		modifier = { # DFEM
			exists = overlord
			has_loyalty > 0
			mult = value:ethics_from_overlord|ETHIC|authoritarian|
		}
		mult = value:authoritarian_ethics_from_relations # DFEM
		modifier = {
			factor = 1.5
			has_federation = yes
			federation = {
				has_federation_type = hegemony_federation
			}
		}
		modifier = {
			factor = 2
			has_ethic = ethic_authoritarian
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_authoritarian
		}
		modifier = {
			factor = 1.25
			has_election_type = none
		}
		modifier = {
			factor = 0.75
			has_election_type = democratic
		}
		# Check for any leader on the Council with Faction's Ethic.
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|authoritarian| # Ariphaos fix
		}
	}

	# from = planet
	pop_attraction = {
		base = 1

		modifier = { # DFEM
			factor = 0
			has_trait = trait_hive_mind
		}
		modifier = {
			factor = 1.25
			has_trait = "trait_decadent"
		}
		modifier = { # DFEM
			factor = 1.5
			is_enslaved = no
			from = {
				any_enslaved_species = {
					is_same_species = root
					is_robotic = no
				}
			}
		}
		modifier = { # DFEM
			factor = 1.25
			is_enslaved = no
			from = {
				any_enslaved_species = {
					NOT = { is_same_species = root }
					is_robotic = no
				}
				NOT = {
					any_enslaved_species = {
						is_same_species = root
						is_robotic = no
					}
				}
			}
		}
		modifier = { # DFEM
			factor = 1.2
			has_citizenship_rights = yes
			from = {
				any_owned_species = {
					is_sapient = yes
					NOR = {
						has_citizenship_type = { type = citizenship_full country = prev.owner }
						has_citizenship_type = { type = citizenship_slavery country = prev.owner }
					}
				}
			}
		}
		modifier = { # DFEM
			factor = 1.25
			is_enslaved = no
			NOR = {
				is_pop_category = worker
				is_pop_category = criminal
			}
			OR = {
				has_living_standard = { type = living_standard_stratified }
				AND = {
					is_pop_category = ruler
					has_living_standard = { type = living_standard_dystopian_society }
				}
			}
		}
		modifier = { # DFEM
			factor = 0.75
			owner = { is_authoritarian = no }
			OR = {
				has_living_standard = { type = living_standard_utopian }
				has_living_standard = { type = living_standard_good }
				has_living_standard = { type = living_standard_shared_burden }
			}
			NOT = { is_pop_category = ruler }
		}
		modifier = { # DFEM
			factor = 0.85
			OR = {
				is_pop_category = worker
				is_pop_category = slave
				is_pop_category = criminal
			}
		}
		modifier = { # DFEM
			factor = 0.95
			NOR = {
				is_pop_category = worker
				is_pop_category = slave
				is_pop_category = criminal
				is_pop_category = ruler
			}
		}
		modifier = { # DFEM
			factor = 1.2
			is_pop_category = ruler
			NOT = { has_living_standard = { type = living_standard_utopian } }
		}
		modifier = { # DFEM
			factor = 1.2
			has_job = enforcer
		}
		modifier = { # DFEM
			factor = 1.65
			has_job = noble
		}
		modifier = { # DFEM
			factor = 0.75
			is_unemployed = yes
		}
		modifier = { # DFEM
			factor = 1.1
			planet = {
				OR = {
					has_modifier = criminal_underworld
					has_modifier = criminal_gambling
					has_modifier = center_of_drug_trade
				}
				NOT = {
					owner = { is_authoritarian = yes }
				}
			}
			NOT = {
				is_pop_category = criminal
			}
		}
	}
}

## Fanatic Egalitarian
# Merge between OSA, Bug Branch
ethic_fanatic_egalitarian = {
	cost = 2
	category = "col"
	category_value = 4

	category_opposite = yes

	regular_variant = ethic_egalitarian

	use_for_pops = no

	tags = {
		ETHIC_ONLY_DEMOCRACY # Bug Branch
	}

	country_modifier = {
		pop_factions_produces_mult = 1.0 # OSA 0.5 -> 1.0
		planet_jobs_specialist_produces_mult = 0.1 # Vanilla
		country_leader_pool_size = 1 # Vanilla
		pop_ethics_shift_speed_mult = 0.2 # Bug Branch
		job_bureaucrat_per_pop = 0.066 # Bug Branch # LS entertainer -> bureaucrat [Balance]
		planet_stability_add = -5 # Bug Branch
	}

	random_weight = {
		base = 600 # Bug Branch 150 -> 600
	}
}

## Egalitarian
# Merge between DFEM, OSA, Bug Branch
ethic_egalitarian = {
	cost = 1
	category = "col"
	category_value = 3

	fanatic_variant = ethic_fanatic_egalitarian

	category_opposite = yes

	tags = {
		ETHIC_NEVER_AUTOCRACY # Bug Branch
		ETHIC_ALLOWS_UTOPIA # DFEM
	}

	leader_background_job_weight = {
		colonist = 25
		culture_worker = 25
		pearl_diver = 25
		clerk = 25
		technician = 25
		miner = 25
		crystal_miner = 25
		gas_extractor = 25
		mote_harvester = 25
		farmer = 25
		scrap_miner = 25
		angler = 25
		ranger = 25
		squire = 25
		puddle_technician = 25
	}

	country_modifier = {
		pop_factions_produces_mult = 0.50 # OSA 0.25 -> 0.50
		planet_jobs_specialist_produces_mult = 0.05 # Vanilla
		pop_ethics_shift_speed_mult = 0.1 # Bug Branch
		job_bureaucrat_per_pop = 0.033 # Bug Branch # LS entertainer -> bureaucrat [Balance]
	}

	random_weight = {
		base = 400 # Bug Branch 100 -> 400
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_EGALITARIAN_POS
		trigger = {
			OR = {
				has_ethic = ethic_egalitarian
				has_ethic = ethic_fanatic_egalitarian
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_egalitarian
				has_ethic = ethic_fanatic_egalitarian
			}
			has_faction = progressive
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_CONSUMER_GOODS_POS
		trigger = {
			is_authoritarian = no
			any_owned_species = {
				OR = {
					has_living_standard = { type = living_standard_utopian country = root }
					has_living_standard = { type = living_standard_good country = root }
					has_living_standard = { type = living_standard_shared_burden country = root }
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_EGALITARIAN_DIPLOMACY_POS
		trigger = {
			any_relation = {
				OR = {
					AND = {
						is_subject = no
						has_migration_access = root
					}
					is_in_federation_with = root
					has_defensive_pact = root
					has_commercial_pact = root
				}
				OR = {
					has_ethic = ethic_egalitarian
					has_ethic = ethic_fanatic_egalitarian
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_UTOPIAN_CITIZENSHIP_POS
		trigger = {
			any_owned_species = {
				is_robotic = no
				NOT = { is_same_species = root }
			}
			count_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = {
						has_citizenship_type = { type = citizenship_full country = root }
					}
				}
				count = 0
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_ENSLAVED_POS
		trigger = {
			any_enslaved_species = {
				is_robotic = no
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_DEMOCRATIC_GOV_POS
		trigger = {
			has_election_type = democratic
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_AUTOCRATIC_GOV_NEG
		trigger = {
			has_election_type = none
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_OVERLORD_POS
		trigger = {
			is_subject = yes
			has_loyalty > 0
			overlord = { is_egalitarian = yes }
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_DECADENT_NEG
		trigger = {
			any_owned_species = {
				has_trait = "trait_decadent"
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_NOBLES_NEG
		trigger = {
			num_assigned_jobs = {
				job = noble
				value > 0
			}
		}
	}

	# Check for any leader on the Council with Faction's Ethic.
	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_egalitarian
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_HIGH_STRATUM_NEG
		trigger = {
			is_gestalt = no
		}
	}
	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_LOW_STRATUM_POS
		trigger = {
			OR = {
				is_gestalt = no
				any_owned_species = { species_has_happiness_with_owner = prev }
			}
		}
	}
	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_UNEMPLOYMENT_POS
		trigger = {
			any_owned_planet = { num_unemployed > 0 }
		}
	}


	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_playable = yes # STU
				has_ethic = ethic_egalitarian
				has_ethic = ethic_fanatic_egalitarian
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = {
							OR = {
								has_ethic = ethic_fanatic_egalitarian
								has_ethic = ethic_egalitarian
							}
						}
					}
				}
			}
		}
		# Effects of indoctrination mission
		modifier = {
			factor = 20
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_egalitarian }
			}
		}
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_egalitarian }
			}
		}
		modifier = {
			factor = 2
			is_playable = yes # STU
			NOR = {
				has_ethic = ethic_egalitarian
				has_ethic = ethic_fanatic_egalitarian
			}
			has_faction = progressive
		}
		modifier = {
			factor = 2
			has_ethic = ethic_egalitarian
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_egalitarian
		}
		modifier = { # DFEM
			exists = overlord
			has_loyalty > 0
			mult = value:ethics_from_overlord|ETHIC|egalitarian|
		}
		modifier = {
			factor = 0.75
			is_playable = yes # STU
			has_election_type = none
		}
		modifier = {
			factor = 1.25
			is_playable = yes # STU
			has_election_type = democratic
		}
		modifier = { # DFEM
			factor = 1.25
			any_owned_species = {
				is_robotic = no
				NOT = { is_same_species = root }
			}
			count_owned_species = {
				limit = {
					is_sapient = yes
					is_robotic = no
					NOT = {
						has_citizenship_type = { type = citizenship_full country = root }
					}
				}
				count = 0
			}
		}
		# LS - Removed for performance
		#modifier = { # Bug Branch
		#	factor = 1.5
		#	any_relation = {
		#		OR = {
		#			is_in_federation_with = root
		#			has_defensive_pact = root
		#			has_commercial_pact = root
		#		}
		#		OR = {
		#			has_ethic = ethic_egalitarian
		#			has_ethic = ethic_fanatic_egalitarian
		#		}
		#	}
		#}
		# LS - Removed for performance
		#modifier = { # Bug Branch
		#	factor = 2.0
		#	any_relation = {
		#		is_subject = no
		#		has_migration_access = root
		#		OR = {
		#			has_ethic = ethic_egalitarian
		#			has_ethic = ethic_fanatic_egalitarian
		#		}
		#	}
		#}
		# Check for any leader on the Council with Faction's Ethic.
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|egalitarian|
		}

		mult = value:egalitarian_ethics_from_relations # DFEM
	}

	# from = planet
	pop_attraction = {
		base = 1

		modifier = { # DFEM
			factor = 0
			has_trait = trait_hive_mind
		}
		modifier = {
			factor = 0.5
			has_trait = "trait_decadent"
		}
		modifier = {
			factor = 1.25
			has_citizenship_rights = no # DFEM
		}
		modifier = { # DFEM
			factor = 1.5
			is_enslaved = yes
			is_robot_pop = no
		}
		modifier = { # DFEM
			factor = 1.25
			owner = { is_authoritarian = no }
			OR = {
				has_living_standard = { type = living_standard_utopian }
				has_living_standard = { type = living_standard_good }
				has_living_standard = { type = living_standard_shared_burden }
			}
			NOT = { is_pop_category = ruler }
		}
		modifier = { # DFEM
			factor = 1.1
			OR = {
				is_pop_category = worker
				is_pop_category = slave
				is_pop_category = criminal
			}
		}
		modifier = { # DFEM
			factor = 0.75
			is_pop_category = ruler
			NOT = { has_living_standard = { type = living_standard_utopian } }
		}
		modifier = { # DFEM
			factor = 0.15
			has_job = noble
		}
		modifier = { # DFEM
			factor = 1.25
			is_unemployed = yes
		}
	}
}

## Fanatic Xenophobe
# Merge between OSA, Bug Branch
ethic_fanatic_xenophobe = {
	cost = 2
	category = "xen"
	category_value = 0

	xenophobe = yes #used for a few hardcoded checks (mainly tooltips)

	use_for_pops = no

	regular_variant = ethic_xenophobe

	tags = {
		ETHIC_ALLOWS_PURGE
		ETHIC_ALLOWS_SLAVERY
		ETHIC_REDUCED_DIPLOMACY
		ETHIC_NEVER_ALIEN_CITIZENSHIP
		ETHIC_NEVER_ALIEN_MILITARY_SERVICE
		ETHIC_NO_REFUGEES
	}

	country_modifier = {
		first_contact_defense_add = 4 # OSA
		ship_evasion_mult = 0.20 # OSA
	    tradition_cost_empire_size_mult = -0.3 # Bug Branch
		country_starbase_influence_cost_mult = -0.2 # Bug Branch -0.4 -> -0.2
		pop_growth_speed = 0.10 # Bug Branch 0.1, OSA 0.3, using Bug Branch
		intel_decryption_add = 2 # LS [Balance]
		external_leader_pool_add = -2
		diplomacy_upkeep_mult = 0.33 # Bug Branch
	}

	random_weight = {
		base = 300 # Bug Branch 150 -> 300
	}
}

## Xenophobe
# Merge between DFEM, OSA, Bug Branch
ethic_xenophobe = {
	cost = 1
	category = "xen"
	category_value = 1

	xenophobe = yes # DFEM - used for a few hardcoded checks (mainly tooltips)

	fanatic_variant = ethic_fanatic_xenophobe

	tags = {
		ETHIC_ALLOWS_PURGE
		ETHIC_ALLOWS_SLAVERY
		ETHIC_REDUCED_DIPLOMACY
		ETHIC_NEVER_ALIEN_CITIZENSHIP
		ETHIC_NEVER_ALIEN_MILITARY_SERVICE
		ETHIC_NO_REFUGEES
	}

	country_modifier = {
		first_contact_defense_add = 2 # OSA
		ship_evasion_mult = 0.10 # OSA
        tradition_cost_empire_size_mult = -0.15 # Bug Branch
		country_starbase_influence_cost_mult = -0.1 # Bug Branch -0.2 -> -0.1
		pop_growth_speed = 0.05 # Bug Branch 0.05, OSA 0.15, using Bug Branch
		intel_decryption_add = 1 # LS [Balance]
		external_leader_pool_add = -1
	}

	random_weight = {
		base = 225 # Bug Branch 100 -> 225
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_XENOPHOBE_POS
		trigger = {
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}


	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
			OR = {
				has_faction = supremacist
				has_faction = isolationist
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FANATIC_PURIFIERS_POS
		trigger = {
			has_valid_civic = civic_fanatic_purifiers
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_INWARDS_PERFECTION_POS
		trigger = {
			is_inwards_perfection_empire = yes # STU
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_DEFENSIVE_XENO_WAR_POS
		trigger = {
			is_at_war = yes # DFEM
			any_war = {
				any_defender = {
					is_same_value = prevprev
				}
				any_attacker = {
					NOT = { is_same_species = root }
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPUGNANT_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					NOT = { has_trait = "trait_repugnant" }
					is_non_sapient_robot = no
				}
				any_owned_species = {
					has_trait = "trait_repugnant"
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_NOXIOUS_POS
		trigger = {
			any_owned_planet = {
				any_owned_species = {
					has_trait = "trait_noxious"
				}
				any_owned_pop = {
					NOT = { has_trait = "trait_noxious" }
					is_non_sapient_robot = no
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_XENO_SLAVES_POS
		trigger = {
			any_enslaved_species = {
				not = { is_same_species = root }
				is_robotic = no
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_OVERLORD_POS
		trigger = {
			is_subject = yes
			has_loyalty > 0
			overlord = { is_xenophobe = yes }
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_ENSLAVEMENT_OF_SPECIES_POS
		trigger = {
			any_relation = {
				NOT = { is_same_species = root }
				any_enslaved_species = {
					is_robotic = no
					is_same_species = root
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_PURGING_POS
		trigger = {
			any_relation = {
				has_opinion_modifier = {
					who = root
					modifier = opinion_genocidal
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_PURGING_OF_SPECIES_POS
		trigger = {
			any_relation = {
				has_opinion_modifier = {
					who = root
					is_reverse = yes # DFEM
					modifier = opinion_genocidal_our_species
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_NEIGHBOR_HOMICIDAL_POS
		trigger = {
			any_neighbor_country = {
				is_homicidal = yes
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_XENO_LEADERS_NEG
		trigger = {
			allows_alien_leaders = yes
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FREE_XENOS_NEG
		trigger = {
			# DFEM removes any_owned_planet
			any_owned_pop = {
				not = { is_same_species = root }
				is_enslaved = no
				is_being_purged = no
				is_sapient = yes
				is_robot_pop = no
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_MIGRATION_TREATIES_NEG
		trigger = {
			any_relation = {
				is_subject = no
				has_migration_access = root
				NOT = { is_same_species = root } # DFEM
			}
		}
	}

	# Check for any leader on the Council with Faction's Ethic.
	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_xenophobe
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_NATIVES_LACKING_NECESSITIES_POS
		trigger = {
			is_xenophobe = no
			OR = {
				AND = {
					has_deficit = food
					any_owned_species = {
						is_same_species = prev
						has_food_upkeep = yes
					}
				}
				AND = {
					has_deficit = minerals
					any_owned_species = {
						is_same_species = prev
						has_mineral_upkeep = yes
					}
				}
				has_deficit = consumer_goods
				any_owned_planet = {
					OR = {
						free_housing < 0
						free_amenities < 0
					}
					any_owned_species = { is_same_species = prev }
				}
			}
		}
	}

	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_playable = yes # STU
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
				AND = {
					has_country_flag = preftl_societal_enlightenment_pact
					is_country_type = primitive
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = {
							OR = {
								has_ethic = ethic_fanatic_xenophobe
								has_ethic = ethic_xenophobe
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 2
			is_playable = yes # STU
			NOR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
			OR = {
				has_faction = supremacist
				has_faction = isolationist
			}
		}
		modifier = {
			factor = 2
			has_ethic = ethic_xenophobe
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_xenophobe
		}
		modifier = { # DFEM
			exists = overlord
			has_loyalty > 0
			mult = value:ethics_from_overlord|ETHIC|xenophobe|
		}
		modifier = {
			factor = 1.5
			is_inwards_perfection_empire = yes # STU
		}
		modifier = {
			factor = 1.5
			has_valid_civic = civic_fanatic_purifiers
		}
		# LS - Removed for performance
		#modifier = {
		#	factor = 0.75
		#	any_relation = {
		#		is_subject = no
		#		has_migration_access = root
		#	}
		#}
		mult = value:xenophobe_ethics_from_relations # DFEM
		modifier = {
			factor = 0.75
			allows_alien_leaders = yes
		}
		modifier = {
			factor = 3.0
			any_war = {
				any_defender = {
					is_same_value = prevprev
				}
				any_attacker = {
					NOT = { is_same_species = root }
				}
			}
		}
		# LS - Removed for performance
		#modifier = {
		#	factor = 2.0
		#	species = { is_robotic = no } # DFEM
		#	#is_country_type = default # DFEM removes
		#	#is_same_species = root # DFEM removes
		#	any_relation = {
		#		NOT = { is_same_species = root }
		#		any_enslaved_species = {
		#			#is_robotic = no # DFEM removes
		#			is_same_species = root
		#		}
		#	}
		#}
		# LS - Removed for performance
		#modifier = { # DFEM
		#	factor = 2.5
		#	any_relation = {
		#		has_opinion_modifier = {
		#			who = root
		#			modifier = opinion_genocidal
		#		}
		#	}
		#}
		# LS - Removed for performance
		#modifier = {
		#	factor = 4.0
		#	#is_country_type = default # DFEM removes
		#	#is_same_species = root # DFEM removes
		#	any_relation = {
		#		has_opinion_modifier = {
		#			who = root
		#			is_reverse = yes
		#			modifier = opinion_genocidal_our_species
		#		}
		#	}
		#}
		# Effects of indoctrination mission
		modifier = {
			factor = 20
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_xenophobe }
			}
		}
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_xenophobe }
			}
		}

		# DFEM - Check for any leader on the Council with Faction's Ethic.
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|xenophobe|
		}
	}

	#from = planet
	pop_attraction = {
		base = 1

		modifier = { # DFEM
			factor = 0
			has_trait = trait_hive_mind
		}
		modifier = {
			factor = 2.0
			is_enslaved = no
			is_being_purged = no
			from = {
				any_enslaved_species = {
					not = { is_same_species = root }
					is_robotic = no
				}
			}
		}
		modifier = {
			factor = 0.45 # DFEM 0.5 -> 0.45
			is_enslaved = no
			is_being_purged = no
			from = {
				any_owned_pop = {
					not = { is_same_species = root }
					is_enslaved = no
					is_being_purged = no
					is_sapient = yes
					is_robot_pop = no
				}
			}
		}
		modifier = {
			factor = 1.5
			from = {
				any_owned_species = { # DFEM pop -> species
					NOT = { is_same_species = root }
					has_trait = "trait_repugnant"
				}
			}
		}
		modifier = { # DFEM
			factor = 1.5
			NOT = { has_trait = trait_noxious }
			from = {
				any_owned_species = {
					NOT = { is_same_species = root }
					has_trait = trait_noxious
				}
			}
		}
		modifier = { # DFEM - want necessities xenos have
			factor = 1.25
			is_same_species = owner
			owner = { is_xenophobe = no }
			pop_lacking_necessities = yes
		}
	}
}

## Fanatic Xenophile
# Merge between OSA, Bug Branch
ethic_fanatic_xenophile = {
	cost = 2
	category = "xen"
	category_value = 4

	category_opposite = yes

	regular_variant = ethic_xenophile

	use_for_pops = no

	tags = {
		ETHIC_IMPROVED_DIPLOMACY
		ETHIC_ALWAYS_REFUGEES
		ETHIC_DISALLOWS_SLAVERY
		ETHIC_DISALLOWS_DISPLACE
	}

	country_modifier = {
		country_trust_growth = 0.5 # Bug Branch
		diplomacy_upkeep_mult = -0.3 # Bug Branch
		#trade_value_mult = 0.30 # OSA 0.20 -> 0.30 # Removed by Bug Branch - in Competitive
		country_trust_cap_add = 200 # OSA
		envoys_add = 4 # OSA 2 -> 4
		external_leader_pool_add = 2 # Vanilla
		max_rivalries = -1 # Bug Branch
		show_only_custom_tooltip = no
		custom_tooltip = fan_xenophile_insight_gain
	}

	random_weight = {
		base = 300 # Bug Branch 100 -> 300
	}
}

## Xenophile
# Merge between DFEM, OSA, Bug Branch
ethic_xenophile = {
	cost = 1
	category = "xen"
	category_value = 3

	xenophile = yes # DFEM - used for a few hardcoded checks (mainly tooltips)

	category_opposite = yes

	fanatic_variant = ethic_fanatic_xenophile

	tags = {
		ETHIC_IMPROVED_DIPLOMACY
		ETHIC_ALWAYS_REFUGEES
		ETHIC_DISALLOWS_SLAVERY
		ETHIC_DISALLOWS_DISPLACE
	}

	leader_background_job_weight = {
		xeno_zoo_keeper = 25
	}

	country_modifier = {
		country_trust_growth = 0.25 # Bug Branch
		diplomacy_upkeep_mult = -0.15 # Bug Branch
		#trade_value_mult = 0.15 # OSA 0.10 -> 0.15 # Removed by Bug Branch - in Competitive.
		country_trust_cap_add = 100 # OSA
		envoys_add = 2 # OSA 1 -> 2
		external_leader_pool_add = 1 # Vanilla
		show_only_custom_tooltip = no
		custom_tooltip = xenophile_insight_gain
	}

	random_weight = {
		base = 225 # Bug Branch 66 -> 225
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_XENOPHILE_POS
		trigger = {
			OR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
			has_faction = xenoist
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FREE_XENOS_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					not = { is_same_species = root }
					is_enslaved = no
					is_being_purged = no
					is_sapient = yes
					is_robot_pop = no
					NOT = { has_trait = trait_syncretic_proles }
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_XENO_DIPLOMACY_POS
		trigger = {
			any_relation = {
				NOT = { is_same_species = root }
				is_subject = no # DFEM
				OR = {
					is_in_federation_with = root
					has_defensive_pact = root
					has_commercial_pact = root
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_MIGRATION_TREATIES_POS
		trigger = {
			any_relation = {
				is_subject = no
				has_migration_access = root
				NOT = { is_same_species = root }
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_CHARISMATIC_OR_CRAFTED_POS # DFEM +OR_CRAFTED
		trigger = {
			any_owned_planet = {
				any_owned_species = {
					OR = { # DFEM
						has_trait = "trait_charismatic"
						has_trait = "trait_crafted_smiles" # DFEM
					}
				}
				any_owned_pop = {
					NOR = { # DFEM
						has_trait = "trait_charismatic"
						has_trait = "trait_crafted_smiles" # DFEM
					}
					is_non_sapient_robot = no
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FANATIC_PURIFIERS_NEG
		trigger = {
			has_valid_civic = civic_fanatic_purifiers
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_INWARDS_PERFECTION_NEG
		trigger = {
			is_inwards_perfection_empire = yes # STU
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_ENSLAVEMENT_OF_SPECIES_NEG
		trigger = {
			any_relation = {
				NOT = { is_same_species = root }
				any_enslaved_species = {
					is_robotic = no
					is_same_species = root
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_PURGING_NEG
		trigger = {
			any_relation = {
				has_opinion_modifier = {
					who = root
					modifier = opinion_genocidal
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_PURGING_OF_SPECIES_NEG
		trigger = {
			any_relation = {
				has_opinion_modifier = {
					who = root
					is_reverse = yes # DFEM
					modifier = opinion_genocidal_our_species
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_NECROPHAGE_NEG
		trigger = {
			is_necrophage_empire = yes
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_XENO_LEADERS_POS
		trigger = {
			allows_alien_leaders = yes
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_OVERLORD_POS
		trigger = {
			is_subject = yes
			has_loyalty > 0
			overlord = { is_xenophile = yes }
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_XENO_OUTREACH_AGENCY_POS
		trigger = {
			any_owned_planet = {
				has_branch_office = yes
				has_holding = {
					holding = building_xeno_tourism_agency
					owner = branch_office_owner
				}
			}
		}
	}

	# DFEM - Check for any leader on the Council with Faction's Ethic.
	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_xenophile
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_NATIVES_LACKING_NECESSITIES_NEG
		trigger = {
			is_xenophobe = no
			OR = {
				AND = {
					has_deficit = food
					any_owned_species = {
						is_same_species = prev
						has_food_upkeep = yes
					}
				}
				AND = {
					has_deficit = minerals
					any_owned_species = {
						is_same_species = prev
						has_mineral_upkeep = yes
					}
				}
				has_deficit = consumer_goods
				any_owned_planet = {
					OR = {
						free_housing < 0
						free_amenities < 0
					}
					any_owned_species = { is_same_species = prev }
				}
			}
		}
	}

	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_playable = yes # STU
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = {
							OR = {
								has_ethic = ethic_fanatic_xenophile
								has_ethic = ethic_xenophile
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 2
			is_playable = yes # STU
			NOR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
			has_faction = xenoist
		}
		modifier = {
			factor = 2
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_xenophile
		}
		modifier = { # DFEM
			exists = overlord
			has_loyalty > 0
			mult = value:ethics_from_overlord|ETHIC|xenophile|
		}
		modifier = {
			factor = 0.5
			is_inwards_perfection_empire = yes # STU
		}
		modifier = {
			factor = 0.33
			has_valid_civic = civic_fanatic_purifiers
		}
		modifier = {
			factor = 1.5
			is_playable = yes # STU
			allows_alien_leaders = yes
		}
		mult = value:xenophile_ethics_from_relations # DFEM
		# LS - Removed for performance
		#modifier = {
		#	factor = 1.5
		#	any_relation = {
		#		NOT = { is_same_species = root }
		#		is_subject = no
		#		has_migration_access = root
		#	}
		#}
		# LS - Removed for performance
		#modifier = {
		#	factor = 1.33
		#	any_relation = {
		#		NOT = { is_same_species = root }
		#		OR = {
		#			is_in_federation_with = root
		#			has_defensive_pact = root
		#			has_commercial_pact = root
		#		}
		#	}
		#}
		# LS - Removed for performance
		#modifier = {
		#	factor = 0.25
		#	#is_same_species = root # DFEM removes
		#	any_relation = {
		#		has_opinion_modifier = {
		#			who = root
		#			is_reverse = yes # DFEM
		#			modifier = opinion_genocidal_our_species
		#		}
		#	}
		#}
		# LS - Removed for performance
		#modifier = { # DFEM
		#	factor = 0.4
		#	any_relation = {
		#		has_opinion_modifier = {
		#			who = root
		#			modifier = opinion_genocidal
		#		}
		#	}
		#}
		# LS - Removed for performance
		#modifier = {
		#	factor = 0.5
		#	is_same_species = root
		#	any_relation = {
		#		NOT = { is_same_species = root }
		#		any_enslaved_species = {
		#			is_robotic = no
		#			is_same_species = root
		#		}
		#	}
		#}
		# Effects of indoctrination mission
		modifier = {
			factor = 20
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_xenophile }
			}
		}
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_xenophile }
			}
		}
		# DFEM - Check for any leader on the Council with Faction's Ethic.
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|xenophile|
		}
	}

	# from = planet
	pop_attraction = {
		base = 1

		modifier = { # DFEM
			factor = 0
			has_trait = trait_hive_mind
		}
		modifier = {
			factor = 2
			not = { is_same_species = root }
			has_citizenship_rights = no
			is_enslaved = no
		}
		modifier = {
			factor = 2.0
			is_enslaved = no
			fromfrom = {
				any_owned_pop = {
					not = { is_same_species = root }
					is_enslaved = no
					is_being_purged = no
					is_sapient = yes
					is_robot_pop = no
					NOT = { has_trait = trait_syncretic_proles }
				}
			}
		}
		modifier = {
			factor = 1.5
			from = {
				any_owned_species = {
					NOT = { is_same_species = root }
					OR = { # DFEM
						has_trait = "trait_charismatic"
						has_trait = "trait_crafted_smiles" # DFEM
					}
				}
			}
		}
		modifier = { # DFEM
			factor = 0.5
			has_trait = trait_necrophage
		}
		modifier = { # DFEM
			factor = 1.1
			from = {
				has_branch_office = yes
				has_holding = {
					holding = building_xeno_tourism_agency
					owner = branch_office_owner
				}
			}
		}
		modifier = { # DFEM - want necessities xenos have
			factor = 0.9
			is_same_species = owner
			owner = { is_xenophobe = no }
			pop_lacking_necessities = yes
		}
	}
}

## Fanatic Militarist
# Merge between OSA, Bug Branch
ethic_fanatic_militarist = {
	cost = 2
	category = "mil"
	category_value = 0

	use_for_pops = no

	regular_variant = ethic_militarist

	tags = {
		ETHIC_ALLOW_NO_RETREAT
	}

	country_modifier = {
		country_claim_influence_cost_mult = -0.3 # Bug Branch -0.2 -> -0.3
		ship_fire_rate_mult = 0.20 # Vanilla
		ship_armor_mult = 0.20 # OSA
		command_limit_mult = 0.2 # Bug Branch
		country_trust_growth = -0.5 # Bug Branch
	}

	# more common ethic
	random_weight = {
		base = 400 # Bug Branch 250 -> 400
	}
}

## Militarist
# Merge between DFEM, OSA, Bug Branch
ethic_militarist = {
	cost = 1
	category = "mil"
	category_value = 1

	fanatic_variant = ethic_fanatic_militarist

	tags = {
		ETHIC_ALLOW_NO_RETREAT
	}

	leader_background_job_weight = {
		knight_commander = 25
		enforcer = 25
		duelist = 25
		knight = 25
		soldier = 25
	}

	country_modifier = {
		country_claim_influence_cost_mult = -0.15 # Bug Branch -0.10 -> -0.15
		ship_fire_rate_mult = 0.10 # Vanilla
		ship_armor_mult = 0.10 # OSA
		command_limit_mult = 0.1 # Bug Branch
	}

	# more common ethic
	random_weight = {
		base = 275 # Bug Branch 150 -> 275
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_MILITARIST_POS
		trigger = {
			OR = {
				has_ethic = ethic_militarist
				has_ethic = ethic_fanatic_militarist
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_militarist
				has_ethic = ethic_fanatic_militarist
			}
			has_faction = imperialist
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_AT_WAR_POS_pemd # DFEM +pemd
		trigger = {
			is_at_war = yes
			country_has_high_war_exhaustion = no # DFEM
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_AT_WAR_WITH_RIVAL_POS
		trigger = {
			is_at_war = yes
			country_has_high_war_exhaustion = no
			any_war = {
				any_war_participant = {
					is_rival = root
					prev = { NOT = { is_war_participant = { side = root } } }
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_LOST_WAR_POS
		trigger = {
			recently_lost_war = yes
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_LOST_PLANETS_POS
		trigger = {
			any_relation = {
				any_owned_planet = {
					is_original_owner = root
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_OCCUPIED_PLANET_POS
		trigger = {
			any_owned_planet = {
				NOT = { is_controlled_by = root }
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_NEIGHBOR_RIVALS_POS
		trigger = {
			any_neighbor_country = {
				OR = {
					is_hostile_to = root # DFEM from -> root
					is_domineering_to = root # DFEM from -> root
					is_rival = root # DFEM from -> root
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_STRONG_POS
		trigger = {
			any_owned_species = {
				OR = {
					has_trait = "trait_strong"
					has_trait = "trait_very_strong"
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_EMPIRE_PEACEFUL_NEG
		trigger = {
			years_of_peace = {
				value > 20
				delay = 50
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_WEAK_NEG
		trigger = {
			any_owned_planet = { # DFEM changes to any_owned_planet
				any_owned_species = {
					has_trait = "trait_weak"
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_INWARDS_PERFECTION_NEG
		trigger = {
			is_inwards_perfection_empire = yes # STU
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_WARFED_POS
		trigger = {
			has_federation = yes
			federation = {
				has_federation_type = military_federation
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_DUELIST_POS_pemd
		trigger = {
			country_has_high_war_exhaustion = no
			num_assigned_jobs = {
				job = duelist
				value > 0
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_SOLDIER_POS_pemd
		trigger = {
			country_has_high_war_exhaustion = no
			num_assigned_jobs = {
				job = soldier
				value > 0
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_MILITARY_SUPERIOR_RIVAL_POS
		trigger = {
			any_rival_country = {
				is_neighbor_of = root
				relative_power = {
					who = root
					category = fleet
					value >= superior
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_OVERLORD_POS
		trigger = {
			is_subject = yes
			has_loyalty > 0
			overlord = { is_militarist = yes }
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_NO_WARS_NEG
		trigger = {
			has_policy_flag = no_wars
		}
	}

	# DFEM - Check for any leader on the Council with Faction's Ethic.
	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_militarist
				}
			}
		}
	}
	
	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_LACKING_NECESSITIES_POS
		trigger = {
			is_militarist = no
			OR = {
				AND = {
					has_deficit = food
					any_owned_species = {
						has_food_upkeep = yes
					}
				}
				AND = {
					has_deficit = minerals
					any_owned_species = {
						has_mineral_upkeep = yes
					}
				}
				has_deficit = consumer_goods
				any_owned_planet = {
					OR = {
						free_housing < 0
						free_amenities < 0
					}
				}
			}
		}
	}

	# from = planet
	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_playable = yes
				has_ethic = ethic_militarist
				has_ethic = ethic_fanatic_militarist
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = {
							OR = {
								has_ethic = ethic_fanatic_militarist
								has_ethic = ethic_militarist
							}
						}
					}
				}
			}
		}

		modifier = {
			factor = 2
			is_playable = yes # STU
			NOR = {
				has_ethic = ethic_militarist
				has_ethic = ethic_fanatic_militarist
			}
			has_faction = imperialist
		}
		modifier = {
			factor = 1.5
			has_federation = yes
			federation = {
				has_federation_type = military_federation
			}
		}

		modifier = {
			factor = 2
			has_ethic = ethic_militarist
		}

		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_militarist
		}

		modifier = { # DFEM
			exists = overlord
			has_loyalty > 0
			mult = value:ethics_from_overlord|ETHIC|militarist|
		}

		modifier = {
			factor = 0.33
			is_inwards_perfection_empire = yes # STU
		}

		modifier = {
			factor = 0.75
			is_playable = yes
			years_of_peace = {
				value > 20
				delay = 50
			}
		}
		modifier = {
			factor = 0.75
			is_playable = yes
			years_of_peace = {
				value > 40
				delay = 50
			}
		}
		modifier = {
			factor = 0.75
			is_playable = yes
			years_of_peace = {
				value > 60
				delay = 50
			}
		}
		modifier = {
			factor = 0.75
			is_playable = yes
			years_of_peace = {
				value > 80
				delay = 50
			}
		}
		modifier = {
			factor = 0.75
			is_playable = yes
			years_of_peace = {
				value > 100
				delay = 50
			}
		}

		modifier = { # DFEM
			factor = 2.0
			is_at_war = yes
			country_has_high_war_exhaustion = no
		}
		modifier = { # DFEM
			factor = 1.5
			is_at_war = yes
			country_has_high_war_exhaustion = no
			any_war = {
				any_war_participant = {
					is_rival = root
					prev = {
						NOT = {
							is_war_participant = {
								who = prev
								side = root
							}
						}
					}
				}
			}
		}
		modifier = { # DFEM
			factor = 2.0
			recently_lost_war = yes
		}
		modifier = { # DFEM
			factor = 1.5
			any_neighbor_country = {
				OR = {
					is_hostile_to = root
					is_domineering_to = root
					is_rival = root
				}
			}
		}
		modifier = { # DFEM
			factor = 1.25
			any_rival_country = {
				is_neighbor_of = root
				relative_power = {
					who = root
					category = fleet
					value >= superior
				}
			}
		}

		# Effects of indoctrination mission
		modifier = {
			factor = 20
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_militarist }
			}
		}
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_militarist }
			}
		}
		# LS - Removed for performance
		#modifier = {
		#	factor = 2 # DFEM 1.25 -> 2 - If the empire is losing planets, militarism should increase
		#	any_relation = {
		#		any_owned_planet = {
		#			is_original_owner = root
		#		}
		#	}
		#}
		modifier = { # DFEM
			factor = 0.75
			has_policy_flag = no_wars
		}

		# DFEM - Check for any leader on the Council with Faction's Ethic.
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|militarist|
		}
	}

	# from = planet
	pop_attraction = {
		base = 1

		modifier = { # DFEM
			factor = 0
			has_trait = trait_hive_mind
		}
		modifier = {
			factor = 2.0
			OR = {
				has_citizenship_rights = yes
				can_be_military_leader = yes
			}
			from = { owner = { is_at_war = yes } }
		}
		modifier = {
			factor = 2.0
			OR = {
				has_citizenship_rights = yes
				can_be_military_leader = yes
			}
			from = { owner = { recently_lost_war = yes } }
		}
		modifier = {
			factor = 1.5
			OR = {
				has_citizenship_rights = yes
				can_be_military_leader = yes
			}
			from = {
				owner = {
					any_neighbor_country = {
						from = { is_neighbor_of = prev }
						OR = {
							is_hostile_to = from.owner
							is_domineering_to = from.owner
							is_rival = from.owner
						}
					}
				}
			}
		}
		modifier = {
			factor = 1.1
			has_trait = "trait_strong"
		}
		modifier = {
			factor = 1.2
			has_trait = "trait_very_strong"
		}
		modifier = {
			factor = 0.75
			has_trait = "trait_weak"
		}
		modifier = {
			factor = 3.0
			from = {
				NOT = { is_controlled_by = from.owner }
			}
		}
		modifier = { # DFEM
			factor = 2
			has_job = duelist
			owner = { country_has_high_war_exhaustion = no }
		}
		modifier = { # DFEM
			factor = 1.25
			has_job = soldier
			owner = { country_has_high_war_exhaustion = no }
		}
		modifier = { # DFEM - want necessities foreigners have
			factor = 1.25
			is_same_species = owner
			owner = { is_militarist = no }
			pop_lacking_necessities = yes
		}
	}
}

## Fanatic Pacifist
# Merge between OSA, Bug Branch
ethic_fanatic_pacifist = {
	cost = 2
	category = "mil"
	category_value = 4

	category_opposite = yes

	regular_variant = ethic_pacifist

	use_for_pops = no

	tags = {
		ETHIC_DISALLOW_OFFENSIVE_WARS
		ETHIC_DISALLOW_FULL_BOMBARDMENT
	}

	country_modifier = {
		starbase_defensive_war_ship_build_speed_mult = 1.5 # OSA
		planet_colony_development_speed_mult = 1.5 # OSA
		#empire_size_pops_mult = -0.30 # Vanilla # LS - removed [Balance]
		planet_stability_add = 10 # Vanilla
		country_border_friction_mult = -0.4 # Bug Branch
		ship_home_territory_fire_rate_mult = 0.4 # Bug Branch
		country_naval_cap_mult = -0.1 # Bug Branch
		intel_encryption_add = 2 # LS [Balance]
	}

	random_weight = {
		base = 100 # Bug Branch 33 -> 100
	}
}

## Pacifist
# Merge between DFEM, OSA, Bug Branch
ethic_pacifist = {
	cost = 1
	category = "mil"
	category_value = 3

	category_opposite = yes

	fanatic_variant = ethic_fanatic_pacifist

	leader_background_job_weight = {
		healthcare = 25
		unifier = 25
		entertainer = 25
		artisan = 25
	}

	country_modifier = {
		starbase_defensive_war_ship_build_speed_mult = 0.75 # OSA
		planet_colony_development_speed_mult = 0.75 # OSA
		#empire_size_pops_mult = -0.15 # Vanilla # LS - removed [Balance]
		planet_stability_add = 5 # Vanilla
		country_border_friction_mult = -0.2 # Bug Branch
		ship_home_territory_fire_rate_mult = 0.2 # Bug Branch
		intel_encryption_add = 1 # LS [Balance]
	}

	tags = {
		ETHIC_DISALLOW_CONQUEST_WARS
		ETHIC_DISALLOW_FULL_BOMBARDMENT
	}

	random_weight = {
		base = 50 # Bug Branch 66 -> 50
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_PACIFIST_POS
		trigger = {
			OR = {
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
			}
			has_faction = prosperity
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_EMPIRE_PEACEFUL_POS
		trigger = {
			years_of_peace = {
				value > 20
				delay = 50
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_WAR_EXHAUSTION_POS
		trigger = {
			is_pacifist = no
			country_has_high_war_exhaustion = yes
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_INWARDS_PERFECTION_POS
		trigger = {
			is_inwards_perfection_empire = yes # STU
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_WEAK_POS
		trigger = {
			any_owned_planet = {
				any_owned_species = {
					has_trait = "trait_weak"
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_NEIGHBOR_RIVALS_NEG
		trigger = {
			any_neighbor_country = {
				OR = {
					is_hostile_to = from
					is_domineering_to = from
					is_rival = from
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FANATIC_PURIFIERS_NEG
		trigger = {
			has_valid_civic = civic_fanatic_purifiers
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_DUELIST_NEG
		trigger = {
			country_has_high_war_exhaustion = no
			num_assigned_jobs = {
				job = duelist
				value > 0
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_UNRESTRICTED_WARS_NEG
		trigger = {
			has_policy_flag = unrestricted_wars
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_NON_AGGRESSION_PACTS_POS
		trigger = {
			num_non_aggression_pacts > 0
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_OVERLORD_POS
		trigger = {
			is_subject = yes
			has_loyalty > 0
			overlord = { is_pacifist = yes }
		}
	}

	# DFEM - Check for any leader on the Council with Faction's Ethic.
	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_pacifist
				}
			}
		}
	}

	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_playable = yes
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = {
							OR = {
								has_ethic = ethic_fanatic_pacifist
								has_ethic = ethic_pacifist
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 2
			is_playable = yes # DFEM
			NOR = {
				has_ethic = ethic_pacifist
				has_ethic = ethic_fanatic_pacifist
			}
			has_faction = prosperity
		}
		modifier = {
			factor = 1.5
			is_inwards_perfection_empire = yes
		}
		modifier = {
			factor = 0.5
			has_valid_civic = civic_fanatic_purifiers
		}
		modifier = {
			factor = 2
			has_ethic = ethic_pacifist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_pacifist
		}
		modifier = { # DFEM
			exists = overlord
			has_loyalty > 0
			mult = value:ethics_from_overlord|ETHIC|pacifist|
		}
		modifier = {
			factor = 1.33
			is_playable = yes
			years_of_peace = {
				value > 20
				delay = 50
			}
		}
		modifier = {
			factor = 1.33
			is_playable = yes
			years_of_peace = {
				value > 40
				delay = 50
			}
		}
		modifier = {
			factor = 1.33
			is_playable = yes
			years_of_peace = {
				value > 60
				delay = 50
			}
		}
		modifier = {
			factor = 1.33
			is_playable = yes
			years_of_peace = {
				value > 80
				delay = 50
			}
		}
		modifier = {
			factor = 1.33
			is_playable = yes
			years_of_peace = {
				value > 100
				delay = 50
			}
		}
		# Effects of indoctrination mission
		modifier = {
			factor = 20
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_pacifist }
			}
		}
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_pacifist }
			}
		}
		modifier = { # DFEM
			factor = 0.75
			has_policy_flag = unrestricted_wars
		}
		# DFEM - Check for any leader on the Council with Faction's Ethic.
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|pacifist|
		}
		mult = value:pacifist_ethics_from_pacts
	}

	# from = planet
	pop_attraction = {
		base = 1

		modifier = { # DFEM
			factor = 0
			has_trait = trait_hive_mind
		}
		modifier = { # DFEM
			factor = 1.1
			has_trait = "trait_weak"
		}
		modifier = {
			factor = 0.5
			OR = {
				has_citizenship_rights = yes
				can_be_military_leader = yes
			}
			from = {
				owner = {
					any_neighbor_country = {
						from = { is_neighbor_of = prev }
						OR = {
							is_hostile_to = from.owner
							is_domineering_to = from.owner
							is_rival = from.owner
						}
					}
				}
			}
		}
		modifier = { # DFEM
			factor = 0.1
			has_job = duelist
			owner = { country_has_high_war_exhaustion = no }
		}
		modifier = { # DFEM
			factor = 2.0
			NOT = {
				has_military_service_type = { type = military_service_none }
			}
			from = {
				owner = {
					is_pacifist = no
					country_has_high_war_exhaustion = yes
				}
			}
		}
		modifier = { # DFEM - want necessities foreigners have
			factor = 0.9
			is_same_species = owner
			owner = { is_militarist = no }
			pop_lacking_necessities = yes
		}
	}
}

## Fanatic Spiritualist
# Merge between OSA, Bug Branch
ethic_fanatic_spiritualist = {
	cost = 2
	category = "spi"
	category_value = 0

	regular_variant = ethic_spiritualist

	use_for_pops = no

	tags = {
		ETHIC_ALLOWS_TEMPLE
		ETHIC_DISALLOW_AI
		ETHIC_MORE_ATTRACTIVE # Bug Branch
	}

	country_modifier = {
		country_unity_produces_mult = 0.30 # OSA 0.20 -> 0.30
		edicts_upkeep_mult= -0.20 # Vanilla
		edicts_cost_mult= -0.20 # Vanilla
		pop_amenities_usage_mult = -0.2	# Bug Branch
		pop_resettlement_cost_mult = 0.2 # Bug Branch
	}

	random_weight = {
		base = 250 # Bug Branch 150 -> 250
	}
}

## Spiritualist
# Merge between DFEM, OSA, Bug Branch
ethic_spiritualist = {
	cost = 1
	category = "spi"
	category_value = 1

	fanatic_variant = ethic_fanatic_spiritualist

	tags = {
		ETHIC_ALLOWS_TEMPLE
		ETHIC_DISALLOW_AI
		ETHIC_MORE_ATTRACTIVE # Bug Branch
	}

	leader_background_job_weight = {
		high_priest = 25
		priest = 25
		death_priest = 25
		telepath = 25
		death_chronicler = 25
		necro_apprentice = 25
		preacher = 25
		mortal_initiate = 25
	}

	country_modifier = {
		country_unity_produces_mult = 0.15 # OSA 0.10 -> 0.15
		edicts_upkeep_mult = -0.10 # Vanilla
		edicts_cost_mult = -0.10 # Vanilla
		pop_amenities_usage_mult = -0.1 # Bug Branch
	}

	random_weight = {
		base = 175 # Bug Branch 100 -> 175
	}

	pop_attraction_tag = {
		desc = 	POP_ATTRACTION_SPIRITUALIST_POS
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			has_faction = traditionalist
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_PSIONICS_POS
		trigger = {
			OR = {
				has_technology = "tech_telepathy"
				has_technology = "tech_psionic_theory"
				has_ascension_perk = ap_mind_over_matter # DFEM
				is_shroudwalker_apprentice_empire = yes # DFEM
				has_tradition = tr_psionics_psionic_assimilation # DFEM
				any_owned_species = { # DFEM
					OR = {
						has_trait = trait_latent_psionic
						has_trait = trait_psionic
					}
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_SPIRITUALIST_DIPLOMACY_POS
		trigger = {
			any_relation = {
				OR = {
					is_in_federation_with = root
					has_defensive_pact = root
					has_commercial_pact = root
					AND = {
						is_subject = no
						has_migration_access = root
					}
				}
				OR = {
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_OVERLORD_POS
		trigger = {
			is_subject = yes
			has_loyalty > 0
			overlord = { is_spiritualist = yes }
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_SPIRITUALIST_OVERLORD_POS
		trigger = {
			is_subject = yes
			overlord = {
				OR = {
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_ROBOTS_POS
		trigger = {
			AND = {
				any_owned_species = {
					is_robotic = yes
				}
				owner = {
					is_bugged_machine_cult = no
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_ROBOTS_NEG
		trigger = {
			any_owned_species = {
				is_robotic = yes
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_ROBOT_RIGHTS_NEG
		trigger = {
			has_policy_flag = ai_full_rights
			owner = {
				is_bugged_machine_cult = no
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_PRIESTS_POS
		trigger = {
			OR = {
				num_assigned_jobs = {
					job = priest
					value > 0
				}
				num_assigned_jobs = {
					job = high_priest
					value > 0
				}
				num_assigned_jobs = {
					job = death_priest
					value > 0
				}
				num_assigned_jobs = {
					job = preacher
					value > 0
				}
			}
		}
	}
	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_ROBOTICIST_NEG
		trigger = {
			num_assigned_jobs = {
				job = roboticist
				value > 0
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_SPIFED_POS
		trigger = {
			has_federation = yes
			federation = {
				has_federation_type = spiritualist_federation
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_SPIFED_PERK_POS
		trigger = {
			has_federation = yes
			federation = {
				has_federation_type = spiritualist_federation
				has_federation_perk = spiritualist_envoys_1
			}
			any_envoy = {
				has_envoy_task = { task = federation }
			}
		}
	}
	
    pop_attraction_tag = {
        desc = POP_ATTRACTION_MECHANIST_POS
        trigger = {
            has_origin = origin_mechanists
			owner = {
				is_bugged_machine_cult = yes
			}
        }
    }    

    pop_attraction_tag = {
        desc = POP_ATTRACTION_CYBORGS_POS
        trigger = {
            any_owned_species = {
                has_trait = trait_cybernetic
            }
			owner = {
				is_bugged_machine_cult = yes
			}
        }
    }

    pop_attraction_tag = {
        desc = POP_ATTRACTION_ROBOTS_POS
        trigger = {
            any_owned_species = {
                is_robotic = yes
            }
			owner = {
				is_bugged_machine_cult = yes
			}
        }
    }

    pop_attraction_tag = {
        desc = POP_ATTRACTION_ROBOT_RIGHTS_POS
        trigger = {
            has_policy_flag = ai_full_rights
			owner = {
				is_bugged_machine_cult = yes
			}
        }
    }

	# DFEM - Check for any leader on the Council with Faction's Ethic.
	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_spiritualist
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_BETRAYED_BY_CREATORS_NEG
		trigger = {
			is_materialist = no
			has_origin = origin_clone_army
			OR = {
				has_modifier = honorable_leadership
				has_modifier = dishonorable_leadership
			}
		}
	}
	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_DISAPPOINTING_GOD_NEG
		trigger = {
			is_materialist = no
			has_origin = origin_toxic_knights
			OR = {
				has_modifier = despair_of_the_knightly_order
				AND = {
					has_relic = r_toxic_god
					NOT = { has_country_flag = quest_complete_achievement }
				}
			}
		}
	}



	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_playable = yes
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = {
							OR = {
								has_ethic = ethic_fanatic_spiritualist
								has_ethic = ethic_spiritualist
							}
						}
					}
				}
			}
		}
		# Effects of indoctrination mission
		modifier = {
			factor = 20
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_spiritualist }
			}
		}
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_spiritualist }
			}
		}
		modifier = {
			factor = 2
			is_playable = yes # STU
			NOR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			has_faction = traditionalist
		}
		modifier = { # DFEM
			factor = 1.5
			has_federation = yes
			federation = {
				has_federation_type = spiritualist_federation
			}
		}
		modifier = { # DFEM
			factor = value:ethics_from_federation_envoys
			has_federation = yes
			federation = {
				has_federation_type = spiritualist_federation
				has_federation_perk = spiritualist_envoys_1
			}
		}
		modifier = {
			factor = 2 # DFEM 2.4 -> 2
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 3 # DFEM 3.6 -> 3
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = 1.1 # DFEM 1.25 -> 1.1
			is_playable = yes
			has_technology = "tech_psionic_theory"
		}
		modifier = {
			factor = 1.5
			is_playable = yes
			has_ascension_perk = ap_mind_over_matter
		}
		modifier = {
			factor = 1.5
			is_playable = yes
			OR = { # LS
				has_ascension_perk = ap_transcendence # Vanilla
				has_tradition = tr_psionics_psionic_assimilation # DFEM
			}
		}
		modifier = {
			factor = 0.75
			is_playable = yes
			has_policy_flag = ai_full_rights
			is_bugged_machine_cult = no
		}
		modifier = { # DFEM
			exists = overlord
			has_loyalty > 0
			mult = value:ethics_from_overlord|ETHIC|spiritualist|
		}
		modifier = {
            		factor = 1.25
            		is_country_type = default
            		has_policy_flag = ai_full_rights
           		is_bugged_machine_cult = yes
        	}
		modifier = {
			factor = 2.0
			is_subject = yes
			overlord = {
				OR = {
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
				}
			}
		}
		# LS - Removed for performance
		#modifier = {
		#	factor = 1.5
		#	any_relation = {
		#		OR = {
		#			is_in_federation_with = root
		#			has_defensive_pact = root
		#			has_commercial_pact = root
		#		}
		#		OR = {
		#			has_ethic = ethic_spiritualist
		#			has_ethic = ethic_fanatic_spiritualist
		#		}
		#	}
		#}
		# LS - Removed for performance
		#modifier = {
		#	factor = 2.0
		#	any_relation = {
		#		is_subject = no
		#		has_migration_access = root
		#		OR = {
		#			has_ethic = ethic_spiritualist
		#			has_ethic = ethic_fanatic_spiritualist
		#		}
		#	}
		#}
		# DFEM - Check for any leader on the Council with Faction's Ethic.
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|spiritualist|
		}
		mult = value:spiritualist_ethics_from_relations
		modifier = { # DFEM
			factor = 0.5
			is_materialist = no
			OR = {
				has_modifier = honorable_leadership
				has_modifier = dishonorable_leadership
				has_modifier = despair_of_the_knightly_order
				AND = {
					has_relic = r_toxic_god
					NOT = { has_country_flag = quest_complete_achievement }
				}
			}
		}
	}

	# from = planet
	pop_attraction = {
		base = 1

		modifier = { # DFEM
			factor = 0
			has_trait = trait_hive_mind
		}
		modifier = { # DFEM
			factor = 1.1
			has_trait = trait_latent_psionic
		}
		modifier = { # DFEM
			factor = 1.2
			has_trait = trait_psionic
		}
		modifier = {
			factor = 0.25
			is_robot_pop = yes
		}
		modifier = { # DFEM
			factor = 2
			OR = {
				has_job = priest
				has_job = high_priest
				has_job = death_priest
				has_job = mortal_initiate
				has_job = preacher
			}
		}
		modifier = { # DFEM
			factor = 0.25
			has_job = roboticist
		}
	}
}

## Fanatic Materialist
# Merge between OSA, Bug Branch
ethic_fanatic_materialist = {
	cost = 2
	category = "spi"
	category_value = 4

	regular_variant = ethic_materialist

	category_opposite = yes

	use_for_pops = no

	tags = {
		ETHIC_ALLOWS_ACADEMIC_PRIVILEGE
		ETHIC_DISALLOW_BAN_AI
		ETHIC_DISALLOW_BAN_ROBOTS
	}

	country_modifier = {
		country_physics_tech_research_speed	= 0.15 # Bug Branch
		country_engineering_tech_research_speed	= 0.15 # Bug Branch
		planet_pops_robotics_upkeep_mult = -0.2 # Vanilla
		all_technology_research_speed = 0.15 # OSA 0.10 -> 0.15
		pop_happiness = -0.1 # Bug Branch
	}

	random_weight = {
		base = 300 # Bug Branch 150 -> 300
	}
}

## Materialist
# Merge between DFEM, OSA, Bug Branch
ethic_materialist = {
	cost = 1
	category = "spi"
	category_value = 3

	fanatic_variant = ethic_fanatic_materialist

	category_opposite = yes

	tags = {
		ETHIC_ALLOWS_ACADEMIC_PRIVILEGE
		ETHIC_DISALLOW_BAN_AI
		ETHIC_DISALLOW_BAN_ROBOTS
	}

	leader_background_job_weight = {
		head_researcher = 25
		merchant = 25
		researcher = 25
		chemist = 25
		translucer = 25
		gas_refiner = 25
		roboticist = 25
		bluelotus_technician = 25
		foundry = 25
		catalytic_technician = 25
		artificer = 25
		reassigner = 25
	}

	country_modifier = {
		country_physics_tech_research_speed	= 0.07 # Bug Branch
		country_engineering_tech_research_speed	= 0.07 # Bug Branch
		planet_pops_robotics_upkeep_mult = -0.1 # Vanilla
		all_technology_research_speed = 0.075 # OSA 0.05 -> 0.075
	}

	random_weight = {
		base = 225 # Bug Branch 100 -> 225
	}
	pop_attraction_tag = {
		desc = POP_ATTRACTION_MATERIALIST_POS
		trigger = {
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
			has_faction = technologist
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_MECHANIST_POS
		trigger = {
			has_origin = origin_mechanists
			owner = {
				is_bugged_machine_cult = no
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_CYBORGS_POS
		trigger = {
			any_owned_species = {
				has_trait = trait_cybernetic
			}
			owner = {
				is_bugged_machine_cult = no
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_ROBOTS_POS
		trigger = {
			any_owned_species = {
				is_robotic = yes
			}
			owner = {
				is_bugged_machine_cult = no
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_ROBOT_RIGHTS_POS
		trigger = {
			has_policy_flag = ai_full_rights
			owner = {
				is_bugged_machine_cult = no
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_OVERLORD_POS
		trigger = {
			is_subject = yes
			has_loyalty > 0
			overlord = { is_materialist = yes }
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_MATERIALIST_RESEARCH_POS
		trigger = {
			any_relation = {
				root = { has_research_agreement = prev }
				OR = {
					has_ethic = ethic_materialist
					has_ethic = ethic_fanatic_materialist
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_MATERIALIST_DIPLOMACY_POS
		trigger = {
			any_relation = {
				OR = {
					is_in_federation_with = root
					has_defensive_pact = root
					has_commercial_pact = root
					AND = {
						is_subject = no
						has_migration_access = root
					}
				}
				is_materialist = yes
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_NATURAL_SCIENTISTS_POS
		trigger = {
			any_owned_species = {
				OR = {
					has_trait = "trait_natural_sociologists"
					has_trait = "trait_natural_engineers"
					has_trait = "trait_natural_physicists"
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_PRIESTS_NEG
		trigger = {
			OR = {
				num_assigned_jobs = {
					job = priest
					value > 0
				}
				num_assigned_jobs = {
					job = high_priest
					value > 0
				}
				num_assigned_jobs = {
					job = death_priest
					value > 0
				}
				num_assigned_jobs = {
					job = preacher
					value > 0
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_RESEARCHFED_POS
		trigger = {
			has_federation = yes
			federation = {
				has_federation_type = research_federation
			}
		}
	}

	# DFEM - Check for any leader on the Council with Faction's Ethic.
	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_materialist
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_MATERIALIST_JOB_POS
		trigger = {
			any_owned_planet = {
				OR = {
					num_assigned_jobs = {
						job = researcher
						value > 0
					}
					num_assigned_jobs = {
						job = head_researcher
						value > 0
					}
					num_assigned_jobs = {
						job = overlord_academic
						value > 0
					}
					num_assigned_jobs = {
						job = dimensional_portal_researcher
						value > 0
					}
					num_assigned_jobs = {
						job = space_time_anomaly_researcher
						value > 0
					}
					num_assigned_jobs = {
						job = roboticist
						value > 0
					}
					num_assigned_jobs = {
						job = robot_caretaker
						value > 0
					}
				}
			}
		}
	}

	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_BETRAYED_BY_CREATORS_POS
		trigger = {
			is_materialist = no
			has_origin = origin_clone_army
			OR = {
				has_modifier = honorable_leadership
				has_modifier = dishonorable_leadership
			}
		}
	}
	pop_attraction_tag = { # DFEM
		desc = POP_ATTRACTION_DISAPPOINTING_GOD_POS
		trigger = {
			is_materialist = no
			has_origin = origin_toxic_knights
			OR = {
				has_modifier = despair_of_the_knightly_order
				AND = {
					has_relic = r_toxic_god
					NOT = { has_country_flag = quest_complete_achievement }
				}
			}
		}
	}

	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_playable = yes
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = {
							OR = {
								has_ethic = ethic_fanatic_materialist
								has_ethic = ethic_materialist
							}
						}
					}
				}
			}
		}
		# Effects of indoctrination mission
		modifier = {
			factor = 20
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_materialist }
			}
		}
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_materialist }
			}
		}
		modifier = {
			factor = 2
			is_playable = yes # STU
			NOR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
			has_faction = technologist
		}
		modifier = {
			factor = 1.5
			has_federation = yes
			federation = {
				has_federation_type = research_federation
			}
		}
		modifier = {
			factor = 2
			has_ethic = ethic_materialist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_materialist
		}
		modifier = {
			factor = 1.25
			has_origin = origin_mechanists
		}
		modifier = {
			factor = 1.25
			is_playable = yes
			has_policy_flag = ai_full_rights
			is_bugged_machine_cult = no
		}
		modifier = { # DFEM
			exists = overlord
			has_loyalty > 0
			mult = value:ethics_from_overlord|ETHIC|materialist|
		}
		modifier = {
			factor = 1.33
			any_relation = {
				root = { has_research_agreement = prev }
				OR = {
					has_ethic = ethic_materialist
					has_ethic = ethic_fanatic_materialist
				}
			}
		}
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|materialist|
		}
		mult = value:materialist_ethics_from_relations
		modifier = { # DFEM
			factor = 1.5
			is_materialist = no
			OR = {
				has_modifier = honorable_leadership
				has_modifier = dishonorable_leadership
				has_modifier = despair_of_the_knightly_order
				AND = {
					has_relic = r_toxic_god
					NOT = { has_country_flag = quest_complete_achievement }
				}
			}
		}
	}

	# from = planet
	pop_attraction = {
		base = 1
		modifier = { # DFEM
			factor = 0
			has_trait = trait_hive_mind
		}
		modifier = {
			factor = 0.1 # DFEM 0 -> 0.1
			OR = {
				has_job = priest
				has_job = high_priest
				has_job = death_priest # DFEM
				has_job = mortal_initiate # DFEM
				has_job = preacher # DFEM
			}
		}
		modifier = {
			factor = 2.0
			is_robot_pop = yes
			owner = { is_bugged_machine_cult = no } 
		}
		modifier = {
			factor = 1.5
			has_trait = "trait_cybernetic"
		}
		modifier = {
			factor = 1.25
			is_robot_pop = no
			from = {
				any_owned_species = {
					is_robotic = yes
				}
			}
			owner = { is_bugged_machine_cult = no }
		}
		modifier = {
			factor = 1.25
			has_trait = "trait_natural_engineers"
		}
		modifier = {
			factor = 1.25
			has_trait = "trait_natural_sociologists"
		}
		modifier = {
			factor = 1.25
			has_trait = "trait_natural_physicists"
		}
		modifier = { # DFEM
			factor = 1.15
			OR = {
				has_job = researcher
				has_job = head_researcher
				has_job = overlord_academic
				has_job = dimensional_portal_researcher
				has_job = space_time_anomaly_researcher
				has_job = roboticist
			}
		}
		modifier = { # DFEM
			factor = 1.5
			has_job = robot_caretaker
		}
	}
}

## Fanatic Cooperative [Bug Branch]
# Bug Branch version
ethic_fanatic_cooperative = {
	cost = 2
	category = "soc"
	category_value = 0

	
	use_for_pops = no
	
	regular_variant = ethic_cooperative
	
	country_modifier = {
		diplo_weight_mult = 0.20 # LS [Balance]
	    pop_cat_worker_happiness = 0.15
		planet_housing_mult = 0.30 # LS [Balance]
		#pop_housing_usage_mult = -0.2 # LS - removed [Balance]
		#empire_size_pops_mult = -0.2 # LS - removed [Balance]
		country_society_tech_research_speed	= 0.1 
		pop_cat_worker_political_power = 1			
		trade_value_mult = -0.1
	}	
		
	tags = {
		FANATIC_ETHIC_ALLOWS_UTOPIA
	}	
	
	random_weight = {
		base = 250
	}	
	
}

## Cooperative [Bug Branch]
# Bug Branch version
ethic_cooperative = {
	cost = 1
	category = "soc"
	category_value = 1

	fanatic_variant = ethic_fanatic_cooperative
	
	country_modifier = {
		diplo_weight_mult = 0.10 # LS [Balance]
	    pop_cat_worker_happiness = 0.075
		planet_housing_mult = 0.15 # LS [Balance]
		#pop_housing_usage_mult = -0.1 # LS - Removed [Balance]
		#empire_size_pops_mult = -0.1 # LS - Removed [Balance]
		country_society_tech_research_speed	= 0.05 
		pop_cat_worker_political_power = 0.5			
	}	
	
	tags = {
		COOPERATIVE_ETHIC_ALLOWS_WELFARE
	}

	random_weight = {
		base = 175
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_BUGGED_COOPERATIVE_POS
		trigger = {
			OR = {
				has_ethic = ethic_cooperative
				has_ethic = ethic_fanatic_cooperative
			}
		}
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_cooperative
				has_ethic = ethic_fanatic_cooperative
			}
			has_faction = socialist
		}		
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_CIVIC_COOPERATIVE_POS
		trigger = {
			OR = {
				is_bugged_industrial_democracy = yes
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_RULER_TRAIT_FERTILITY_POS
		trigger = {
			exists = ruler
			ruler = { has_trait = "trait_ruler_fertility_preacher" }
		}		
	}	


	pop_attraction_tag = {
		desc = POP_ATTRACTION_CONSUMER_GOODS_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					OR = {
						has_living_standard = { type = living_standard_utopian }
						has_living_standard = { type = living_standard_good }
						has_living_standard = { type = living_standard_shared_burden }
					}
				}
			}
		}
	}	

	pop_attraction_tag = {
		desc = POP_ATTRACTION_SOCIOLOGIST_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_natural_sociologists"
				}
			}
		}
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_COMMUNAL_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_communal"
				}
			}
		}
	}		
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_WASTEFUL_NEG
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_wasteful"
				}
			}
		}
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_cooperative
				}
			}
		}
	}

	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_country_type = default
				has_ethic = ethic_cooperative
				has_ethic = ethic_fanatic_cooperative
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = { 
							OR = {
								has_ethic = ethic_fanatic_cooperative
								has_ethic = ethic_cooperative
							}							
						}				
					}
				}				
			}
		}
		# Effects of indoctrination mission
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_cooperative }
			}
		}
		modifier = {
			factor = 5
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_cooperative }
			}
		}	
		modifier = {
			factor = 2
			NOR = {
				has_ethic = ethic_cooperative
				has_ethic = ethic_fanatic_cooperative
			}
			has_faction = socialist
		}	
		modifier = {
			factor = 2
			has_ethic = ethic_cooperative
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_cooperative
		}
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|cooperative|
		}
	}

	# from = planet
	pop_attraction = {
		base = 1
		modifier = {
			factor = 1.5
			has_trait = "trait_natural_sociologists"
		}
		modifier = {
			factor = 1.5
			has_trait = "trait_conservational"
		}	
		modifier = {
			factor = 0.75
			has_trait = "trait_wasteful"
		}				
		
		modifier = {
			factor = 1.25
			OR = {
			    has_living_standard = { type = living_standard_shared_burden }
				has_living_standard = { type = living_standard_utopian }
				has_living_standard = { type = living_standard_good }
			}
		}			
		
	}	
	

}

## Fanatic Competitive
# Bug Branch version
ethic_fanatic_competitive = {
	cost = 2
	category = "soc"
	category_value = 4
	
	category_opposite = yes
	
	use_for_pops = no
	
	regular_variant = ethic_competitive

    country_modifier = { 
		trade_value_mult = 0.2
		country_trade_fee = -0.07
		species_leader_exp_gain = 0.2
        pop_cat_worker_political_power = -1
		planet_crime_mult = 0.25
    }

	random_weight = {
		base = 300
	}	
	
	tags = {
		ELITIST_ETHIC_ALLOWS_STRATIFIED
	}	

}

## Competitive
# Bug Branch version
ethic_competitive = {
	cost = 1
	category = "soc"
	category_value = 3
	
	category_opposite = yes
	
    	fanatic_variant = ethic_fanatic_competitive		
	
	country_modifier = {
		trade_value_mult = 0.1
		country_trade_fee = -0.03
		species_leader_exp_gain = 0.1
		pop_cat_worker_political_power = -0.5
	}		
	
	tags = {

	}

	random_weight = {
		base = 225
	}	
	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_BUGGED_COMPETITIVE_POS
		trigger = {
			OR = {
				has_ethic = ethic_competitive
				has_ethic = ethic_fanatic_competitive
			}
		}
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_competitive
				has_ethic = ethic_fanatic_competitive
			}
			has_faction = capitalist
		}		
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_FREE_MARKET_POS
		trigger = {
			OR = {
				has_policy_flag = "economic_stance_bugged_free_market"
			}
		}
	}	

	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_competitive
				}
			}
		}
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_RULER_TRAIT_INVESTOR_POS
		trigger = {
			exists = ruler
			ruler = { has_trait = "trait_ruler_investor" }
		}		
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_CIVIC_COMPETITIVE_POS
		trigger = {
			OR = {
                is_bugged_spirit_of_freedom = yes
			}
		}
	}	

	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_CONSUMER_GOODS_NEG
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					OR = {
						has_living_standard = { type = living_standard_utopian }
						has_living_standard = { type = living_standard_good }
						has_living_standard = { type = living_standard_shared_burden }
					}
				}
			}
		}
	}		

	pop_attraction_tag = {
		desc = POP_ATTRACTION_THRIFTY_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_thrifty"
				}
			}
		}
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_WASTEFUL_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_wasteful"
				}
			}
		}
	}		
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_SOLITARY_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_solitary"
				}
			}
		}
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_CONSERVATIONIST_NEG
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_conservational"
				}
			}
		}
	}		
	
	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_country_type = default
				has_ethic = ethic_competitive
				has_ethic = ethic_fanatic_competitive
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = { 
							OR = {
								has_ethic = ethic_fanatic_competitive
								has_ethic = ethic_competitive
							}							
						}				
					}
				}				
			}
		}
		# Effects of indoctrination mission
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_competitive }
			}
		}
		modifier = {
			factor = 5
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_competitive }
			}
		}	
		modifier = {
			factor = 2
			NOR = {
				has_ethic = ethic_competitive
				has_ethic = ethic_fanatic_competitive
			}
			has_faction = capitalist
		}	
		modifier = {
			factor = 2
			has_ethic = ethic_competitive
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_competitive
		}
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|competitive|
		}
	}

	# from = planet
	pop_attraction = {
		base = 1
		modifier = {
			factor = 1.5
			has_trait = "trait_thrifty"
		}
		modifier = {
			factor = 0.75
			has_trait = "trait_conservational"
		}	
		modifier = {
			factor = 1.5
			has_trait = "trait_wasteful"
		}			

		modifier = {
			factor = 0.75
			OR = {
				has_living_standard = { type = living_standard_utopian }
				has_living_standard = { type = living_standard_good }
				has_living_standard = { type = living_standard_shared_burden }
			}
		}		
		
	}		
	

}

## Fanatic Ecocentric
# Bug Branch version
ethic_fanatic_ecocentric = {
	cost = 2
	category = "eco"
	category_value = 0

	regular_variant = ethic_ecocentric
	
	use_for_pops = no	
	
	country_modifier = {	
		pop_environment_tolerance = 0.1
		planet_pops_consumer_goods_upkeep_mult = -0.2
		planet_structures_upkeep_mult = -0.3
		pop_growth_speed = -0.10
	}
	
	tags = {
	    BLOCKERS_BENEFITS
		WASTE_RECYCLING
		NATURE_RESERVE
	}	

	random_weight = {
		base = 150
	}	
	

}

## Ecocentric
# Bug Branch version
ethic_ecocentric = {
	cost = 1
	category = "eco"
	category_value = 1
	
    fanatic_variant = ethic_fanatic_ecocentric
	
	country_modifier = {
	    pop_environment_tolerance = 0.05
		planet_pops_consumer_goods_upkeep_mult = -0.1
		planet_structures_upkeep_mult = -0.15
	}
	
	tags = {
	    BLOCKERS_BENEFITS
		WASTE_RECYCLING
		NATURE_RESERVE
	}		

	random_weight = {
		base = 100
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_BUGGED_ECOCENTRIC_POS
		trigger = {
			OR = {
				has_ethic = ethic_ecocentric
				has_ethic = ethic_fanatic_ecocentric
			}
		}
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_ecocentric
				has_ethic = ethic_fanatic_ecocentric
			}
			has_faction = environmentalist
		}		
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_RULER_TRAIT_WORLD_SHAPER_POS
		trigger = {
			exists = ruler
			ruler = { has_trait = "trait_ruler_world_shaper" }
		}		
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_CIVIC_ECOCENTRIC_POS
		trigger = {
			OR = {
				has_valid_civic = civic_environmentalist
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_TRADITION_ECOCENTRIC_POS
		trigger = {
			OR = {
                has_tradition = tr_harmony_adopt
			}
		}		
	}	

	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_AGRARIAN_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					OR = {
						has_trait = "trait_agrarian"
					}
				}
			}
		}
	}
		

	pop_attraction_tag = {
		desc = POP_ATTRACTION_CONSERVATIONIST_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_conservational"
				}
			}
		}
	}		
	

	pop_attraction_tag = {
		desc = POP_ATTRACTION_ADAPTIVE_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					OR = {
						has_trait = "trait_adaptive"
						has_trait = "trait_extremely_adaptive"
					}
				}
			}
		}
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_WASTEFUL_NEG
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_wasteful"
				}
			}
		}
	}	

	pop_attraction_tag = {
		desc = POP_ATTRACTION_INDUSTRIOUS_NEG
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_industrious"
				}
			}
		}
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_ecocentric
				}
			}
		}
	}
	
	# from = planet
	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_country_type = default
				has_ethic = ethic_ecocentric
				has_ethic = ethic_fanatic_ecocentric
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = { 
							OR = {
								has_ethic = ethic_fanatic_ecocentric
								has_ethic = ethic_ecocentric
							}							
						}				
					}
				}				
			}
		}			
		modifier = {
			factor = 2
			NOR = {
				has_ethic = ethic_ecocentric
				has_ethic = ethic_fanatic_ecocentric
			}
			has_faction = environmentalist
		}								
		modifier = {
			factor = 2
			has_ethic = ethic_ecocentric
		}		
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_ecocentric
		}
		# Effects of indoctrination mission
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_ecocentric }
			}
		}
		modifier = {
			factor = 5
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_ecocentric }
			}
		}
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|ecocentric|
		}	
	}
	
	# from = planet
	pop_attraction = {
		base = 1
		modifier = {
			factor = 1.2
			has_trait = "trait_adaptive"
		}
		modifier = {
			factor = 1.4
			has_trait = "trait_extremely_adaptive"
		}	
		modifier = {
			factor = 1.75
			has_trait = "trait_agrarian"
		}		
		modifier = {
			factor = 0.5
			has_trait = "trait_industrious"
		}
		modifier = {
			factor = 0.75
			has_trait = "trait_wasteful"
		}		
					
	}		

}

## Fanatic Anthropocentric
# Bug Branch version
ethic_fanatic_anthropocentric = {
	cost = 2
	category = "eco"
    category_value = 4

	
	category_opposite = yes
	
	regular_variant = ethic_anthropocentric
	
	use_for_pops = no		
	
	country_modifier = {
		country_food_produces_mult = 0.2
		country_minerals_produces_mult = 0.15
		planet_max_districts_add = 2 # LS non-artificial -> all districts [Balance]
        pop_environment_tolerance = -0.20 # LS -0.10 -> -0.20
	}
	
	tags = {
		LITHOID_EMPIRE
		CANT_RECYCLE
		DEEP_CORE_MINING
	}	
	
	random_weight = {
		base = 400
	}	
	
}

## Anthropocentric
# Bug Branch version
ethic_anthropocentric = {
	cost = 1
	category = "eco"
	category_value = 3

	category_opposite = yes
	
	fanatic_variant = ethic_fanatic_anthropocentric
	
	country_modifier = {
		country_food_produces_mult = 0.1
		country_minerals_produces_mult = 0.07
		planet_max_districts_add = 1 # LS non-artificial -> all districts [Balance]
	}
	
	tags = {
		LITHOID_EMPIRE
		DEEP_CORE_MINING		
	}	
	
	random_weight = {
		base = 250
	}	

	pop_attraction_tag = {
		desc = POP_ATTRACTION_BUGGED_ANTHROPOCENTRIC_POS
		trigger = {
			OR = {
				has_ethic = ethic_anthropocentric
				has_ethic = ethic_fanatic_anthropocentric
			}
		}
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_anthropocentric
				has_ethic = ethic_fanatic_anthropocentric
			}
			has_faction = industrialist
		}		
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_RULER_TRAIT_INDUSTRIALIST_POS
		trigger = {
			exists = ruler
			ruler = { has_trait = "trait_ruler_industrialist" }
		}		
	}	
	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_FREE_MARKET_POS
		trigger = {
			OR = {
				has_policy_flag = "economic_stance_bugged_free_market"
			}
		}
	}

	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_CIVIC_ANTHROPOCENTRIC_POS
		trigger = {
			is_bugged_industrial_mechanization = yes
		}
	}

	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_INDUSTRIOUS_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					OR = {
						has_trait = "trait_industrious"
					}
				}
			}
		}
	}
		
		
	pop_attraction_tag = {
		desc = POP_ATTRACTION_WASTEFUL_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_wasteful"
				}
			}
		}
	}	

	pop_attraction_tag = {
		desc = POP_ATTRACTION_ENGINEERS_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_natural_engineers"
				}
			}
		}
	}		

	pop_attraction_tag = {
		desc = POP_ATTRACTION_CONSERVATIONIST_NEG
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_conservational"
				}
			}
		}
	}		
	


	pop_attraction_tag = {
		desc = POP_ATTRACTION_AGRARIAN_NEG
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_agrarian"
				}
			}
		}
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_anthropocentric
				}
			}
		}
	}
	
	# from = planet
	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_country_type = default
				has_ethic = ethic_anthropocentric
				has_ethic = ethic_fanatic_anthropocentric
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = { 
							OR = {
								has_ethic = ethic_fanatic_anthropocentric
								has_ethic = ethic_anthropocentric
							}							
						}				
					}
				}				
			}
		}
			
		modifier = {
			factor = 2
			NOR = {
				has_ethic = ethic_anthropocentric
				has_ethic = ethic_fanatic_anthropocentric
			}
			has_faction = industrialist
		}			
			
		modifier = {
			factor = 2
			has_ethic = ethic_anthropocentric
		}
		
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_anthropocentric
		}

	
		# Effects of indoctrination mission
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_anthropocentric }
			}
		}
		modifier = {
			factor = 5
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_anthropocentric }
			}
		}
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|anthropocentric|
		}	
	}
	
	# from = planet
	pop_attraction = {
		base = 1
		
		modifier = {
			factor = 1.5
			has_trait = "trait_natural_engineers"
		}
		modifier = {
			factor = 1.3
			has_trait = "trait_wasteful"
		}		
		modifier = {
			factor = 1.75
			has_trait = "trait_industrious"
		}	
		modifier = {
			factor = 0.5
			has_trait = "trait_agrarian"
		}
		modifier = {
			factor = 0.75
			has_trait = "trait_conservational"
		}		
					
	}			
	
}

## Fanatic Elitist
# Bug Branch version
ethic_fanatic_elitist = {
	cost = 2
	category = "elt"
	category_value = 0
	
	use_for_pops = no
	
	regular_variant = ethic_elitist

	country_modifier = {
		species_leader_exp_gain = 0.2
		leader_age = 20
		planet_jobs_ruler_produces_mult = 0.2
		pop_cat_ruler_political_power = 1
		country_leader_pool_size = -1
	}
	
	tags = {
		ELITIST_ETHIC_ALLOWS_STRATIFIED	
		ETHIC_ALLOWS_SLAVERY
	}

	random_weight = {
		base = 300
	}	
	
}

## Elitist
# Bug Branch version
ethic_elitist = {
	cost = 1
	category = "elt"
    category_value = 1
	fanatic_variant = ethic_fanatic_elitist

	country_modifier = {
		species_leader_exp_gain = 0.1
		leader_age = 10
		planet_jobs_ruler_produces_mult = 0.1
		pop_cat_ruler_political_power = 0.5
	}
	
	tags = {
		ELITIST_ETHIC_ALLOWS_STRATIFIED
		ETHIC_ALLOWS_SLAVERY
	}	
	
	random_weight = {
		base = 225
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_BUGGED_ELITIST_POS
		trigger = {
			OR = {
				has_ethic = ethic_elitist
				has_ethic = ethic_fanatic_elitist
			}
		}
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_CIVIC_ELITIST_POS
		trigger = {
			has_valid_civic = civic_bugged_immutable_hierarchy
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_LIMITED_CITIZEN_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					is_same_species = root.owner 
					has_citizenship_type = { type = citizenship_limited country = root.owner }	
				}
			}
		}
	}		
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_elitist
				has_ethic = ethic_fanatic_elitist
			}
			has_faction = conservative
		}		
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_ENHANCED_LEADERS_POS
		trigger = {
				OR = {
					has_policy_flag = leader_enhancement_selected_lineages
					has_policy_flag = leader_enhancement_capacity_boosters
				}
		}
	}		

	pop_attraction_tag = {
		desc = POP_ATTRACTION_OLIGARCH_GOV_POS
		trigger = {
			has_election_type = oligarchic
		}
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_SLAVERY_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					is_robot_pop = no
					is_enslaved = yes
				}
			}
		}
	}	

	pop_attraction_tag = {
		desc = POP_ATTRACTION_TALENTED_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_talented"
				}
			}
		}
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_CONFORMIST_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_conformists"
				}
			}
		}
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_DEVIANTS_NEG
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_deviants"
				}
			}
		}
	}		
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_SLOW_LEARN_NEG
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_slow_learners"
				}
			}
		}
	}		
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_QUICK_LEARN_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_quick_learners"
				}
			}
		}
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_elitist
				}
			}
		}
	}
	
	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_country_type = default
				has_ethic = ethic_elitist
				has_ethic = ethic_fanatic_elitist
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = { 
							OR = {
								has_ethic = ethic_fanatic_elitist
								has_ethic = ethic_elitist
							}							
						}				
					}
				}				
			}
		}
		# Effects of indoctrination mission
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_elitist }
			}
		}
		modifier = {
			factor = 5
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_elitist }
			}
		}	
		modifier = {
			factor = 2
			NOR = {
				has_ethic = ethic_elitist
				has_ethic = ethic_fanatic_elitist
			}
			has_faction = conservative
		}
		modifier = {
			factor = 2
			has_ethic = ethic_elitist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_elitist
		}		
		modifier = {
			factor = 1.25
			if = {
				limit = { exists = root }
				root = {	
					NOT = {
						any_owned_pop = {
							is_same_species = root
							is_robot_pop = no
							is_enslaved = yes
						}				
					}
					any_owned_pop = {
						NOT = { is_same_species = root }
						is_robot_pop = no
						is_enslaved = yes
					}
				}
			}
		}
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|elitist|
		}
	}

	# from = planet
	pop_attraction = {
		base = 1
		
		modifier = {
			factor = 0.25
			is_enslaved = yes
		}
		modifier = {
			factor = 1.25
			has_trait = "trait_conformists"
		}
		
		modifier = {
			factor = 0.75
			has_trait = "trait_deviants"
		}		
	
	}	
	
}

## Fanatic Pluralist
# Bug Branch version
ethic_fanatic_pluralist = {
	cost = 2
	category = "elt"
    category_value = 4
	
	category_opposite = yes
	
	use_for_pops = no
	
    	regular_variant = ethic_pluralist	
	
	country_modifier = {
	    country_leader_cap_add = 2
		leaders_upkeep_mult = -0.5
		planet_crime_mult = -0.2
		pop_cat_specialist_political_power = 1
        leaders_cost_mult = 0.2
	}
	
	tags = {
		FANATIC_ETHIC_ALLOWS_UTOPIA
	}	

	random_weight = {
		base = 300
	}	
	
}

## Pluralist
# Bug Branch version
ethic_pluralist = {
	cost = 1
	category = "elt"
    category_value = 3
	
	category_opposite = yes
	
	fanatic_variant = ethic_fanatic_pluralist
		
	
	country_modifier = {
	    country_leader_cap_add = 1
		leaders_upkeep_mult = -0.25
		planet_crime_mult = -0.1
		pop_cat_specialist_political_power = 0.5
	}
	
	tags = {
		PLURALIST_ETHIC_ALLOWS_WELFARE
	}

	random_weight = {
		base = 225
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_BUGGED_PLURALIST_POS
		trigger = {
			OR = {
				has_ethic = ethic_pluralist
				has_ethic = ethic_fanatic_pluralist
			}
		}
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_SLAVERY_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					is_robot_pop = no
					is_enslaved = yes
				}
			}
		}
	}		
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_CIVIC_PLURALIST_POS
		trigger = {
			OR = {
				is_bugged_industrial_democracy = yes
			}
		}
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_FACTION_POS
		trigger = {
			NOR = {
				has_ethic = ethic_pluralist
				has_ethic = ethic_fanatic_pluralist
			}
			has_faction = populist
		}		
	}
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_DEMOCRATIC_GOV_POS
		trigger = {
			has_election_type = democratic
		}
	}	

	pop_attraction_tag = {
		desc = POP_ATTRACTION_SLOW_LEARN_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_slow_learners"
				}
			}
		}
	}	
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_QUICK_LEARN_POS
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_quick_learners"
				}
			}
		}
	}		
	
	pop_attraction_tag = {
		desc = POP_ATTRACTION_TALENTED_NEG
		trigger = {
			any_owned_planet = {
				any_owned_pop = {
					has_trait = "trait_talented"
				}
			}
		}
	}

	pop_attraction_tag = {
		desc = POP_ATTRACTION_REPRESENTED_ON_COUNCIL
		trigger = {
			owner = {
				any_owned_leader = {
					OR = {
						is_ruler = yes
						is_councilor = yes
					}
					has_ethic = ethic_pluralist
				}
			}
		}
	}

	country_attraction = {
		base = 1
		modifier = {
			factor = 0
			NOR = {
				is_country_type = default
				has_ethic = ethic_pluralist
				has_ethic = ethic_fanatic_pluralist
				AND = {
					is_country_type = primitive
					has_country_flag = preftl_societal_enlightenment_pact
					capital_scope = {
						has_observation_outpost = yes
						observation_outpost_owner = { 
							OR = {
								has_ethic = ethic_fanatic_pluralist
								has_ethic = ethic_pluralist
							}							
						}				
					}
				}				
			}
		}
		# Effects of indoctrination mission
		modifier = {
			factor = 10
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_fanatic_pluralist }
			}
		}
		modifier = {
			factor = 5
			is_country_type = primitive
			has_country_flag = preftl_societal_enlightenment_pact
			capital_scope = {
				has_observation_outpost = yes
				observation_outpost_owner = { has_ethic = ethic_pluralist }
			}
		}	
		modifier = {
			factor = 2
			NOR = {
				has_ethic = ethic_pluralist
				has_ethic = ethic_fanatic_pluralist
			}
			has_faction = populist	
		}
		modifier = {
			factor = 2
			has_ethic = ethic_pluralist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_pluralist
		}
		modifier = {
			factor = value:count_councilors_with_ethic|ETHIC|pluralist|
		}
	}

	# from = planet
	pop_attraction = {
		base = 1

		modifier = {
			factor = 1.5
			has_trait = "trait_slow_learners"
		}
		
		modifier = {
			factor = 1.4
			has_trait = "trait_quick_learners"
		}		
		
		modifier = {
			factor = 0.5
			has_trait = "trait_talented"
		}	

		modifier = {
			factor = 1.5
			is_enslaved = no
			from = {
				any_owned_pop = {
					is_robot_pop = no
					is_enslaved = yes
				}
			}
		}		
	
	}	
	
}

##################################################
## Gestalt Ethics
##################################################

## Gestalt Conciousness
# Merge between OSA, Bug Branch
ethic_gestalt_consciousness = {
	playable = {
		OR = {
			host_has_dlc = "Synthetic Dawn Story Pack"
			host_has_dlc = "Utopia"
		}
	}

	cost = 1 # Bug Branch 3 -> 1
	category = "hive"
	category_value = 0
	use_for_pops = no

	country_modifier = {
		country_war_exhaustion_mult = -0.2 # Vanilla
		country_ethic_influence_produces_add = 2 # OSA 1 -> 2
		intel_encryption_add = 2 # Vanilla
		council_agenda_progress_speed = 0.10 # OSA
		planet_jobs_simple_drone_produces_mult = 0.15 # OSA
	}

	tags = {
		ETHIC_GESTALT_CONSCIOUSNESS_NO_TUTORIAL
		ETHIC_GESTALT_CONSCIOUSNESS_AUTHORITY
		ETHIC_GESTALT_CONSCIOUSNESS_IMMORTAL_RULER
		ETHIC_GESTALT_CONSCIOUSNESS_NO_FACTIONS
		ETHIC_GESTALT_CONSCIOUSNESS_DOMESTIC_POP_SURVIVAL
		ETHIC_ALLOW_NO_RETREAT
	}

	random_weight = {
		base = 100
		modifier = {
			factor = 0
			OR = {
				NOR = {
					host_has_dlc = "Synthetic Dawn Story Pack"
					host_has_dlc = "Utopia"
				}
				has_global_flag = game_started # additional traits (trait_hive_mind, trait_machine_unit) are only assigned and verified for empire designs, no effect after game start
			}
		}
		modifier = {
			factor = 2
			host_has_dlc = "Synthetic Dawn Story Pack"
			host_has_dlc = "Utopia"
			NOT = { has_global_flag = game_started }
		}
	}
}
