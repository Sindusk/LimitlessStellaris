##########################################################################
# Limitless Stellaris - Technology
##########################################################################

@EarlyRepeatableTechCost = 12000
@EarlyRepeatableTechLevelCost = 6000
@EarlyRepatableTechFactor = 0.65
@RepeatableCategoryFactor = 0.25
@RepeatableDifferntFactor = 0.5
@EarlyRepeatableWeight = 13
@EarlyRepeatableTier = 3
@SpecializationPenalty = 0.6
@SpecializationLevel = 0.75

##################################################
## Ancient Cache of Technologies
##################################################

## Dark Matter Generation [Ancient Cache of Technologies]
# ACOT version, with some modifiers adjusted. Added to prevent EMT from overwriting.
tech_dark_matter_generation = {
	cost = 90000
	area = physics
	tier = 5
	category = { particles }
	ai_update_type = all
	weight = 20
	is_rare = yes

	modifier = {
		country_energy_produces_mult = 0.05
	}

	prerequisites = { 
		tech_mine_dark_matter
	 }
	
	prereqfor_desc = {
		custom = {
			title = "TECH_UNLOCK_DARK_MATTER_GENERATION_TITLE"
			desc = "TECH_UNLOCK_DARK_MATTER_GENERATION_DESC"
		}
	}

	weight_modifier = {
		modifier = {
			factor = 0
			NOT = { has_country_flag = learned_dark_rumor }
		}
		modifier = {
            factor = 0
            NOT = {
                any_owned_leader = {
                    is_councilor = yes
                    leader_class = scientist
                    has_level > 5         
                }
            }
        }
		# LS - Remove all modifiers unrelated to blocking the tech
		#modifier = {
        #    factor = 0.25
        #    NOT = {
        #        any_owned_leader = {
        #            is_councilor = yes
        #            leader_class = scientist
		#			# LS - Remove trait requirements
		#			#OR = {
		#			#	has_trait = leader_trait_curator
		#			#	has_trait = leader_trait_sapient_AI_assistant
		#			#	has_trait = leader_trait_brainslug
		#			#	has_trait = leader_trait_cyborg
		#			#	has_trait = leader_trait_synthetic
		#			#	has_trait = leader_trait_erudite
		#			#	has_trait = leader_trait_psionic
		#			#	has_trait = leader_trait_chosen
		#			#	has_trait_tier1or2or3 = { TRAIT = leader_trait_expertise_particles } 
		#			#	has_trait_tier1or2or3 = { TRAIT = leader_trait_maniacal } 	
		#			#	has_trait_tier1or2 = { TRAIT = leader_trait_spark_of_genius } 	
		#			#}
		#			has_level >= 5
		#			has_level < 7      
        #        }
        #    }
        #}
		#modifier = {
        #    factor = 1
        #    NOT = {
        #        any_owned_leader = {
        #            is_councilor = yes
        #            leader_class = scientist
		#			# LS - Remove trait requirements
		#			#OR = {
		#			#	has_trait = leader_trait_curator
		#			#	has_trait = leader_trait_sapient_AI_assistant
		#			#	has_trait = leader_trait_brainslug
		#			#	has_trait = leader_trait_cyborg
		#			#	has_trait = leader_trait_synthetic
		#			#	has_trait = leader_trait_erudite
		#			#	has_trait = leader_trait_psionic
		#			#	has_trait = leader_trait_chosen
		#			#	has_trait_tier1or2or3 = { TRAIT = leader_trait_expertise_particles } 
		#			#	has_trait_tier1or2or3 = { TRAIT = leader_trait_maniacal } 	
		#			#	has_trait_tier1or2 = { TRAIT = leader_trait_spark_of_genius } 	
		#			#}
		#			has_level >= 7   
        #        }
        #    }
        #}				
	}
	
	ai_weight = {
		factor = 100.0 #important component
	}
}

##################################################
## Expanded Megastructures and Technology
##################################################

## Waste Worker Production (Repeatable) [Expanded Megastructures and Technology]
# Changed from infinite repeatable to only having 1 level.
tech_repeatable_waste_worker_production = {
	area = society
	cost = @EarlyRepeatableTechCost
	cost_per_level = @EarlyRepeatableTechLevelCost
	tier = @EarlyRepeatableTier
	category = { biology }
	levels = 1 # LS -1 -> 1
	prerequisites = { "eco_tech_waste_processing_3" }
	weight = @EarlyRepeatableWeight
	
	weight_modifier = {
		modifier = {
			factor = 0
			OR = {
				is_country_type = fallen_empire
				is_country_type = awakened_fallen_empire
			}
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_worker_production value > 0 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_worker_production value > 1 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_worker_production value > 2 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_worker_production value > 3 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_worker_production value > 4 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_worker_production value > 5 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_worker_production value > 6 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_worker_production value > 7 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_worker_production value > 8 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_worker_production value > 9 }
		}
	} 
	
	potential = {
		is_gestalt = no
		is_country_type = default
		has_global_flag = TechAscendant_active
	}
	
	ai_weight = {
		factor = 1.0
	}
	
	weight_groups = {
		production_repeatable
	}
	mod_weight_if_group_picked = {
		production_repeatable = @RepeatableCategoryFactor
    }
    mod_weight_if_group_picked = {
		ship_repeatable = @RepeatableDifferntFactor
	}

	modifier = {
		job_waste_handler_per_pop = 0.02
		job_waste_manager_per_pop = 0.01
	}
}

## Waste Drone Production (Repeatable) [Expanded Megastructures and Technology]
# Changed from infinite repeatable to only having 1 level.
tech_repeatable_waste_drone_production = {
	area = society
	cost = @EarlyRepeatableTechCost
	cost_per_level = @EarlyRepeatableTechLevelCost
	tier = @EarlyRepeatableTier
	category = { biology }
	levels = 1 # LS -1 -> 1
	prerequisites = { "eco_tech_waste_processing_3" }
	weight = @EarlyRepeatableWeight
	
	weight_modifier = {
		modifier = {
			factor = 0
			OR = {
				is_country_type = fallen_empire
				is_country_type = awakened_fallen_empire
			}
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_drone_production value > 0 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_drone_production value > 1 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_drone_production value > 2 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_drone_production value > 3 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_drone_production value > 4 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_drone_production value > 5 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_drone_production value > 6 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_drone_production value > 7 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_drone_production value > 8 }
		}
		modifier = {
			factor = @EarlyRepatableTechFactor
			check_variable = { which = repeatable_waste_drone_production value > 9 }
		}
	} 
	
	potential = {
		is_gestalt = yes
		is_country_type = default
		has_global_flag = TechAscendant_active
	}
	
	ai_weight = {
		factor = 1.0
	}
	
	weight_groups = {
		production_repeatable
	}
	mod_weight_if_group_picked = {
		production_repeatable = @RepeatableCategoryFactor
    }
    mod_weight_if_group_picked = {
		ship_repeatable = @RepeatableDifferntFactor
	}

	modifier = {
		job_waste_drone_per_pop = 0.02
		job_waste_overseer_per_pop = 0.01
	}
}

