##########################################################################
# Limitless Stellaris - Buildings - Ad Astra Normal
##########################################################################

##################################################
## Mining Buildings
##################################################

## Mining Ports
# Disabled. Duplicate of Extra Buildings version.
building_mining_ports = {
	base_buildtime = 240
	category = resource
	potential = {
		always = no # Disabled through potential
		#NOT = { has_modifier = resort_colony }
	}
	destroy_trigger = {
		# exists = owner
		has_modifier = resort_colony
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = { job_miner_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = { job_mining_drone_add = 2 }
	}
	resources = {
		category = planet_buildings
		cost = { minerals = 300 }
		cost = {
			trigger = {
				owner = { is_robot_empire = yes }
			}
			minerals = 100
			alloys = 100
		}
		upkeep = { energy = 1 }
	}
	prerequisites = { tech_deep_space_mining }
	upgrades = { "building_mining_port_complex" }
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_mining_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_miner_effect_desc
	}
	# ai_weight = {
	# 	weight = 0
	# 	modifier = {
	# 		weight = 75
	# 		NOR = {
	# 			merg_is_arcology = yes
	# 			is_planet_class = pc_relic
	# 		}
	# 		OR = {
	# 			districts_good_minerals = yes
	# 			num_districts = { type = district_mining value >= 3 }
	# 			num_districts = { type = district_mining_uncapped value >= 3 }
	# 			num_districts = { type = district_hab_mining value >= 2 }
	# 			owner = {
	# 				has_monthly_income = {
	# 					resource = minerals
	# 					value < 0
	# 				}
	# 			}
	# 		}
	# 	}
	# 	modifier = {
	# 		factor = 2
	# 		exists = owner
	# 		owner = {
	# 			has_monthly_income = {
	# 				resource = minerals
	# 				value < 50
	# 			}
	# 		}
	# 	}
	# }
	ai_resource_production = {
		minerals = 1
		trigger = { always = yes }
	}
}

## Mining Port Complex
# Disabled. Duplicate of Extra Buildings version.
building_mining_port_complex = {
	base_buildtime = 480
	category = resource
	can_build = no
	potential = {
		always = no
		#NOT = { has_modifier = resort_colony }
	}
	destroy_trigger = {
		has_modifier = resort_colony
		# OR = {
		# 	# buildings_no_motes = yes
		# }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_miner_add = 5
			planet_housing_add = 3
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_mining_drone_add = 5
			planet_housing_add = 3
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_agrarian_idyll }
		}
		modifier = { planet_housing_add = 1 }
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
			volatile_motes = 50
		}
		cost = {
			trigger = {
				owner = { is_robot_empire = yes }
			}
			minerals = 300
			alloys = 150
		}
		upkeep = {
			energy = 5
			volatile_motes = 1
		}
	}
	prerequisites = { tech_mineral_purification_2 }
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_mining_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_miner_effect_desc
	}
	# ai_weight = {
	# 	weight = 0
	# 	modifier = {
	# 		weight = 30
	# 		buildings_has_motes = yes
	# 	}
	# 	modifier = {
	# 		factor = 2
	# 		exists = owner
	# 		owner = {
	# 			has_monthly_income = {
	# 				resource = minerals
	# 				value < 50
	# 			}
	# 		}
	# 	}
	# }
	ai_resource_production = {
		minerals = 1
		trigger = { always = yes }
	}
	on_queued = {
		IF = {
			limit = {
				owner = { has_technology = tech_construction_templates }
			}
			owner = {
				set_timed_country_flag = { flag = buildings_new_mote_building months = 9 }
			}
		} else_IF = {
			limit = {
				owner = { has_technology = tech_assembly_pattern }
			}
			owner = {
				set_timed_country_flag = { flag = buildings_new_mote_building years = 1 }
			}
		} else = {
			planet = {
				owner = {
					set_timed_country_flag = { flag = buildings_new_mote_building months = 17 }
				}
			}
		}
	}
}

##################################################
## Energy Buildings
##################################################

# Reactor Complex
# Disabled. Duplicate of Extra Buildings version.
building_reactor_complex = {
	base_buildtime = 240
	category = resource
	potential = {
		always = no
		#NOT = { has_modifier = resort_colony }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = { job_technician_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 2 }
	}
	resources = {
		category = planet_buildings
		cost = { minerals = 300 }
		cost = {
			trigger = {
				owner = { is_robot_empire = yes }
			}
			minerals = 100
			alloys = 100
		}
		upkeep = { energy = 1 }
	}
	prerequisites = { tech_localized_power_systems }
	upgrades = { "building_reactor_megacomplex" }
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_technician_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_technician_effect_desc
	}
	# ai_weight = {
	# 	weight = 0
	# 	modifier = {
	# 		weight = 50
	# 		NOR = {
	# 			merg_is_arcology = yes
	# 			is_planet_class = pc_relic
	# 		}
	# 		OR = {
	# 			districts_good_energy = yes
	# 			num_districts = { type = district_generator value >= 3 }
	# 			num_districts = { type = district_generator_uncapped value >= 3 }
	# 			num_districts = { type = district_hab_energy value >= 2 }
	# 			num_districts = { type = district_rw_generator value >= 1 }
	# 			AND = {
	# 				exists = owner
	# 				owner = {
	# 					has_monthly_income = {
	# 						resource = energy
	# 						value < 0
	# 					}
	# 				}
	# 			}
	# 		}
	# 	}
	# 	modifier = {
	# 		factor = 2
	# 		exists = owner
	# 		owner = {
	# 			has_monthly_income = {
	# 				resource = energy
	# 				value < 50
	# 			}
	# 		}
	# 	}
	# }
	ai_resource_production = {
		energy = 1
		trigger = { always = yes }
	}
}

## Reactor Megacomplex
# Disabled. Duplicate of Extra Buildings version.
building_reactor_megacomplex = {
	base_buildtime = 480
	category = resource
	can_build = no
	potential = {
		always = no # Disabled through potential
		#NOT = { has_modifier = resort_colony }
	}
	destroy_trigger = {
		has_modifier = resort_colony
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_technician_add = 5
			planet_housing_add = 3
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_technician_drone_add = 5
			planet_housing_add = 3
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
			rare_crystals = 50
		}
		cost = {
			trigger = {
				owner = { is_robot_empire = yes }
			}
			minerals = 300
			alloys = 150
		}
		upkeep = {
			energy = 5
			rare_crystals = 1
		}
	}
	prerequisites = { tech_power_hub_2 }
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_technician_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_technician_effect_desc
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_agrarian_idyll }
		}
		modifier = { planet_housing_add = 1 }
	}
	# ai_weight = {
	# 	weight = 0
	# 	modifier = {
	# 		weight = 30
	# 		buildings_has_crystals = yes
	# 	}
	# 	modifier = {
	# 		factor = 2
	# 		exists = owner
	# 		owner = {
	# 			has_monthly_income = {
	# 				resource = energy
	# 				value < 50
	# 			}
	# 		}
	# 	}
	# }
	ai_resource_production = {
		energy = 1
		trigger = { always = yes }
	}
	on_queued = {
		IF = {
			limit = {
				owner = { has_technology = tech_construction_templates }
			}
			owner = {
				set_timed_country_flag = { flag = buildings_new_crystal_building months = 9 }
			}
		} else_IF = {
			limit = {
				owner = { has_technology = tech_assembly_pattern }
			}
			owner = {
				set_timed_country_flag = { flag = buildings_new_crystal_building years = 1 }
			}
		} else = {
			planet = {
				owner = {
					set_timed_country_flag = { flag = buildings_new_crystal_building months = 17 }
				}
			}
		}
	}
}

##################################################
## Later Buildings (Not Yet Modified)
##################################################








#############
# AD ASTRA NORMAL BUILDINGS
#############
########### CYNOSURAL BUILDINGS ###########
# Grand Academy
building_grand_academy = {
	base_buildtime = 1200
	base_cap_amount = 1
	category = research
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_cynosural_singularity
		}
		exists = owner
		owner = { is_regular_empire = yes }
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		}
	}
	convert_to = {
		building_omni_network_nodes
		building_deep_research_hives
		building_cynosural_singularity
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 9
		job_clerk_add = 1
		job_technician_add = 1
		job_head_researcher_add = 1
		job_researcher_add = 5
		job_enforcer_add = 1
		planet_researchers_produces_mult = 0.1
		planet_technician_energy_produces_mult = 0.1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_the_infinity_network }
		}
		job_cynosural_researcher_add = 1
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 50
			exotic_gases = 50
			rare_crystals = 50
		}
		upkeep = {
			energy = 7
			exotic_gases = 1
			rare_crystals = 1
			alloys = 1
		}
	}
	upgrades = {
		"building_cynosural_beacon"
		"building_cynosural_lighthouse"
	}
	prerequisites = { "tech_unified_research_networks" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

#############################################################################################################
# Cynosural Beacon (Ecumenopolis)
building_cynosural_beacon = {
	base_buildtime = 2400
	can_build = no
	category = research
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_cynosural_singularity
		}
		merg_is_arcology = yes
		exists = owner
		owner = { is_regular_empire = yes }
	}
	convert_to = {
		building_omni_network_nodes
		building_deep_research_hives
		building_cynosural_singularity
	}
	allow = { has_upgraded_capital = yes }
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		}
	}
	planet_modifier = {
		planet_housing_add = 14
		job_cynosural_researcher_add = 1
		job_clerk_add = 2
		job_technician_add = 2
		job_merchant_add = 1
		job_head_researcher_add = 1
		job_researcher_add = 7
		job_enforcer_add = 2
		planet_researchers_produces_mult = 0.15
		planet_technician_energy_produces_mult = 0.15
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 10
			sr_dark_matter = 1
			rare_crystals = 2
			alloys = 2
		}
	}
	prerequisites = { "tech_the_infinity_network" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

#############################################################################################################
# Cynosural Lighthouse (Ringworld)
building_cynosural_lighthouse = {
	base_buildtime = 2400
	can_build = no
	category = research
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_cynosural_singularity
		}
		is_artificial = yes
		exists = owner
		owner = { is_regular_empire = yes }
	}
	convert_to = {
		building_omni_network_nodes
		building_deep_research_hives
		building_cynosural_singularity
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		}
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 16
		job_cynosural_researcher_add = 1
		job_clerk_add = 2
		job_technician_add = 2
		job_merchant_add = 1
		job_head_researcher_add = 1
		job_researcher_add = 7
		job_enforcer_add = 2
		planet_researchers_produces_mult = 0.2
		planet_technician_energy_produces_mult = 0.2
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 700
			alloys = 400
			volatile_motes = 150
			exotic_gases = 150
			rare_crystals = 150
		}
		upkeep = {
			energy = 10
			sr_dark_matter = 1
			rare_crystals = 2
			alloys = 2
		}
	}
	prerequisites = { "tech_the_infinity_network" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

#############################################################################################################
#############################################################################################################
#############################################################################################################
########### STARLIFT BUILDINGS ###########
# Tectonic Foundry
building_tectonic_foundry = {
	base_buildtime = 1200
	base_cap_amount = 1
	category = resource
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			is_artificial = yes
			has_building = building_atomic_forge
		}
		exists = owner
		owner = { is_regular_empire = yes }
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_motes = yes
			# buildings_no_crystals = yes
		}
	}
	convert_to = {
		building_tectonic_forge
		building_tectonic_hive
		building_atomic_forge
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 5
		job_miner_add = 2
		job_foundry_add = 2
		job_artisan_add = 1
		job_researcher_add = 2
		job_enforcer_add = 1
		planet_miners_minerals_produces_mult = 0.1
		planet_metallurgists_produces_mult = 0.1
		planet_artisans_produces_mult = 0.1
	}
	country_modifier = { country_resource_max_add = 500 }
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_starlift_operations }
		}
		job_starlift_specialist_add = 1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_mechanical_empire = yes }
		}
		job_roboticist_add = 1
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 50
			exotic_gases = 50
			rare_crystals = 50
		}
		upkeep = {
			energy = 7
			volatile_motes = 1
			rare_crystals = 1
			alloys = 1
		}
	}
	upgrades = { "building_starlift_foundry" }
	prerequisites = { "tech_streamlined_megaproduction" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

#############################################################################################################
# Starlift Foundry (Ecumenopolis)
building_starlift_foundry = {
	base_buildtime = 2400
	can_build = no
	category = resource
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_atomic_forge
		}
		merg_is_arcology = yes
		exists = owner
		owner = { is_regular_empire = yes }
	}
	convert_to = {
		building_tectonic_forge
		building_tectonic_hive
		building_atomic_forge
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_motes = yes
			# buildings_no_crystals = yes
		}
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 9
		job_starlift_specialist_add = 1
		job_miner_add = 4
		job_foundry_add = 3
		job_artisan_add = 3
		job_researcher_add = 4
		job_enforcer_add = 2
		planet_miners_minerals_produces_mult = 0.15
		planet_metallurgists_produces_mult = 0.15
		planet_artisans_produces_mult = 0.15
	}
	country_modifier = { country_resource_max_add = 1000 }
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_mechanical_empire = yes }
		}
		job_roboticist_add = 2
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 10
			volatile_motes = 2
			rare_crystals = 2
			alloys = 2
		}
	}
	prerequisites = { "tech_starlift_operations" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

#############################################################################################################
#############################################################################################################
# Stellar Foundry (Ringworld, Stand-Alone)
building_stellar_foundry = {
	base_buildtime = 3600
	base_cap_amount = 1
	category = resource
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_atomic_forge
		}
		is_artificial = yes
		exists = owner
		owner = { is_regular_empire = yes }
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_motes = yes
			# buildings_no_crystals = yes
		}
	}
	allow = { has_upgraded_capital = yes }
	convert_to = {
		building_stellar_foundry_hive
		building_stellar_forge
		building_atomic_forge
	}
	planet_modifier = {
		planet_housing_add = 11
		job_starlift_specialist_add = 1
		job_miner_add = 4
		job_foundry_add = 3
		job_artisan_add = 3
		job_researcher_add = 4
		job_enforcer_add = 2
		planet_miners_minerals_produces_mult = 0.1
		planet_metallurgists_produces_mult = 0.1
		planet_artisans_produces_mult = 0.1
	}
	country_modifier = { country_resource_max_add = 1500 }
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_mechanical_empire = yes }
		}
		job_roboticist_add = 2
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 1200
			alloys = 700
			volatile_motes = 250
			exotic_gases = 250
			rare_crystals = 250
		}
		upkeep = {
			energy = 10
			volatile_motes = 2
			rare_crystals = 2
			alloys = 2
		}
	}
	prerequisites = { "tech_starlift_operations" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

#############################################################################################################
#############################################################################################################
########### COLONIAL AGENCY BUILDINGS ###########
# Colonial Agency Headquarters
building_colonial_agency_headquarters = {
	base_buildtime = 1200
	base_cap_amount = 1
	category = amenity
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_world_engine
		}
		exists = owner
		owner = { is_regular_empire = yes }
	}
	convert_to = {
		building_bio_analysis_core
		building_adaptation_hive
		building_world_engine
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		}
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 5
		job_colonial_agent_add = 1
		job_healthcare_add = 2
		job_researcher_add = 2
		job_enforcer_add = 1
		planet_farmers_food_produces_mult = 0.1
		planet_pops_consumer_goods_upkeep_mult = -0.1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_mechanical_empire = no }
		}
		job_farmer_add = 2
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_mechanical_empire = yes }
		}
		job_roboticist_add = 1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOR = {
					is_megacorp = yes
					has_civic = civic_exalted_priesthood
					has_civic = civic_aristocratic_elite
					has_civic = civic_merchant_guilds
					has_civic = civic_technocracy
				}
			}
		}
		modifier = { job_politician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_megacorp = yes }
		}
		modifier = { job_executive_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_exalted_priesthood }
		}
		modifier = {
			job_politician_add = 1
			job_high_priest_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_aristocratic_elite }
		}
		modifier = {
			job_politician_add = 1
			job_noble_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_technocracy }
		}
		modifier = {
			job_head_researcher_add = 1
			job_politician_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_merchant_guilds }
		}
		modifier = {
			job_politician_add = 1
			job_merchant_add = 1
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 50
			exotic_gases = 50
			rare_crystals = 50
		}
		upkeep = {
			energy = 7
			exotic_gases = 1
			rare_crystals = 1
			alloys = 1
		}
	}
	upgrades = {
		"building_evolutionary_spire"
		"building_arcadian_garden"
	}
	prerequisites = { "tech_the_colonial_agency" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

####################################################################################
# Evolutionary Spire
building_evolutionary_spire = {
	base_buildtime = 2400
	can_build = no
	category = amenity
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_world_engine
		}
		merg_is_arcology = yes
		exists = owner
		owner = { is_regular_empire = yes }
	}
	convert_to = {
		building_bio_analysis_core
		building_adaptation_hive
		building_world_engine
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		}
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 9
		job_colonial_agent_add = 1
		job_healthcare_add = 4
		job_researcher_add = 4
		job_enforcer_add = 1
		job_soldier_add = 1
		planet_farmers_food_produces_mult = 0.15
		planet_pops_consumer_goods_upkeep_mult = -0.15
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_mechanical_empire = no }
		}
		job_farmer_add = 4
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_mechanical_empire = yes }
		}
		job_roboticist_add = 2
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOR = {
					is_megacorp = yes
					has_civic = civic_exalted_priesthood
					has_civic = civic_aristocratic_elite
					has_civic = civic_merchant_guilds
					has_civic = civic_technocracy
				}
			}
		}
		modifier = { job_politician_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_megacorp = yes }
		}
		modifier = { job_executive_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_exalted_priesthood }
		}
		modifier = {
			job_politician_add = 2
			job_high_priest_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_aristocratic_elite }
		}
		modifier = {
			job_politician_add = 2
			job_noble_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_technocracy }
		}
		modifier = {
			job_head_researcher_add = 1
			job_politician_add = 2
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_merchant_guilds }
		}
		modifier = {
			job_politician_add = 2
			job_merchant_add = 1
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 10
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
		}
	}
	prerequisites = { "tech_colonial_agency_megahubs" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

####################################################################################
# Arcadian Garden
building_arcadian_garden = {
	base_buildtime = 2400
	can_build = no
	category = amenity
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_world_engine
		}
		is_artificial = yes
		exists = owner
		owner = { is_regular_empire = yes }
	}
	convert_to = {
		building_bio_analysis_core
		building_adaptation_hive
		building_world_engine
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		}
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 11
		job_colonial_agent_add = 1
		job_healthcare_add = 4
		job_researcher_add = 4
		job_enforcer_add = 1
		job_soldier_add = 1
		planet_farmers_food_produces_mult = 0.2
		planet_pops_consumer_goods_upkeep_mult = -0.2
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_mechanical_empire = no }
		}
		job_farmer_add = 4
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_mechanical_empire = yes }
		}
		job_roboticist_add = 2
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOR = {
					is_megacorp = yes
					has_civic = civic_exalted_priesthood
					has_civic = civic_aristocratic_elite
					has_civic = civic_merchant_guilds
					has_civic = civic_technocracy
				}
			}
		}
		modifier = { job_politician_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_megacorp = yes }
		}
		modifier = { job_executive_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_exalted_priesthood }
		}
		modifier = {
			job_politician_add = 2
			job_high_priest_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_aristocratic_elite }
		}
		modifier = {
			job_politician_add = 2
			job_noble_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_technocracy }
		}
		modifier = {
			job_head_researcher_add = 1
			job_politician_add = 2
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_merchant_guilds }
		}
		modifier = {
			job_politician_add = 2
			job_merchant_add = 1
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 700
			alloys = 400
			volatile_motes = 150
			exotic_gases = 150
			rare_crystals = 150
		}
		upkeep = {
			energy = 10
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
		}
	}
	prerequisites = { "tech_colonial_agency_megahubs" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

#############################################################################################################
#############################################################################################################
########### PLANETARY FORUM BUILDINGS ###########
# Planetary Forum
building_planetary_forum = {
	base_buildtime = 1200
	base_cap_amount = 1
	category = unity
	potential = {
		exists = owner
		NOR = {
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_celestial_paradise
		}
		owner = {
			is_gestalt = no
			is_spiritualist = no
			is_megacorp = no
		}
	}
	allow = { has_upgraded_capital = yes }
	destroy_trigger = {
		# OR = {
		has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		# }
	}
	convert_to = {
		building_corporate_megaforum
		building_temple_city
		building_synaptic_link
		building_signal_mirror_core
		building_celestial_paradise
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 7
			exotic_gases = 1
			rare_crystals = 1
			alloys = 1
		}
	}
	planet_modifier = {
		planet_housing_add = 10
		job_clerk_add = 2
		job_entertainer_add = 2
		job_merchant_add = 2
		job_culture_worker_add = 4
		job_enforcer_add = 1
		planet_jobs_unity_produces_mult = 0.1
		pop_government_ethic_attraction = 0.1
	}
	prerequisites = { "tech_social_megahubs" }
	upgrades = {
		"building_paradise_city"
		"building_universal_forum"
		"building_citadel_of_culture"
	}
	show_tech_unlock_if = {
		is_gestalt = no
		is_spiritualist = no
		is_megacorp = no
	}
	# ai_weight = { factor = 500 }
}

#############################################################################################################
# Paradise City
building_paradise_city = {
	base_buildtime = 2400
	can_build = no
	category = unity
	potential = {
		exists = owner
		NOR = {
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_celestial_paradise
		}
		has_modifier = resort_colony
		owner = {
			is_gestalt = no
			is_spiritualist = no
			is_megacorp = no
		}
	}
	allow = { has_upgraded_capital = yes }
	destroy_trigger = {
		# OR = {
		has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		# }
	}
	convert_to = {
		building_corporate_megaforum
		building_temple_city
		building_synaptic_link
		building_signal_mirror_core
		building_celestial_paradise
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 10
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
		}
	}
	planet_modifier = {
		planet_housing_add = 15
		job_clerk_add = 2
		job_entertainer_add = 5
		job_merchant_add = 2
		job_culture_worker_add = 5
		job_enforcer_add = 1
		job_soldier_add = 1
		planet_jobs_unity_produces_mult = 0.3
		pop_government_ethic_attraction = 0.1
	}
	prerequisites = { "tech_paradise_engineering" }
	show_tech_unlock_if = {
		is_gestalt = no
		is_spiritualist = no
		is_megacorp = no
	}
	# ai_weight = { factor = 500 }
}

################################################################################
# Citadel of Culture
building_citadel_of_culture = {
	base_buildtime = 2400
	can_build = no
	category = unity
	potential = {
		exists = owner
		NOR = {
			has_modifier = slave_colony
			has_building = building_celestial_paradise
		}
		merg_is_arcology = yes
		owner = {
			is_gestalt = no
			is_spiritualist = no
			is_megacorp = no
		}
	}
	destroy_trigger = {
		# OR = {
		has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		# }
	}
	allow = { has_upgraded_capital = yes }
	convert_to = {
		building_corporate_megaforum
		building_temple_city
		building_synaptic_link
		building_signal_mirror_core
		building_celestial_paradise
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 10
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
		}
	}
	planet_modifier = {
		planet_housing_add = 15
		job_clerk_add = 4
		job_entertainer_add = 5
		job_merchant_add = 4
		job_culture_worker_add = 7
		job_enforcer_add = 2
		planet_jobs_unity_produces_mult = 0.15
		pop_government_ethic_attraction = 0.15
	}
	prerequisites = { "tech_universal_forum" }
	show_tech_unlock_if = {
		is_gestalt = no
		is_spiritualist = no
		is_megacorp = no
	}
	# ai_weight = { factor = 500 }
}

################################################################################
# Universal Forum
building_universal_forum = {
	base_buildtime = 2400
	can_build = no
	category = unity
	potential = {
		exists = owner
		NOR = {
			has_modifier = slave_colony
			has_building = building_celestial_paradise
		}
		is_artificial = yes
		owner = {
			is_gestalt = no
			is_spiritualist = no
			is_megacorp = no
		}
	}
	destroy_trigger = {
		# OR = {
		has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		# }
	}
	allow = { has_upgraded_capital = yes }
	resources = {
		category = planet_buildings
		cost = {
			minerals = 700
			alloys = 400
			volatile_motes = 150
			exotic_gases = 150
			rare_crystals = 150
		}
		upkeep = {
			energy = 10
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
		}
	}
	convert_to = {
		building_corporate_megaforum
		building_temple_city
		building_synaptic_link
		building_signal_mirror_core
		building_celestial_paradise
	}
	planet_modifier = {
		planet_housing_add = 20
		job_clerk_add = 4
		job_entertainer_add = 5
		job_merchant_add = 4
		job_culture_worker_add = 7
		job_enforcer_add = 2
		planet_jobs_unity_produces_mult = 0.2
		pop_government_ethic_attraction = 0.2
	}
	prerequisites = { "tech_universal_forum" }
	show_tech_unlock_if = {
		is_gestalt = no
		is_spiritualist = no
		is_megacorp = no
	}
	# ai_weight = { factor = 500 }
}

#############################################################################################################
#############################################################################################################
########### CORPORATE MEGAFORUM BUILDINGS ###########
# Corporate Megaforum
building_corporate_megaforum = {
	base_buildtime = 1200
	base_cap_amount = 1
	icon = building_planetary_forum
	category = unity
	potential = {
		exists = owner
		NOR = {
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_celestial_paradise
		}
		owner = {
			is_gestalt = no
			is_spiritualist = no
			is_megacorp = yes
		}
	}
	destroy_trigger = {
		# OR = {
		has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		# }
	}
	allow = { has_upgraded_capital = yes }
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 7
			exotic_gases = 1
			rare_crystals = 1
			alloys = 1
		}
	}
	planet_modifier = {
		planet_housing_add = 10
		job_entertainer_add = 2
		job_merchant_add = 2
		job_manager_add = 6
		job_enforcer_add = 1
		planet_jobs_unity_produces_mult = 0.1
		pop_government_ethic_attraction = 0.1
	}
	prerequisites = { "tech_social_megahubs" }
	convert_to = {
		building_planetary_forum
		building_temple_city
		building_synaptic_link
		building_signal_mirror_core
		building_celestial_paradise
	}
	upgrades = {
		"building_jewel_city"
		"building_megacorp_citadel"
		"building_megacorp_hyperforum"
	}
	show_tech_unlock_if = { is_megacorp = yes }
	# ai_weight = { factor = 500 }
}

#############################################################################################################
# Jewel City
building_jewel_city = {
	base_buildtime = 2400
	can_build = no
	category = unity
	potential = {
		exists = owner
		NOR = {
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_celestial_paradise
		}
		owner = {
			is_gestalt = no
			is_spiritualist = no
			is_megacorp = yes
		}
		has_modifier = resort_colony
	}
	destroy_trigger = {
		# OR = {
		has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		# }
	}
	allow = { has_upgraded_capital = yes }
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 10
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
		}
	}
	convert_to = {
		building_planetary_forum
		building_temple_city
		building_synaptic_link
		building_signal_mirror_core
		building_celestial_paradise
	}
	planet_modifier = {
		planet_housing_add = 15
		job_clerk_add = 2
		job_entertainer_add = 5
		job_merchant_add = 2
		job_manager_add = 5
		job_enforcer_add = 1
		job_soldier_add = 1
		planet_jobs_unity_produces_mult = 0.3
		pop_government_ethic_attraction = 0.1
	}
	prerequisites = { "tech_paradise_engineering" }
	show_tech_unlock_if = { is_megacorp = yes }
	# ai_weight = { factor = 500 }
}

################################################################################
# Megacorp Citadel
building_megacorp_citadel = {
	base_buildtime = 2400
	can_build = no
	category = unity
	potential = {
		exists = owner
		NOR = {
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_celestial_paradise
		}
		owner = {
			is_gestalt = no
			is_spiritualist = no
			is_megacorp = yes
		}
		merg_is_arcology = yes
	}
	destroy_trigger = {
		# OR = {
		has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		# }
	}
	allow = { has_upgraded_capital = yes }
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 10
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
		}
	}
	convert_to = {
		building_planetary_forum
		building_temple_city
		building_synaptic_link
		building_signal_mirror_core
		building_celestial_paradise
	}
	planet_modifier = {
		planet_housing_add = 15
		job_clerk_add = 4
		job_entertainer_add = 5
		job_merchant_add = 4
		job_manager_add = 7
		job_enforcer_add = 2
		planet_jobs_unity_produces_mult = 0.15
		pop_government_ethic_attraction = 0.15
	}
	prerequisites = { "tech_galactic_megacorp_forums" }
	show_tech_unlock_if = { is_megacorp = yes }
	# ai_weight = { factor = 500 }
}

################################################################################
# Megacorp Hyperforum
building_megacorp_hyperforum = {
	base_buildtime = 2400
	can_build = no
	category = unity
	potential = {
		exists = owner
		NOR = {
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_celestial_paradise
		}
		owner = {
			is_gestalt = no
			is_spiritualist = no
			is_megacorp = yes
		}
		is_artificial = yes
	}
	destroy_trigger = {
		# OR = {
		has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		# }
	}
	allow = { has_upgraded_capital = yes }
	resources = {
		category = planet_buildings
		cost = {
			minerals = 700
			alloys = 400
			volatile_motes = 150
			exotic_gases = 150
			rare_crystals = 150
		}
		upkeep = {
			energy = 10
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
		}
	}
	convert_to = {
		building_planetary_forum
		building_temple_city
		building_synaptic_link
		building_signal_mirror_core
		building_celestial_paradise
	}
	planet_modifier = {
		planet_housing_add = 20
		job_clerk_add = 4
		job_entertainer_add = 5
		job_merchant_add = 4
		job_manager_add = 7
		job_enforcer_add = 2
		planet_jobs_unity_produces_mult = 0.2
		pop_government_ethic_attraction = 0.2
	}
	prerequisites = { "tech_galactic_megacorp_forums" }
	show_tech_unlock_if = { is_megacorp = yes }
	# ai_weight = { factor = 500 }
}

#############################################################################################################
#############################################################################################################
########### SPIRITUALIST BUILDINGS ###########
# Temple City
building_temple_city = {
	base_buildtime = 1200
	base_cap_amount = 1
	category = unity
	potential = {
		NOR = {
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_celestial_paradise
		}
		owner = { is_spiritualist = yes }
	}
	allow = { has_upgraded_capital = yes }
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 7
			exotic_gases = 1
			rare_crystals = 1
			alloys = 1
		}
	}
	destroy_trigger = {
		# OR = {
		has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		# }
	}
	planet_modifier = {
		planet_housing_add = 10
		job_priest_add = 7
		job_clerk_add = 2
		job_healthcare_add = 2
		job_enforcer_add = 1
		planet_jobs_unity_produces_mult = 0.1
		pop_ethic_spiritualist_attraction_mult = 0.15
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_1
		}
		planet_housing_add = 1
		job_priest_add = 1
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 1
		pop_amenities_usage_mult = -0.02
		planet_jobs_unity_produces_mult = 0.03
		pop_ethic_spiritualist_attraction_mult = 0.03
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_2
		}
		planet_housing_add = 2
		job_priest_add = 1
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 1
		pop_amenities_usage_mult = -0.03
		planet_jobs_unity_produces_mult = 0.06
		pop_ethic_spiritualist_attraction_mult = 0.06
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_3
		}
		planet_housing_add = 3
		job_priest_add = 2
		job_clerk_add = 2
		job_healthcare_add = 2
		job_enforcer_add = 2
		pop_amenities_usage_mult = -0.04
		planet_jobs_unity_produces_mult = 0.09
		pop_ethic_spiritualist_attraction_mult = 0.09
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_4
		}
		planet_housing_add = 4
		job_priest_add = 2
		job_clerk_add = 2
		job_healthcare_add = 2
		job_enforcer_add = 2
		pop_amenities_usage_mult = -0.06
		planet_jobs_unity_produces_mult = 0.12
		pop_ethic_spiritualist_attraction_mult = 0.12
	}
	prerequisites = { "tech_bastions_of_faith" }
	convert_to = {
		building_planetary_forum
		building_corporate_megaforum
		building_synaptic_link
		building_signal_mirror_core
		building_celestial_paradise
	}
	upgrades = {
		"building_celestial_temple"
		"building_celestial_city"
	}
	show_tech_unlock_if = { is_spiritualist = yes }
	# ai_weight = { factor = 500 }
}

################################################################################
# Celestial Temple
building_celestial_temple = {
	base_buildtime = 2400
	can_build = no
	category = unity
	potential = {
		NOR = {
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_celestial_paradise
		}
		owner = { is_spiritualist = yes }
		merg_is_arcology = yes
	}
	allow = { has_upgraded_capital = yes }
	destroy_trigger = {
		# OR = {
		has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		# }
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 10
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
		}
	}
	convert_to = {
		building_planetary_forum
		building_corporate_megaforum
		building_synaptic_link
		building_signal_mirror_core
		building_celestial_paradise
	}
	planet_modifier = {
		planet_housing_add = 14
		job_priest_add = 14
		job_healthcare_add = 2
		job_enforcer_add = 2
		planet_jobs_unity_produces_mult = 0.15
		pop_ethic_spiritualist_attraction_mult = 0.15
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_1
		}
		planet_housing_add = 1
		job_priest_add = 1
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 1
		pop_amenities_usage_mult = -0.02
		planet_jobs_unity_produces_mult = 0.03
		pop_ethic_spiritualist_attraction_mult = 0.03
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_2
		}
		planet_housing_add = 2
		job_priest_add = 1
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 1
		pop_amenities_usage_mult = -0.03
		planet_jobs_unity_produces_mult = 0.06
		pop_ethic_spiritualist_attraction_mult = 0.06
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_3
		}
		planet_housing_add = 3
		job_priest_add = 2
		job_clerk_add = 2
		job_healthcare_add = 2
		job_enforcer_add = 2
		pop_amenities_usage_mult = -0.04
		planet_jobs_unity_produces_mult = 0.09
		pop_ethic_spiritualist_attraction_mult = 0.09
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_4
		}
		planet_housing_add = 4
		job_priest_add = 2
		job_clerk_add = 2
		job_healthcare_add = 2
		job_enforcer_add = 2
		pop_amenities_usage_mult = -0.06
		planet_jobs_unity_produces_mult = 0.12
		pop_ethic_spiritualist_attraction_mult = 0.12
	}
	prerequisites = { "tech_the_celestial_beacons" }
	show_tech_unlock_if = { is_spiritualist = yes }
	# ai_weight = { factor = 500 }
}

################################################################################
# Celestial City
building_celestial_city = {
	base_buildtime = 2400
	can_build = no
	category = unity
	potential = {
		NOR = {
			has_modifier = slave_colony
			merg_is_habitat = yes
			has_building = building_celestial_paradise
		}
		owner = { is_spiritualist = yes }
		is_artificial = yes
	}
	destroy_trigger = {
		# OR = {
		has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		# }
	}
	allow = { has_upgraded_capital = yes }
	resources = {
		category = planet_buildings
		cost = {
			minerals = 700
			alloys = 400
			volatile_motes = 150
			exotic_gases = 150
			rare_crystals = 150
		}
		upkeep = {
			energy = 10
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
		}
	}
	convert_to = {
		building_planetary_forum
		building_corporate_megaforum
		building_synaptic_link
		building_signal_mirror_core
		building_celestial_paradise
	}
	planet_modifier = {
		planet_housing_add = 16
		job_priest_add = 14
		job_healthcare_add = 2
		job_enforcer_add = 2
		planet_jobs_unity_produces_mult = 0.2
		pop_ethic_spiritualist_attraction_mult = 0.25
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_1
		}
		planet_housing_add = 1
		job_priest_add = 1
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 1
		pop_amenities_usage_mult = -0.02
		planet_jobs_unity_produces_mult = 0.03
		pop_ethic_spiritualist_attraction_mult = 0.03
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_2
		}
		planet_housing_add = 2
		job_priest_add = 1
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 1
		pop_amenities_usage_mult = -0.03
		planet_jobs_unity_produces_mult = 0.06
		pop_ethic_spiritualist_attraction_mult = 0.06
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_3
		}
		planet_housing_add = 3
		job_priest_add = 2
		job_clerk_add = 2
		job_healthcare_add = 2
		job_enforcer_add = 2
		pop_amenities_usage_mult = -0.04
		planet_jobs_unity_produces_mult = 0.09
		pop_ethic_spiritualist_attraction_mult = 0.09
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_4
		}
		planet_housing_add = 4
		job_priest_add = 2
		job_clerk_add = 2
		job_healthcare_add = 2
		job_enforcer_add = 2
		pop_amenities_usage_mult = -0.06
		planet_jobs_unity_produces_mult = 0.12
		pop_ethic_spiritualist_attraction_mult = 0.12
	}
	prerequisites = { "tech_the_celestial_beacons" }
	show_tech_unlock_if = { is_spiritualist = yes }
	# ai_weight = { factor = 500 }
}

################################################################################
##################################################################################
################################################################################
########### FORTRESS CITIES ###########
# Fortress City
building_fortress_city = {
	base_buildtime = 1200
	base_cap_amount = 1
	planetary_ftl_inhibitor = yes
	category = army
	potential = {
		merg_is_habitat = no
		exists = owner
		owner = { is_regular_empire = yes }
		NOT = { has_building = building_aegis_forge }
	}
	destroy_trigger = {
		# OR = {
		has_building = building_aegis_forge
			# buildings_no_motes = yes
			# buildings_no_crystals = yes
		# }
	}
	convert_to = {
		building_adaptive_defence_core
		building_greater_warrior_hive
		building_aegis_forge
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 9
		job_strategic_command_add = 1
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 3
		job_soldier_add = 4
		planet_orbital_bombardment_damage = -0.05
	}
	army_modifier = {
		army_defense_health_mult = 0.1
		army_defense_damage_mult = 0.1
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 50
			exotic_gases = 50
			rare_crystals = 50
		}
		upkeep = {
			energy = 7
			volatile_motes = 1
			rare_crystals = 1
			alloys = 1
		}
	}
	upgrades = {
		"building_planetary_citadel"
		"building_aegis_city"
		"building_panopticon_fortress"
		"building_overseer_spire"
	}
	prerequisites = { "tech_militarized_colonies" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

#############################################################################################################
# Planetary Citadel (Ecumenopolis)
building_planetary_citadel = {
	base_buildtime = 2400
	can_build = no
	planetary_ftl_inhibitor = yes
	category = army
	potential = {
		merg_is_habitat = no
		merg_is_arcology = yes
		exists = owner
		owner = { is_regular_empire = yes }
		NOT = { has_building = building_aegis_forge }
	}
	destroy_trigger = {
		has_building = building_aegis_forge
		# OR = {
		# 	# buildings_no_exotic_gases = yes
		# 	# buildings_no_motes = yes
		# 	# buildings_no_crystals = yes
		# }
	}
	convert_to = {
		building_adaptive_defence_core
		building_greater_warrior_hive
		building_aegis_forge
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 14
		job_strategic_command_add = 1
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 4
		job_soldier_add = 6
		planet_orbital_bombardment_damage = -0.1
	}
	army_modifier = {
		army_defense_health_mult = 0.15
		army_defense_damage_mult = 0.15
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 10
			volatile_motes = 2
			exotic_gases = 1
			rare_crystals = 1
			alloys = 2
		}
	}
	prerequisites = { "tech_ecumenopolis_defence_matrix" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

#############################################################################################################
# Aegis City (Ringworld)
building_aegis_city = {
	base_buildtime = 2400
	can_build = no
	planetary_ftl_inhibitor = yes
	category = army
	potential = {
		is_artificial = yes
		merg_is_habitat = no
		exists = owner
		owner = { is_regular_empire = yes }
		NOT = { has_building = building_aegis_forge }
	}
	destroy_trigger = {
		has_building = building_aegis_forge
		# OR = {
		# 	# buildings_no_exotic_gases = yes
		# 	# buildings_no_motes = yes
		# 	# buildings_no_crystals = yes
		# }
	}
	convert_to = {
		building_adaptive_defence_core
		building_greater_warrior_hive
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 14
		job_strategic_command_add = 1
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 4
		job_soldier_add = 6
		planet_orbital_bombardment_damage = -0.1
	}
	army_modifier = {
		army_defense_health_mult = 0.2
		army_defense_damage_mult = 0.2
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 700
			alloys = 400
			volatile_motes = 150
			exotic_gases = 150
			rare_crystals = 150
		}
		upkeep = {
			energy = 10
			volatile_motes = 2
			exotic_gases = 1
			rare_crystals = 1
			alloys = 2
		}
	}
	prerequisites = { "tech_omni_fortress_engineering" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

##############################################################################
# Panopticon Fortress
building_panopticon_fortress = {
	base_buildtime = 1200
	can_build = no
	planetary_ftl_inhibitor = yes
	category = government
	potential = {
		NOR = {
			merg_is_habitat = yes
			has_modifier = slave_colony
			has_building = building_aegis_forge
		}
		has_modifier = penal_colony
		exists = owner
		owner = { is_regular_empire = yes }
	}
	destroy_trigger = {
		OR = {
			has_building = building_aegis_forge
			has_modifier = slave_colony
			NOT = { has_modifier = penal_colony }
			# buildings_no_motes = yes
			# buildings_no_crystals = yes
		}
	}
	convert_to = {
		building_adaptive_defence_core
		building_greater_warrior_hive
		building_aegis_forge
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 9
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 7
		planet_crime_add = -50
	}
	army_modifier = {
		army_defense_health_mult = 0.15
		army_defense_damage_mult = 0.15
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 5
			volatile_motes = 1
			rare_crystals = 1
			alloys = 1
		}
	}
	prerequisites = { "tech_panoptica_systems" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

##############################################################################
# PERSONAL NOTE: Oh lookie here, A GIANT BULLSEYE!
# Overseer Spire
building_overseer_spire = {
	base_buildtime = 1200
	can_build = no
	planetary_ftl_inhibitor = yes
	category = government
	potential = {
		merg_is_habitat = no
		has_modifier = slave_colony
		exists = owner
		owner = { is_regular_empire = yes }
		NOT = { has_building = building_aegis_forge }
	}
	destroy_trigger = {
		OR = {
			has_building = building_aegis_forge
			NOT = { has_modifier = slave_colony }
			# buildings_no_motes = yes
			# buildings_no_crystals = yes
		}
	}
	convert_to = {
		building_adaptive_defence_core
		building_greater_warrior_hive
		building_aegis_forge
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 9
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 7
		pop_cat_slave_political_power = -0.25
	}
	army_modifier = {
		army_defense_health_mult = 0.15
		army_defense_damage_mult = 0.15
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 5
			volatile_motes = 1
			rare_crystals = 1
			alloys = 1
		}
	}
	prerequisites = { "tech_panoptica_systems" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

##############################################################################
# Vault City
building_vault_city = {
	base_buildtime = 800
	base_cap_amount = 1
	category = government
	potential = {
		merg_is_habitat = no
		exists = owner
		is_planet_class = pc_nuked
		owner = { is_regular_empire = yes }
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 8
		job_salvager_crew_add = 2
		job_clerk_add = 1
		job_enforcer_add = 1
		job_miner_add = 2
		job_researcher_add = 1
		job_farmer_add = 2
		planet_orbital_bombardment_damage = -0.05
		pc_nuked_habitability = 0.2
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 300
			alloys = 100
		}
		upkeep = {
			energy = 5
			alloys = 2
		}
	}
	prerequisites = { "tech_dual_reinforced_bunker_habitats" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

###############################################################################################################################
# Orbital Command District
building_orbital_command_district = {
	base_buildtime = 800
	base_cap_amount = 1
	planetary_ftl_inhibitor = yes
	category = army
	potential = {
		merg_is_habitat = yes
		exists = owner
		owner = { is_regular_empire = yes }
	}
	convert_to = {
		building_orbital_command_node
		building_orbital_war_hive
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 8
		job_strategic_command_add = 1
		job_enforcer_add = 3
		job_soldier_add = 4
		planet_orbital_bombardment_damage = -0.05
	}
	army_modifier = {
		army_defense_health_mult = 0.1
		army_defense_damage_mult = 0.1
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 300
			alloys = 100
			volatile_motes = 50
			exotic_gases = 50
			rare_crystals = 50
		}
		upkeep = {
			energy = 5
			alloys = 2
		}
	}
	prerequisites = { "tech_habitat_defence_mastery" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

###############################################################################################################################
# Colossi Forge
building_colossi_forge = {
	base_buildtime = 1200
	base_cap_amount = 1
	planetary_ftl_inhibitor = yes
	category = army
	potential = {
		merg_is_habitat = no
		exists = owner
		owner = {
			is_regular_empire = yes
			has_technology = tech_psi_forge_technologies
		}
	}
	destroy_trigger = {
		exists = owner
		owner = {
			NAND = {
				is_regular_empire = yes
				has_technology = tech_psi_forge_technologies
			}
		}
		# OR = {
		# 	# buildings_no_motes = yes
		# 	# buildings_no_crystals = yes
		# }
	}
	allow = { has_upgraded_capital = yes }
	planet_modifier = {
		planet_housing_add = 9
		job_colossi_artificer_add = 4
		job_colossi_guardian_add = 5
		planet_orbital_bombardment_damage = -0.05
	}
	army_modifier = {
		army_defense_health_mult = 0.1
		army_defense_damage_mult = 0.1
		army_starting_experience_add = 50
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 5
			volatile_motes = 1
			rare_crystals = 1
			alloys = 1
			sr_zro = 2
		}
	}
	prerequisites = { "tech_psi_forge_technologies" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

###############################################################################################################################
# Gene-Forge Spire
building_gene_forge_spires = {
	base_buildtime = 1200
	base_cap_amount = 1
	planetary_ftl_inhibitor = yes
	category = army
	potential = {
		merg_is_habitat = no
		exists = owner
		owner = {
			is_regular_empire = yes
			has_technology = tech_bio_war_mastery
		}
	}
	allow = { has_upgraded_capital = yes }
	destroy_trigger = {
		exists = owner
		owner = {
			NAND = {
				is_regular_empire = yes
				has_technology = tech_bio_war_mastery
			}
		}
		# OR = {
		# 	# buildings_no_exotic_gases = yes
		# 	# buildings_no_motes = yes
		# 	# buildings_no_crystals = yes
		# }
	}
	planet_modifier = {
		planet_housing_add = 9
		job_strategic_command_add = 1
		job_healthcare_add = 2
		job_enforcer_add = 3
		job_soldier_add = 3
		planet_orbital_bombardment_damage = -0.05
	}
	army_modifier = {
		army_defense_health_mult = 0.1
		army_defense_damage_mult = 0.1
		army_starting_experience_add = 50
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 5
			volatile_motes = 1
			rare_crystals = 1
			alloys = 1
			exotic_gases = 2
		}
	}
	prerequisites = { "tech_bio_war_mastery" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

###############################################################################################################################
# Arsenal Command Terminal
building_arsenal_command_terminal = {
	base_buildtime = 1200
	base_cap_amount = 1
	planetary_ftl_inhibitor = yes
	category = army
	potential = {
		merg_is_habitat = no
		exists = owner
		owner = {
			is_regular_empire = yes
			has_technology = tech_cybernetic_command
		}
	}
	allow = { has_upgraded_capital = yes }
	destroy_trigger = {
		exists = owner
		owner = {
			NAND = {
				is_regular_empire = yes
				has_technology = tech_cybernetic_command
			}
		}
		# OR = {
		# 	# buildings_no_exotic_gases = yes
		# 	# buildings_no_motes = yes
		# 	# buildings_no_crystals = yes
		# }
	}
	planet_modifier = {
		planet_housing_add = 9
		job_strategic_command_add = 1
		job_roboticist_add = 2
		job_enforcer_add = 3
		job_soldier_add = 3
		planet_orbital_bombardment_damage = -0.05
	}
	army_modifier = {
		army_defense_health_mult = 0.1
		army_defense_damage_mult = 0.1
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
			alloys = 300
			volatile_motes = 100
			exotic_gases = 100
			rare_crystals = 100
		}
		upkeep = {
			energy = 5
			volatile_motes = 1
			rare_crystals = 1
			alloys = 2
			exotic_gases = 1
		}
	}
	prerequisites = { "tech_cybernetic_command" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

#######################################################################################################################
#######################################################################################################################
#######################################################################################################################
########### UNIQUE ##############
# Wyrmguard Citadel
building_wyrmguard_citadel = {
	base_buildtime = 3600
	base_cap_amount = 1
	planetary_ftl_inhibitor = yes
	category = army
	potential = {
		merg_is_habitat = no
		is_capital = yes
		exists = owner
		owner = {
			is_regular_empire = yes
			has_technology = tech_wyrmguard
		}
	}
	allow = {
		has_major_upgraded_capital = yes
		is_capital = yes
	}
	destroy_trigger = {
		exists = owner
		NAND = {
			is_capital = yes
			owner = {
				is_regular_empire = yes
				has_technology = tech_wyrmguard
			}
			# buildings_no_exotic_gases = yes
			# buildings_no_motes = yes
			# buildings_no_crystals = yes
		}
	}
	planet_modifier = {
		planet_housing_add = 18
		job_strategic_command_add = 1
		job_foundry_add = 2
		job_researcher_add = 2
		job_healthcare_add = 2
		job_enforcer_add = 4
		job_soldier_add = 7
		planet_orbital_bombardment_damage = -0.1
	}
	country_modifier = {
		army_health = 0.1
		army_damage_mult = 0.1
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 700
			alloys = 400
			volatile_motes = 150
			exotic_gases = 300
			rare_crystals = 150
		}
		upkeep = {
			energy = 10
			volatile_motes = 2
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
			sr_dark_matter = 1
		}
	}
	prerequisites = { "tech_wyrmguard" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 1000 }
}

############################################################################
# Alpha Fortress
building_alpha_fortress = {
	base_buildtime = 3600
	base_cap_amount = 1
	planetary_ftl_inhibitor = yes
	category = army
	potential = {
		merg_is_habitat = no
		is_capital = yes
		exists = owner
		owner = { has_technology = tech_enigmatic_arsenal }
	}
	allow = {
		has_major_upgraded_capital = yes
		is_capital = yes
	}
	destroy_trigger = {
		exists = owner
		NAND = {
			is_capital = yes
			owner = { has_technology = tech_enigmatic_arsenal }
		}
		# OR = {
		# 	# buildings_no_exotic_gases = yes
		# 	# buildings_no_motes = yes
		# 	# buildings_no_crystals = yes
		# }
	}
	planet_modifier = {
		planet_housing_add = 18
		job_strategic_command_add = 1
		job_foundry_add = 2
		job_researcher_add = 2
		job_roboticist_add = 2
		job_enforcer_add = 4
		job_soldier_add = 7
		planet_orbital_bombardment_damage = -0.1
	}
	country_modifier = {
		army_health = 0.1
		army_damage_mult = 0.1
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 700
			alloys = 400
			volatile_motes = 150
			exotic_gases = 300
			rare_crystals = 150
		}
		upkeep = {
			energy = 10
			volatile_motes = 2
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
			sr_dark_matter = 1
		}
	}
	prerequisites = { "tech_enigmatic_arsenal" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 1000 }
}

############################################################################
# Occulari Tower
building_occulari_tower = {
	base_buildtime = 3600
	base_cap_amount = 1
	planetary_ftl_inhibitor = yes
	category = army
	potential = {
		merg_is_habitat = no
		is_capital = yes
		exists = owner
		owner = { has_technology = tech_occulari_order }
	}
	allow = {
		has_major_upgraded_capital = yes
		is_capital = yes
	}
	destroy_trigger = {
		exists = owner
		NAND = {
			is_capital = yes
			owner = { has_technology = tech_occulari_order }
		}
		# OR = {
		# 	# buildings_no_exotic_gases = yes
		# 	# buildings_no_motes = yes
		# 	# buildings_no_crystals = yes
		# }
	}
	planet_modifier = {
		planet_housing_add = 18
		job_strategic_command_add = 1
		job_foundry_add = 2
		job_researcher_add = 2
		job_telepath_add = 2
		job_enforcer_add = 4
		job_soldier_add = 7
		planet_orbital_bombardment_damage = -0.1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_psi_forge_technologies }
		}
		job_colossi_artificer_add = 2
		job_colossi_guardian_add = 2
	}
	country_modifier = {
		army_health = 0.1
		army_damage_mult = 0.1
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 700
			alloys = 400
			volatile_motes = 150
			exotic_gases = 250
			rare_crystals = 150
			sr_zro = 50
		}
		upkeep = {
			energy = 10
			volatile_motes = 2
			exotic_gases = 2
			rare_crystals = 2
			alloys = 2
			sr_zro = 1
		}
	}
	prerequisites = { "tech_occulari_order" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 1000 }
}

# PERSONAL NOTE: The buildings will be hilariously powerful. The massive upkeep and long build-time might halt the worst of it until
#####		   I find a more permanent solution.
###################################################################################
###################################################################################
# Interstellar Communication Array
building_interstellar_communication_array = {
	base_buildtime = 480
	category = government
	base_cap_amount = 1
	potential = {
		is_capital = yes
		exists = owner
		owner = { is_regular_empire = yes }
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}
	allow = { has_major_upgraded_capital = yes }
	destroy_trigger = {
		exists = owner
		NAND = {
			is_capital = yes
			owner = { is_regular_empire = yes }
		}
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_crystals = yes
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
			rare_crystals = 50
		}
		upkeep = {
			energy = 5
			rare_crystals = 1
		}
	}
	planet_modifier = {
		job_bureaucrat_add = 10
		planet_housing_add = 10
	}
	country_modifier = {
		empire_size_pops_mult = -0.1		# country_admin_cap_mult = 0.05
	}
	upgrades = {
		"building_interstellar_administrative_array"
		"building_galactic_administrative_array"
	}
	prerequisites = { "tech_galactic_bureaucracy" }
	show_tech_unlock_if = { is_regular_empire = yes }
	triggered_desc = { text = job_bureaucrat_effect_desc }
	on_queued = {
		planet = {
			set_timed_planet_flag = { flag = recent_admin_building_built years = 2 }
		}
		owner = {
			set_timed_country_flag = { flag = buildings_new_crystal_building months = 20 }
		}
	}
	# ai_weight = {
	# 	weight = 0
	# 	modifier = {
	# 		factor = 0
	# 		OR = {
	# 			buildings_build_building = no
	# 			buildings_has_crystals = no
	# 		}
	# 	}
	# 	# modifier = {
	# 	# 	weight = 20
	# 	# 	owner = { empire_sprawl_over_cap > 0 }
	# 	# }
	# 	# modifier = {
	# 	# 	weight = 50
	# 	# 	owner = { empire_sprawl_over_cap > 10 }
	# 	# }
	# 	# modifier = {
	# 	# 	weight = 100
	# 	# 	owner = { empire_sprawl_over_cap > 20 }
	# 	# }
	# 	# modifier = {
	# 	# 	weight = 500
	# 	# 	owner = { empire_sprawl_over_cap > 40 }
	# 	# }
	# 	modifier = {
	# 		factor = 2
	# 		owner = { has_valid_civic = civic_byzantine_bureaucracy }
	# 	}
	# }
}

###############################################################################
# Interstellar Administrative Array
building_interstellar_administrative_array = {
	base_buildtime = 600
	category = government
	base_cap_amount = 1
	can_build = no
	potential = {
		is_capital = yes
		merg_is_arcology = yes
		exists = owner
		owner = { is_regular_empire = yes }
		NOR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}
	allow = { has_major_upgraded_capital = yes }
	destroy_trigger = {
		exists = owner
		NAND = {
			is_capital = yes
			owner = { is_regular_empire = yes }
		}
		OR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
			# buildings_no_crystals = yes
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 800
			rare_crystals = 100
		}
		upkeep = {
			energy = 8
			rare_crystals = 1
		}
	}
	planet_modifier = {
		job_bureaucrat_add = 15
		planet_housing_add = 15
	}
	country_modifier = {
		empire_size_pops_mult = -0.1		# country_admin_cap_mult = 0.05
	}
	prerequisites = { "tech_galactic_bureaucracy" }
	show_tech_unlock_if = { is_regular_empire = yes }
	triggered_desc = { text = job_bureaucrat_effect_desc }
	on_queued = {
		planet = {
			set_timed_planet_flag = { flag = recent_admin_building_built years = 2 }
		}
		owner = {
			set_timed_country_flag = { flag = buildings_new_crystal_building months = 20 }
		}
	}
	# ai_weight = {
	# 	weight = 0
	# 	modifier = {
	# 		factor = 0
	# 		OR = {
	# 			buildings_build_building = no
	# 			buildings_has_crystals = no
	# 		}
	# 	}
	# 	# modifier = {
	# 	# 	weight = 20
	# 	# 	owner = { empire_sprawl_over_cap > 0 }
	# 	# }
	# 	# modifier = {
	# 	# 	weight = 50
	# 	# 	owner = { empire_sprawl_over_cap > 10 }
	# 	# }
	# 	# modifier = {
	# 	# 	weight = 100
	# 	# 	owner = { empire_sprawl_over_cap > 20 }
	# 	# }
	# 	# modifier = {
	# 	# 	weight = 500
	# 	# 	owner = { empire_sprawl_over_cap > 40 }
	# 	# }
	# 	modifier = {
	# 		factor = 2
	# 		owner = { has_valid_civic = civic_byzantine_bureaucracy }
	# 	}
	# }
}

###############################################################################
# Galactic Administrative Array
building_galactic_administrative_array = {
	base_buildtime = 720
	category = government
	base_cap_amount = 1
	can_build = no
	potential = {
		is_capital = yes
		is_artificial = yes
		exists = owner
		owner = { is_regular_empire = yes }
		NOR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}
	allow = { has_major_upgraded_capital = yes }
	destroy_trigger = {
		exists = owner
		NAND = {
			is_capital = yes
			owner = { is_regular_empire = yes }
		}
		OR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
			# buildings_no_crystals = yes
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 1000
			rare_crystals = 150
		}
		upkeep = {
			energy = 10
			rare_crystals = 2
		}
	}
	planet_modifier = {
		job_bureaucrat_add = 20
		planet_housing_add = 20
	}
	country_modifier = {
		empire_size_pops_mult = -0.1		# country_admin_cap_mult = 0.05
	}
	prerequisites = { "tech_galactic_bureaucracy" }
	show_tech_unlock_if = { is_regular_empire = yes }
	triggered_desc = { text = job_bureaucrat_effect_desc }
	on_queued = {
		planet = {
			set_timed_planet_flag = { flag = recent_admin_building_built years = 2 }
		}
		owner = {
			set_timed_country_flag = { flag = buildings_new_crystal_building months = 20 }
		}
	}
	# ai_weight = {
	# 	weight = 0
	# 	modifier = {
	# 		factor = 0
	# 		OR = {
	# 			buildings_build_building = no
	# 			buildings_has_crystals = no
	# 		}
	# 	}
	# 	# modifier = {
	# 	# 	weight = 20
	# 	# 	owner = { empire_sprawl_over_cap > 0 }
	# 	# }
	# 	# modifier = {
	# 	# 	weight = 50
	# 	# 	owner = { empire_sprawl_over_cap > 10 }
	# 	# }
	# 	# modifier = {
	# 	# 	weight = 100
	# 	# 	owner = { empire_sprawl_over_cap > 20 }
	# 	# }
	# 	# modifier = {
	# 	# 	weight = 500
	# 	# 	owner = { empire_sprawl_over_cap > 40 }
	# 	# }
	# 	modifier = {
	# 		factor = 2
	# 		owner = { has_valid_civic = civic_byzantine_bureaucracy }
	# 	}
	# }
}

###################################################################################
###################################################################################
## Hydroponics Complex
# Has a clash with OSA version
building_hydroponics_complex = {
	base_buildtime = 480
	category = resource
	potential = {
		exists = owner
		NOR = {
			merg_is_machine_world = yes
			has_modifier = resort_colony
		}
	}
	destroy_trigger = {
		exists = owner
		OR = {
			merg_is_machine_world = yes
			has_modifier = resort_colony
			# buildings_no_motes = yes
		}
	}
	# allow = {
	# 	# buildings_simple_allow = yes
	# 	hidden_trigger = {
	# 		planet = {
	# 			OR = {
	# 				AND = {
	# 					free_jobs < 2
	# 					num_free_districts = { type = district_mining value = 0 }
	# 					num_free_districts = { type = district_generator value = 0 }
	# 					num_free_districts = { type = district_farming value = 0 }
	# 				}
	# 				AND = {
	# 					exists = owner
	# 					owner = { is_ai = no }
	# 				}
	# 			}
	# 		}
	# 	}
	# }
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_farmer_add = 5
			planet_housing_add = 3
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_agri_drone_add = 5
			planet_housing_add = 3
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_agrarian_idyll }
		}
		modifier = { planet_housing_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_housing_agrarian_idyll }
		}
		modifier = { planet_housing_add = 1 }
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
			volatile_motes = 50
		}
		upkeep = {
			energy = 5
			volatile_motes = 1
		}
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_agri_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_farmer_effect_desc
	}
	prerequisites = { "tech_food_processing_2" }
	# ai_weight = {
	# 	weight = 0
	# 	modifier = {
	# 		weight = 30			# Needs to be higher than building_hydroponics_farm
	# 		OR = {
	# 			num_districts = { type = district_farming value >= 3 }
	# 			num_districts = { type = district_farming_uncapped value >= 3 }
	# 			num_districts = { type = district_rw_farming value >= 1 }
	# 			owner = { is_hive_empire = yes }				# Constantly short on food for some reason
	# 		}
	# 	}
	# 	modifier = {
	# 		factor = 2
	# 		exists = owner
	# 		owner = {
	# 			has_monthly_income = {
	# 				resource = food
	# 				value < 50
	# 			}
	# 		}
	# 	}
	# }
	ai_resource_production = {
		food = 1
		trigger = { always = yes }
	}
}

############################################################################
############################################################################
# Nutrient Recycling Facility
building_nutrient_recycling_facility = {
	base_buildtime = 360
	base_cap_amount = 1
	category = resource
	potential = {
		NOR = {
			merg_is_machine_world = yes
			has_modifier = resort_colony
		}
	}
	planet_modifier = { planet_pops_organics_food_upkeep_mult = -0.25 }
	resources = {
		category = planet_buildings
		cost = { minerals = 500 }
		upkeep = { energy = 7 }
	}
	prerequisites = { "tech_nutrient_replication" }
	# ai_weight = {
	# 	weight = 2
	# 	modifier = {
	# 		factor = 5
	# 		owner = {
	# 			has_monthly_income = {
	# 				resource = food
	# 				value < 5
	# 			}
	# 		}
	# 	}
	# 	modifier = {
	# 		factor = 0
	# 		owner = {
	# 			OR = {
	# 				is_mechanical_empire = no
	# 				AND = {
	# 					is_mechanical_empire = yes
	# 					OR = {
	# 						has_civic = civic_machine_servitor
	# 						has_civic = civic_machine_assimilator
	# 					}
	# 				}
	# 			}
	# 			has_monthly_income = {
	# 				resource = energy
	# 				value < 5
	# 			}
	# 		}
	# 	}
	# 	modifier = {
	# 		factor = 0
	# 		owner = {
	# 			is_mechanical_empire = yes
	# 			NOR = {
	# 				has_civic = civic_machine_servitor
	# 				has_civic = civic_machine_assimilator
	# 			}
	# 		}
	# 	}
	# 	# No one to work it
	# 	modifier = {
	# 		factor = 0
	# 		count_owned_pop = {
	# 			limit = {
	# 				OR = {
	# 					is_unemployed = yes
	# 					has_job = servant
	# 				}
	# 			}
	# 			count < 1
	# 		}
	# 	}
	# }
	ai_resource_production = {
		food = 1
		trigger = { always = yes }
	}
}

##########################################################################################
############# MEGACORP BUILDINGS #########################################################
##########################################################################################
# Medical Mega Facility
building_medical_mega_facility = {
	base_buildtime = 600
	owner_type = corporate
	prerequisites = { "tech_frontier_hospital" }
	potential = {
		has_branch_office = yes
		branch_office_owner = { is_criminal_syndicate = no }
		NOR = {
			merg_is_habitat = yes
			is_planet_class = pc_hive
			merg_is_machine_world = yes
		}
	}
	allow = { num_pops >= 50 }
	planet_modifier = { job_healthcare_add = 2 }
	army_modifier = { army_defense_health_mult = 0.05 }
	resources = {
		category = planet_branch_office_buildings
		cost = {
			minerals = 500
			alloys = 250
		}
		produces = {
			energy = 10
			physics_research = 4
			engineering_research = 4
			society_research = 4
		}
		upkeep = {
			energy = 5
			minerals = 1
		}
	}
	show_tech_unlock_if = {
		is_megacorp = yes
		is_criminal_syndicate = no
	}
	# ai_weight = { weight = 1 }
}

# Interstellar Trade and Travel Hub
building_interstellar_travel_and_trade_hub = {
	base_buildtime = 600
	base_cap_amount = 1
	owner_type = corporate
	prerequisites = { "tech_interstellar_economics" }
	potential = {
		has_branch_office = yes
		branch_office_owner = { is_criminal_syndicate = no }
		OR = {
			branch_office_owner = { has_valid_civic = civic_trading_posts }
			branch_office_owner = { has_valid_civic = civic_free_traders }
		}
	}
	allow = { num_pops >= 50 }
	planet_modifier = {
		trade_value_mult = 0.05
		pop_growth_from_immigration = 0.15
		pop_resettlement_cost_mult = -0.15
	}
	resources = {
		category = planet_branch_office_buildings
		cost = {
			minerals = 500
			alloys = 250
		}
		produces = {
			energy = 10
			minerals = 2
			consumer_goods = 2
			alloys = 2
		}
		upkeep = {
			energy = 5
			minerals = 2
		}
	}
	show_tech_unlock_if = {
		is_megacorp = yes
		is_criminal_syndicate = no
	}
	# ai_weight = { weight = 1 }
}

# Planetary Security Facilities
building_planetary_security_facilities = {
	base_buildtime = 600
	base_cap_amount = 1
	owner_type = corporate
	prerequisites = { "tech_global_defense_grid" }
	potential = {
		has_branch_office = yes
		branch_office_owner = { is_criminal_syndicate = no }
		OR = {
			branch_office_owner = { has_valid_civic = civic_naval_contractors }
			branch_office_owner = { has_valid_civic = civic_private_military_companies }
		}
	}
	allow = { num_pops >= 50 }
	planet_modifier = {
		job_soldier_add = 1
		job_enforcer_add = 1
	}
	country_modifier = { country_naval_cap_add = 10 }
	resources = {
		category = planet_branch_office_buildings
		cost = {
			minerals = 500
			alloys = 250
		}
		produces = { alloys = 3 }
		upkeep = {
			energy = 5
			alloys = 1
		}
	}
	show_tech_unlock_if = {
		is_megacorp = yes
		is_criminal_syndicate = no
	}
	# ai_weight = { weight = 1 }
}

# Local Media Megaplex
building_local_media_megaplex = {
	base_buildtime = 600
	base_cap_amount = 1
	owner_type = corporate
	prerequisites = { "tech_galactic_administration" }
	potential = {
		has_branch_office = yes
		branch_office_owner = {
			is_criminal_syndicate = no
			has_valid_civic = civic_media_conglomerate
		}
	}
	allow = { num_pops >= 50 }
	planet_modifier = {
		pop_government_ethic_attraction = 0.2
		planet_stability_add = 5
	}
	resources = {
		category = planet_branch_office_buildings
		cost = {
			minerals = 500
			alloys = 250
		}
		produces = {
			energy = 10
			unity = 6
		}
		upkeep = {
			energy = 5
			minerals = 2
		}
	}
	show_tech_unlock_if = {
		is_megacorp = yes
		is_criminal_syndicate = no
	}
	# ai_weight = { weight = 1 }
}

# Information Brokers
building_information_brokers = {
	base_buildtime = 600
	base_cap_amount = 1
	owner_type = corporate
	prerequisites = { "tech_galactic_administration" }
	potential = {
		has_branch_office = yes
		branch_office_owner = { is_criminal_syndicate = yes }
	}
	allow = { num_pops >= 50 }
	planet_modifier = {
		planet_crime_add = 50
		planet_stability_add = 5
		job_clerk_add = 1
		job_merchant_add = 1
		job_researcher_add = 1
	}
	resources = {
		category = planet_branch_office_buildings
		cost = {
			minerals = 500
			alloys = 250
		}
		produces = {
			energy = 10
			physics_research = 4
			engineering_research = 4
			society_research = 4
			unity = 2
		}
		upkeep = { energy = 3 }
	}
	show_tech_unlock_if = { is_criminal_syndicate = yes }
	# ai_weight = { weight = 1 }
}

#################################################################################################
################# HABITAT 2.3+ ##################################################################
# Academy District
building_academy_district = {
	base_buildtime = 600
	base_cap_amount = 1
	category = research
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
		merg_is_habitat = yes
		exists = owner
		owner = { is_regular_empire = yes }
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		}
	}
	convert_to = {
		building_orbital_research_hive
		building_orbital_research_uplink
	}
	planet_modifier = {
		planet_housing_add = 4
		job_clerk_add = 1
		job_technician_add = 1
		job_researcher_add = 2
		job_enforcer_add = 1
		planet_researchers_produces_mult = 0.1
		planet_technician_energy_produces_mult = 0.1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_the_infinity_network }
		}
		job_cynosural_researcher_add = 1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_ascension_perk = ap_voidborn }
		}
		modifier = {
			planet_housing_add = 2
			job_researcher_add = 2
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 250
			alloys = 150
			volatile_motes = 25
			exotic_gases = 25
			rare_crystals = 25
		}
		upkeep = {
			energy = 4
			exotic_gases = 0.5
			rare_crystals = 0.5
			alloys = 0.5
		}
	}
	prerequisites = { "tech_unified_research_networks" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

#####################################################################################################
# Foundry District
building_foundry_district = {
	base_buildtime = 600
	base_cap_amount = 1
	category = resource
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
		merg_is_habitat = yes
		exists = owner
		owner = { is_regular_empire = yes }
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_motes = yes
			# buildings_no_crystals = yes
		}
	}
	convert_to = {
		building_foundry_hive
		building_foundry_unit
	}
	planet_modifier = {
		planet_housing_add = 3
		job_miner_add = 1
		job_foundry_add = 1
		job_artisan_add = 1
		job_enforcer_add = 1
		planet_miners_minerals_produces_mult = 0.1
		planet_metallurgists_produces_mult = 0.1
		planet_artisans_produces_mult = 0.1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_streamlined_megaproduction }
		}
		job_starlift_specialist_add = 1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_ascension_perk = ap_voidborn }
		}
		modifier = {
			planet_housing_add = 2
			job_foundry_add = 1
			job_artisan_add = 1
		}
	}
	country_modifier = { country_resource_max_add = 250 }
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_mechanical_empire = yes }
		}
		job_roboticist_add = 1
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 250
			alloys = 150
			volatile_motes = 25
			exotic_gases = 25
			rare_crystals = 25
		}
		upkeep = {
			energy = 7
			volatile_motes = 1
			rare_crystals = 1
			alloys = 1
		}
	}
	prerequisites = { "tech_streamlined_megaproduction" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

############################################################################################
# Agency Operations District
building_agency_operations_district = {
	base_buildtime = 600
	base_cap_amount = 1
	category = amenity
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
		merg_is_habitat = yes
		exists = owner
		owner = { is_regular_empire = yes }
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		}
	}
	convert_to = {
		building_orbital_mutation_hive
		building_orbital_bio_analysis_unit
	}
	planet_modifier = {
		planet_housing_add = 3
		job_colonial_agent_add = 1
		job_farmer_add = 1
		job_healthcare_add = 1
		job_researcher_add = 1
		job_enforcer_add = 1
		planet_farmers_food_produces_mult = 0.1
		planet_pops_consumer_goods_upkeep_mult = -0.1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_ascension_perk = ap_voidborn }
		}
		modifier = {
			planet_housing_add = 2
			job_farmer_add = 1
			job_healthcare_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOR = {
					is_megacorp = yes
					has_civic = civic_exalted_priesthood
					has_civic = civic_aristocratic_elite
					has_civic = civic_merchant_guilds
					has_civic = civic_technocracy
				}
			}
		}
		modifier = { job_politician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_mechanical_empire = yes }
		}
		job_roboticist_add = 1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_megacorp = yes }
		}
		modifier = { job_executive_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_exalted_priesthood }
		}
		modifier = {
			job_politician_add = 1
			job_high_priest_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_aristocratic_elite }
		}
		modifier = {
			job_politician_add = 1
			job_noble_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_technocracy }
		}
		modifier = {
			job_head_researcher_add = 1
			job_politician_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_merchant_guilds }
		}
		modifier = {
			job_politician_add = 1
			job_merchant_add = 1
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 250
			alloys = 150
			volatile_motes = 25
			exotic_gases = 25
			rare_crystals = 25
		}
		upkeep = {
			energy = 4
			exotic_gases = 0.5
			rare_crystals = 0.5
			alloys = 0.5
		}
	}
	prerequisites = { "tech_the_colonial_agency" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

##########################################################################################
# Orbital Forum
building_orbital_forum = {
	base_buildtime = 600
	base_cap_amount = 1
	category = unity
	potential = {
		exists = owner
		NOT = { has_modifier = slave_colony }
		merg_is_habitat = yes
		owner = {
			is_gestalt = no
			is_spiritualist = no
			is_megacorp = no
		}
	}
	destroy_trigger = {
		OR = {
			has_modifier = slave_colony
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		}
	}
	convert_to = {
		building_orbital_temple
		building_orbital_synaptic_nexus
		building_orbital_mirror_core
		building_megacorp_orbital_forum
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 250
			alloys = 150
			volatile_motes = 50
			exotic_gases = 50
			rare_crystals = 50
		}
		upkeep = {
			energy = 4
			exotic_gases = 0.5
			rare_crystals = 0.5
			alloys = 0.5
		}
	}
	planet_modifier = {
		planet_housing_add = 5
		job_clerk_add = 1
		job_entertainer_add = 1
		job_merchant_add = 1
		job_culture_worker_add = 2
		job_enforcer_add = 1
		planet_jobs_unity_produces_mult = 0.1
		pop_government_ethic_attraction = 0.1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_ascension_perk = ap_voidborn
				has_technology = tech_social_megahubs
			}
		}
		modifier = {
			planet_housing_add = 2
			job_entertainer_add = 1
			job_culture_worker_add = 1
		}
	}
	prerequisites = { "tech_social_megahubs" }
	show_tech_unlock_if = {
		is_gestalt = no
		is_spiritualist = no
		is_megacorp = no
	}
	# ai_weight = { factor = 500 }
}

########################################################################################
# Orbital Temple
building_orbital_temple = {
	base_buildtime = 600
	base_cap_amount = 1
	category = unity
	potential = {
		NOT = { has_modifier = slave_colony }
		merg_is_habitat = yes
		exists = owner
		owner = { is_spiritualist = yes }
	}
	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_gestalt = yes }
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 250
			alloys = 150
			volatile_motes = 50
			exotic_gases = 50
			rare_crystals = 50
		}
		upkeep = {
			energy = 4
			exotic_gases = 0.5
			rare_crystals = 0.5
			alloys = 0.5
		}
	}
	planet_modifier = {
		planet_housing_add = 10
		job_priest_add = 7
		job_clerk_add = 2
		job_healthcare_add = 2
		job_enforcer_add = 1
		planet_jobs_unity_produces_mult = 0.1
		pop_ethic_spiritualist_attraction_mult = 0.15
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_1
		}
		planet_housing_add = 1
		job_priest_add = 1
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 1
		pop_amenities_usage_mult = -0.02
		planet_jobs_unity_produces_mult = 0.03
		pop_ethic_spiritualist_attraction_mult = 0.03
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_2
		}
		planet_housing_add = 2
		job_priest_add = 1
		job_clerk_add = 1
		job_healthcare_add = 1
		job_enforcer_add = 1
		pop_amenities_usage_mult = -0.03
		planet_jobs_unity_produces_mult = 0.06
		pop_ethic_spiritualist_attraction_mult = 0.06
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_3
		}
		planet_housing_add = 3
		job_priest_add = 2
		job_clerk_add = 2
		job_healthcare_add = 2
		job_enforcer_add = 2
		pop_amenities_usage_mult = -0.04
		planet_jobs_unity_produces_mult = 0.09
		pop_ethic_spiritualist_attraction_mult = 0.09
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_spiritualist = yes }
			has_modifier = consecrated_quality_4
		}
		planet_housing_add = 4
		job_priest_add = 2
		job_clerk_add = 2
		job_healthcare_add = 2
		job_enforcer_add = 2
		pop_amenities_usage_mult = -0.06
		planet_jobs_unity_produces_mult = 0.12
		pop_ethic_spiritualist_attraction_mult = 0.12
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_ascension_perk = ap_voidborn
				has_technology = tech_bastions_of_faith
			}
		}
		modifier = {
			planet_housing_add = 2
			job_priest_add = 2
		}
	}
	prerequisites = { "tech_bastions_of_faith" }
	show_tech_unlock_if = { is_spiritualist = yes }
	# ai_weight = { factor = 500 }
}

#######################################################################################
# Megacorp Orbital Forum
building_megacorp_orbital_forum = {
	base_buildtime = 600
	base_cap_amount = 1
	icon = building_orbital_forum
	category = unity
	potential = {
		NOT = { has_modifier = slave_colony }
		merg_is_habitat = yes
		exists = owner
		owner = {
			is_gestalt = no
			is_spiritualist = no
			is_megacorp = yes
		}
	}
	destroy_trigger = {
		exists = owner
		OR = {
			has_modifier = slave_colony
			owner = { is_megacorp = no }
			# buildings_no_exotic_gases = yes
			# buildings_no_crystals = yes
		}
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 250
			alloys = 150
			volatile_motes = 50
			exotic_gases = 50
			rare_crystals = 50
		}
		upkeep = {
			energy = 4
			exotic_gases = 0.5
			rare_crystals = 0.5
			alloys = 0.5
		}
	}
	planet_modifier = {
		planet_housing_add = 5
		job_entertainer_add = 1
		job_merchant_add = 1
		job_manager_add = 3
		job_enforcer_add = 1
		planet_jobs_unity_produces_mult = 0.1
		pop_government_ethic_attraction = 0.1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_ascension_perk = ap_voidborn
				has_technology = tech_social_megahubs
			}
		}
		modifier = {
			planet_housing_add = 2
			job_merchant_add = 1
			job_manager_add = 3
		}
	}
	prerequisites = { "tech_social_megahubs" }
	show_tech_unlock_if = { is_megacorp = yes }
	# ai_weight = { factor = 500 }
}

#############################################################################################################
################## RELIC WORLD ##############################################################################
# Expedition Headquarters
building_expedition_headquarters = {
	base_buildtime = 480
	base_cap_amount = 1
	category = research
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			merg_is_habitat = yes
		}
		exists = owner
		owner = { is_regular_empire = yes }
		OR = {
			is_planet_class = pc_relic
			has_deposit = d_former_relic_world
		}
	}
	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}
	allow = { has_upgraded_capital = yes }
	convert_to = { building_expedition_vault }
	planet_modifier = {
		job_researcher_add = 5
		job_enforcer_add = 1
		job_archeologist_regular_add = 2
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
			exotic_gases = 50
		}
		upkeep = {
			energy = 5
			exotic_gases = 1
		}
	}
	prerequisites = { "tech_deep_space_expeditions" }
	show_tech_unlock_if = { is_regular_empire = yes }
	# ai_weight = { weight = 500 }
}

#############################################################################################################
################## RESOURCE STORAGE ##############################################################################
# Strategic Resource Reserve
building_strategic_resource_silo = {
	base_buildtime = 360
	base_cap_amount = 1
	category = resource
	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
		exists = owner
		owner = {
			OR = {
				is_ai = no
				NOT = { has_technology = tech_mega_engineering }
				has_ascension_perk = ap_arcology_project
			}
		}
	}
	destroy_trigger = {
		exists = owner
		owner = {
			is_ai = yes
			has_technology = tech_mega_engineering
			NOT = { has_ascension_perk = ap_arcology_project }
		}
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}
	planet_modifier = { planet_housing_add = 2 }
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = { job_clerk_add = 4 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = { job_maintenance_drone_add = 2 }
	}
	resources = {
		category = planet_buildings
		cost = { minerals = 500 }
		upkeep = { energy = 2 }
	}
	country_modifier = { country_resource_max_add = 4000 }
	prerequisites = { "tech_strategic_resource_reserves" }
	upgrades = {
		"building_deep_strategic_resource_reserves"
		"building_universal_resource_reserves"
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_maintenance_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_clerk_effect_desc
	}
	ai_weight = {
		weight = 0
		modifier = {
			weight = 9000
			owner = {
				has_ascension_perk = ap_arcology_project
				NOT = { has_technology = tech_mega_engineering }
			}
			NOT = { has_building = building_resource_silo }
		}
	}
}

###############################################
# Deep Strategic Resource Reserve
building_deep_strategic_resource_reserves = {
	base_buildtime = 360
	can_build = no
	category = resource
	potential = {
		OR = {
			merg_is_arcology = yes
			merg_is_machine_world = yes
			is_planet_class = pc_hive
		}
		exists = owner
		owner = {
			OR = {
				is_ai = no
				NOT = { has_technology = tech_mega_engineering }
				has_ascension_perk = ap_arcology_project
			}
		}
	}
	allow = { has_upgraded_capital = yes }
	destroy_trigger = {
		exists = owner
		owner = {
			is_ai = yes
			has_technology = tech_mega_engineering
			NOT = { has_ascension_perk = ap_arcology_project }
		}
	}
	planet_modifier = { planet_housing_add = 3 }
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = { job_clerk_add = 5 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = { job_maintenance_drone_add = 3 }
	}
	resources = {
		category = planet_buildings
		cost = { minerals = 500 }
		upkeep = { energy = 3 }
	}
	country_modifier = { country_resource_max_add = 5000 }
	prerequisites = { "tech_strategic_resource_reserves" }
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_maintenance_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_clerk_effect_desc
	}
	# ai_weight = {
	# 	weight = 0
	# 	modifier = {
	# 		weight = 90000
	# 		owner = {
	# 			has_ascension_perk = ap_arcology_project
	# 			NOT = { has_technology = tech_mega_engineering }
	# 		}
	# 		NOT = { has_building = building_resource_silo }
	# 	}
	# }
}

###############################################
# Universal Resource Reserves
building_universal_resource_reserves = {
	base_buildtime = 720
	can_build = no
	category = resource
	potential = {
		is_artificial = yes
	}
	allow = { has_upgraded_capital = yes }
	# destroy_trigger = {  }
	planet_modifier = { planet_housing_add = 4 }
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = { job_clerk_add = 7 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = { job_maintenance_drone_add = 5 }
	}
	resources = {
		category = planet_buildings
		cost = { minerals = 1000 }
		upkeep = { energy = 3 }
	}
	country_modifier = { country_resource_max_add = 6000 }
	prerequisites = { "tech_strategic_resource_reserves" }
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_maintenance_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_clerk_effect_desc
	}
	# ai_weight = {
	# 	weight = 0
	# 	modifier = {
	# 		weight = 90000
	# 		owner = {
	# 			has_ascension_perk = ap_arcology_project
	# 			NOT = { has_technology = tech_mega_engineering }
	# 		}
	# 		NOT = { has_building = building_resource_silo }
	# 	}
	# }
}
